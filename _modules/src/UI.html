

<!DOCTYPE html>
<html class="writer-html5" lang="en" data-content_root="../../">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>src.UI &mdash; Property Tycoon V1.0 Documentation V1.0 documentation</title>
      <link rel="stylesheet" type="text/css" href="../../_static/pygments.css?v=b86133f3" />
      <link rel="stylesheet" type="text/css" href="../../_static/css/theme.css?v=e59714d7" />
      <link rel="stylesheet" type="text/css" href="../../_static/graphviz.css?v=4ae1632d" />

  
      <script src="../../_static/jquery.js?v=5d32c60e"></script>
      <script src="../../_static/_sphinx_javascript_frameworks_compat.js?v=2cd50e6c"></script>
      <script src="../../_static/documentation_options.js?v=d43430bd"></script>
      <script src="../../_static/doctools.js?v=9bcbadda"></script>
      <script src="../../_static/sphinx_highlight.js?v=dc90522c"></script>
    <script src="../../_static/js/theme.js"></script>
    <link rel="index" title="Index" href="../../genindex.html" />
    <link rel="search" title="Search" href="../../search.html" /> 
</head>

<body class="wy-body-for-nav"> 
  <div class="wy-grid-for-nav">
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >

          
          
          <a href="../../index.html" class="icon icon-home">
            Property Tycoon V1.0 Documentation
          </a>
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" aria-label="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>
        </div><div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="Navigation menu">
              <p class="caption" role="heading"><span class="caption-text">Contents:</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../modules/main.html">Main Module</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../modules/game.html">Game Module</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../modules/game_logic.html">Game Logic Module</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../modules/game_actions.html">Game Actions Module</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../modules/game_event_handler.html">Game Event Handler Module</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../modules/game_renderer.html">Game Renderer Module</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../modules/player.html">Player Module</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../modules/board.html">Board Module</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../modules/property.html">Property Module</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../modules/ai_player_logic.html">AI Player Logic Module</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../modules/cards.html">Cards Module</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../modules/ui.html">UI Module</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../modules/development_mode.html">Development Mode Module</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../modules/loadexcel.html">Load Excel Module</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../modules/sound_manager.html">Sound Manager Module</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../modules/font_manager.html">Font Manager Module</a></li>
</ul>

        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap"><nav class="wy-nav-top" aria-label="Mobile navigation menu" >
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../../index.html">Property Tycoon V1.0 Documentation</a>
      </nav>

      <div class="wy-nav-content">
        <div class="rst-content">
          <div role="navigation" aria-label="Page navigation">
  <ul class="wy-breadcrumbs">
      <li><a href="../../index.html" class="icon icon-home" aria-label="Home"></a></li>
          <li class="breadcrumb-item"><a href="../index.html">Module code</a></li>
      <li class="breadcrumb-item active">src.UI</li>
      <li class="wy-breadcrumbs-aside">
      </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
             
  <h1>Source code for src.UI</h1><div class="highlight"><pre>
<span></span><span class="c1"># Property Tycoon ui.py</span>
<span class="c1"># Contains the classes for the UI, such as the buttons, input fields, and other UI elements.</span>

<span class="kn">import</span><span class="w"> </span><span class="nn">pygame</span>
<span class="kn">import</span><span class="w"> </span><span class="nn">random</span>
<span class="kn">from</span><span class="w"> </span><span class="nn">src.Font_Manager</span><span class="w"> </span><span class="kn">import</span> <span class="n">font_manager</span>
<span class="kn">from</span><span class="w"> </span><span class="nn">src.Sound_Manager</span><span class="w"> </span><span class="kn">import</span> <span class="n">sound_manager</span>
<span class="kn">import</span><span class="w"> </span><span class="nn">os</span>
<span class="kn">import</span><span class="w"> </span><span class="nn">webbrowser</span>

<span class="n">WHITE</span> <span class="o">=</span> <span class="p">(</span><span class="mi">255</span><span class="p">,</span> <span class="mi">255</span><span class="p">,</span> <span class="mi">255</span><span class="p">)</span>
<span class="n">BLACK</span> <span class="o">=</span> <span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">)</span>
<span class="n">GRAY</span> <span class="o">=</span> <span class="p">(</span><span class="mi">128</span><span class="p">,</span> <span class="mi">128</span><span class="p">,</span> <span class="mi">128</span><span class="p">)</span>
<span class="n">LIGHT_GRAY</span> <span class="o">=</span> <span class="p">(</span><span class="mi">59</span><span class="p">,</span> <span class="mi">59</span><span class="p">,</span> <span class="mi">59</span><span class="p">)</span>
<span class="n">UI_BG</span> <span class="o">=</span> <span class="p">(</span><span class="mi">18</span><span class="p">,</span> <span class="mi">18</span><span class="p">,</span> <span class="mi">18</span><span class="p">)</span>

<span class="n">DARK_RED</span> <span class="o">=</span> <span class="p">(</span><span class="mi">139</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">)</span>
<span class="n">DARK_GREEN</span> <span class="o">=</span> <span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">100</span><span class="p">,</span> <span class="mi">0</span><span class="p">)</span>
<span class="n">DARK_BLUE</span> <span class="o">=</span> <span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">139</span><span class="p">)</span>
<span class="n">GOLD</span> <span class="o">=</span> <span class="p">(</span><span class="mi">218</span><span class="p">,</span> <span class="mi">165</span><span class="p">,</span> <span class="mi">32</span><span class="p">)</span>
<span class="n">CREAM</span> <span class="o">=</span> <span class="p">(</span><span class="mi">255</span><span class="p">,</span> <span class="mi">253</span><span class="p">,</span> <span class="mi">208</span><span class="p">)</span>
<span class="n">BURGUNDY</span> <span class="o">=</span> <span class="p">(</span><span class="mi">128</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">32</span><span class="p">)</span>

<span class="n">ACCENT_COLOR</span> <span class="o">=</span> <span class="n">BURGUNDY</span>
<span class="n">BUTTON_HOVER</span> <span class="o">=</span> <span class="p">(</span><span class="mi">160</span><span class="p">,</span> <span class="mi">20</span><span class="p">,</span> <span class="mi">40</span><span class="p">)</span>
<span class="n">ERROR_COLOR</span> <span class="o">=</span> <span class="p">(</span><span class="mi">220</span><span class="p">,</span> <span class="mi">53</span><span class="p">,</span> <span class="mi">69</span><span class="p">)</span>
<span class="n">SUCCESS_COLOR</span> <span class="o">=</span> <span class="n">DARK_GREEN</span>
<span class="n">MODE_COLOR</span> <span class="o">=</span> <span class="n">DARK_BLUE</span>
<span class="n">TIME_COLOR</span> <span class="o">=</span> <span class="p">(</span><span class="mi">255</span><span class="p">,</span> <span class="mi">180</span><span class="p">,</span> <span class="mi">100</span><span class="p">)</span>
<span class="n">HUMAN_COLOR</span> <span class="o">=</span> <span class="n">DARK_GREEN</span>
<span class="n">AI_COLOR</span> <span class="o">=</span> <span class="n">DARK_RED</span>

<span class="n">DEFAULT_RES</span> <span class="o">=</span> <span class="p">(</span><span class="mi">854</span><span class="p">,</span> <span class="mi">480</span><span class="p">)</span>

<span class="n">base_path</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">dirname</span><span class="p">(</span><span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">dirname</span><span class="p">(</span><span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">abspath</span><span class="p">(</span><span class="vm">__file__</span><span class="p">)))</span>
<span class="n">FONT_PATH</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">base_path</span><span class="p">,</span> <span class="s2">&quot;assets&quot;</span><span class="p">,</span> <span class="s2">&quot;font&quot;</span><span class="p">,</span> <span class="s2">&quot;Ticketing.ttf&quot;</span><span class="p">)</span>


<div class="viewcode-block" id="get_window_size">
<a class="viewcode-back" href="../../modules/ui.html#src.UI.get_window_size">[docs]</a>
<span class="k">def</span><span class="w"> </span><span class="nf">get_window_size</span><span class="p">():</span>
    <span class="n">surface</span> <span class="o">=</span> <span class="n">pygame</span><span class="o">.</span><span class="n">display</span><span class="o">.</span><span class="n">get_surface</span><span class="p">()</span>
    <span class="k">if</span> <span class="n">surface</span><span class="p">:</span>
        <span class="k">return</span> <span class="n">surface</span><span class="o">.</span><span class="n">get_size</span><span class="p">()</span>
    <span class="k">return</span> <span class="n">DEFAULT_RES</span></div>



<div class="viewcode-block" id="UIButton">
<a class="viewcode-back" href="../../modules/ui.html#src.UI.UIButton">[docs]</a>
<span class="k">class</span><span class="w"> </span><span class="nc">UIButton</span><span class="p">:</span>
    <span class="k">def</span><span class="w"> </span><span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">rect</span><span class="p">,</span> <span class="n">text</span><span class="p">,</span> <span class="n">font</span><span class="p">,</span> <span class="n">color</span><span class="o">=</span><span class="n">ACCENT_COLOR</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">rect</span> <span class="o">=</span> <span class="n">rect</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">text</span> <span class="o">=</span> <span class="n">text</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">font</span> <span class="o">=</span> <span class="n">font</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">color</span> <span class="o">=</span> <span class="n">color</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">hover</span> <span class="o">=</span> <span class="kc">False</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">active</span> <span class="o">=</span> <span class="kc">True</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">is_selected</span> <span class="o">=</span> <span class="kc">False</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">image</span> <span class="o">=</span> <span class="kc">None</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">shadow_height</span> <span class="o">=</span> <span class="mi">4</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">border_width</span> <span class="o">=</span> <span class="mi">2</span>

    <span class="k">def</span><span class="w"> </span><span class="nf">_draw_basic_button</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">screen</span><span class="p">,</span> <span class="n">base_color</span><span class="p">):</span>
        <span class="n">shadow_rect</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">rect</span><span class="o">.</span><span class="n">copy</span><span class="p">()</span>
        <span class="n">shadow_rect</span><span class="o">.</span><span class="n">y</span> <span class="o">+=</span> <span class="bp">self</span><span class="o">.</span><span class="n">shadow_height</span>
        <span class="n">shadow</span> <span class="o">=</span> <span class="n">pygame</span><span class="o">.</span><span class="n">Surface</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">rect</span><span class="o">.</span><span class="n">size</span><span class="p">,</span> <span class="n">pygame</span><span class="o">.</span><span class="n">SRCALPHA</span><span class="p">)</span>
        <span class="n">pygame</span><span class="o">.</span><span class="n">draw</span><span class="o">.</span><span class="n">rect</span><span class="p">(</span><span class="n">shadow</span><span class="p">,</span> <span class="p">(</span><span class="o">*</span><span class="n">BLACK</span><span class="p">,</span> <span class="mi">128</span><span class="p">),</span> <span class="n">shadow</span><span class="o">.</span><span class="n">get_rect</span><span class="p">(),</span> <span class="n">border_radius</span><span class="o">=</span><span class="mi">8</span><span class="p">)</span>
        <span class="n">screen</span><span class="o">.</span><span class="n">blit</span><span class="p">(</span><span class="n">shadow</span><span class="p">,</span> <span class="n">shadow_rect</span><span class="p">)</span>

        <span class="n">button_surface</span> <span class="o">=</span> <span class="n">pygame</span><span class="o">.</span><span class="n">Surface</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">rect</span><span class="o">.</span><span class="n">size</span><span class="p">,</span> <span class="n">pygame</span><span class="o">.</span><span class="n">SRCALPHA</span><span class="p">)</span>

        <span class="n">gradient</span> <span class="o">=</span> <span class="n">pygame</span><span class="o">.</span><span class="n">Surface</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">rect</span><span class="o">.</span><span class="n">size</span><span class="p">,</span> <span class="n">pygame</span><span class="o">.</span><span class="n">SRCALPHA</span><span class="p">)</span>
        <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">rect</span><span class="o">.</span><span class="n">height</span><span class="p">):</span>
            <span class="n">alpha</span> <span class="o">=</span> <span class="mi">255</span> <span class="o">-</span> <span class="nb">int</span><span class="p">(</span><span class="n">i</span> <span class="o">*</span> <span class="mf">0.5</span><span class="p">)</span>
            <span class="n">pygame</span><span class="o">.</span><span class="n">draw</span><span class="o">.</span><span class="n">line</span><span class="p">(</span>
                <span class="n">gradient</span><span class="p">,</span> <span class="p">(</span><span class="o">*</span><span class="n">base_color</span><span class="p">,</span> <span class="n">alpha</span><span class="p">),</span> <span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="n">i</span><span class="p">),</span> <span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">rect</span><span class="o">.</span><span class="n">width</span><span class="p">,</span> <span class="n">i</span><span class="p">)</span>
            <span class="p">)</span>

        <span class="n">pygame</span><span class="o">.</span><span class="n">draw</span><span class="o">.</span><span class="n">rect</span><span class="p">(</span>
            <span class="n">button_surface</span><span class="p">,</span> <span class="n">base_color</span><span class="p">,</span> <span class="n">button_surface</span><span class="o">.</span><span class="n">get_rect</span><span class="p">(),</span> <span class="n">border_radius</span><span class="o">=</span><span class="mi">8</span>
        <span class="p">)</span>
        <span class="n">button_surface</span><span class="o">.</span><span class="n">blit</span><span class="p">(</span><span class="n">gradient</span><span class="p">,</span> <span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">),</span> <span class="n">special_flags</span><span class="o">=</span><span class="n">pygame</span><span class="o">.</span><span class="n">BLEND_RGBA_MULT</span><span class="p">)</span>

        <span class="n">border_color</span> <span class="o">=</span> <span class="n">GOLD</span> <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">hover</span> <span class="k">else</span> <span class="n">CREAM</span>
        <span class="n">pygame</span><span class="o">.</span><span class="n">draw</span><span class="o">.</span><span class="n">rect</span><span class="p">(</span>
            <span class="n">button_surface</span><span class="p">,</span>
            <span class="n">border_color</span><span class="p">,</span>
            <span class="n">button_surface</span><span class="o">.</span><span class="n">get_rect</span><span class="p">(),</span>
            <span class="n">width</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">border_width</span><span class="p">,</span>
            <span class="n">border_radius</span><span class="o">=</span><span class="mi">8</span><span class="p">,</span>
        <span class="p">)</span>

        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">hover</span><span class="p">:</span>
            <span class="n">highlight</span> <span class="o">=</span> <span class="n">pygame</span><span class="o">.</span><span class="n">Surface</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">rect</span><span class="o">.</span><span class="n">size</span><span class="p">,</span> <span class="n">pygame</span><span class="o">.</span><span class="n">SRCALPHA</span><span class="p">)</span>
            <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">4</span><span class="p">):</span>
                <span class="n">alpha</span> <span class="o">=</span> <span class="mi">100</span> <span class="o">-</span> <span class="n">i</span> <span class="o">*</span> <span class="mi">25</span>
                <span class="n">pygame</span><span class="o">.</span><span class="n">draw</span><span class="o">.</span><span class="n">rect</span><span class="p">(</span>
                    <span class="n">highlight</span><span class="p">,</span>
                    <span class="p">(</span><span class="mi">255</span><span class="p">,</span> <span class="mi">255</span><span class="p">,</span> <span class="mi">255</span><span class="p">,</span> <span class="n">alpha</span><span class="p">),</span>
                    <span class="n">highlight</span><span class="o">.</span><span class="n">get_rect</span><span class="p">()</span><span class="o">.</span><span class="n">inflate</span><span class="p">(</span><span class="o">-</span><span class="n">i</span> <span class="o">*</span> <span class="mi">2</span><span class="p">,</span> <span class="o">-</span><span class="n">i</span> <span class="o">*</span> <span class="mi">2</span><span class="p">),</span>
                    <span class="n">border_radius</span><span class="o">=</span><span class="mi">8</span><span class="p">,</span>
                <span class="p">)</span>
            <span class="n">button_surface</span><span class="o">.</span><span class="n">blit</span><span class="p">(</span><span class="n">highlight</span><span class="p">,</span> <span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">))</span>

        <span class="n">screen</span><span class="o">.</span><span class="n">blit</span><span class="p">(</span><span class="n">button_surface</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">rect</span><span class="p">)</span>

        <span class="n">text_shadow</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">font</span><span class="o">.</span><span class="n">render</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">text</span><span class="p">,</span> <span class="kc">True</span><span class="p">,</span> <span class="n">BLACK</span><span class="p">)</span>
        <span class="n">text_surface</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">font</span><span class="o">.</span><span class="n">render</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">text</span><span class="p">,</span> <span class="kc">True</span><span class="p">,</span> <span class="n">CREAM</span><span class="p">)</span>

        <span class="n">text_rect</span> <span class="o">=</span> <span class="n">text_surface</span><span class="o">.</span><span class="n">get_rect</span><span class="p">(</span><span class="n">center</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">rect</span><span class="o">.</span><span class="n">center</span><span class="p">)</span>
        <span class="n">shadow_rect</span> <span class="o">=</span> <span class="n">text_rect</span><span class="o">.</span><span class="n">copy</span><span class="p">()</span>
        <span class="n">shadow_rect</span><span class="o">.</span><span class="n">x</span> <span class="o">+=</span> <span class="mi">1</span>
        <span class="n">shadow_rect</span><span class="o">.</span><span class="n">y</span> <span class="o">+=</span> <span class="mi">1</span>

        <span class="n">screen</span><span class="o">.</span><span class="n">blit</span><span class="p">(</span><span class="n">text_shadow</span><span class="p">,</span> <span class="n">shadow_rect</span><span class="p">)</span>
        <span class="n">screen</span><span class="o">.</span><span class="n">blit</span><span class="p">(</span><span class="n">text_surface</span><span class="p">,</span> <span class="n">text_rect</span><span class="p">)</span>

<div class="viewcode-block" id="UIButton.draw">
<a class="viewcode-back" href="../../modules/ui.html#src.UI.UIButton.draw">[docs]</a>
    <span class="k">def</span><span class="w"> </span><span class="nf">draw</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">screen</span><span class="p">):</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="bp">self</span><span class="o">.</span><span class="n">active</span><span class="p">:</span>
            <span class="n">base_color</span> <span class="o">=</span> <span class="n">GRAY</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_draw_basic_button</span><span class="p">(</span><span class="n">screen</span><span class="p">,</span> <span class="n">base_color</span><span class="p">)</span>
            <span class="k">return</span>

        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">image</span><span class="p">:</span>
            <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">hover</span> <span class="ow">or</span> <span class="bp">self</span><span class="o">.</span><span class="n">is_selected</span><span class="p">:</span>
                <span class="n">hover_img</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">image</span><span class="o">.</span><span class="n">copy</span><span class="p">()</span>
                <span class="n">hover_img</span><span class="o">.</span><span class="n">fill</span><span class="p">((</span><span class="mi">255</span><span class="p">,</span> <span class="mi">255</span><span class="p">,</span> <span class="mi">255</span><span class="p">,</span> <span class="mi">50</span><span class="p">),</span> <span class="n">special_flags</span><span class="o">=</span><span class="n">pygame</span><span class="o">.</span><span class="n">BLEND_RGBA_ADD</span><span class="p">)</span>
                <span class="n">screen</span><span class="o">.</span><span class="n">blit</span><span class="p">(</span><span class="n">hover_img</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">rect</span><span class="p">)</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="n">screen</span><span class="o">.</span><span class="n">blit</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">image</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">rect</span><span class="p">)</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">base_color</span> <span class="o">=</span> <span class="n">BUTTON_HOVER</span> <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">hover</span> <span class="k">else</span> <span class="bp">self</span><span class="o">.</span><span class="n">color</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_draw_basic_button</span><span class="p">(</span><span class="n">screen</span><span class="p">,</span> <span class="n">base_color</span><span class="p">)</span></div>


<div class="viewcode-block" id="UIButton.check_hover">
<a class="viewcode-back" href="../../modules/ui.html#src.UI.UIButton.check_hover">[docs]</a>
    <span class="k">def</span><span class="w"> </span><span class="nf">check_hover</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">pos</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">is_hovered</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">rect</span><span class="o">.</span><span class="n">collidepoint</span><span class="p">(</span><span class="n">pos</span><span class="p">)</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">is_hovered</span></div>
</div>



<div class="viewcode-block" id="UIInput">
<a class="viewcode-back" href="../../modules/ui.html#src.UI.UIInput">[docs]</a>
<span class="k">class</span><span class="w"> </span><span class="nc">UIInput</span><span class="p">:</span>
    <span class="k">def</span><span class="w"> </span><span class="fm">__init__</span><span class="p">(</span>
        <span class="bp">self</span><span class="p">,</span> <span class="n">rect</span><span class="p">,</span> <span class="n">text</span><span class="p">,</span> <span class="n">font</span><span class="p">,</span> <span class="n">active_color</span><span class="o">=</span><span class="n">ACCENT_COLOR</span><span class="p">,</span> <span class="n">inactive_color</span><span class="o">=</span><span class="n">GRAY</span>
    <span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">rect</span> <span class="o">=</span> <span class="n">rect</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">text</span> <span class="o">=</span> <span class="n">text</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">font</span> <span class="o">=</span> <span class="n">font</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">active_color</span> <span class="o">=</span> <span class="n">active_color</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">inactive_color</span> <span class="o">=</span> <span class="n">inactive_color</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">active</span> <span class="o">=</span> <span class="kc">False</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">placeholder</span> <span class="o">=</span> <span class="s2">&quot;Enter name...&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">is_selected</span> <span class="o">=</span> <span class="kc">False</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">error</span> <span class="o">=</span> <span class="kc">False</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">background_alpha</span> <span class="o">=</span> <span class="mi">200</span>

<div class="viewcode-block" id="UIInput.draw">
<a class="viewcode-back" href="../../modules/ui.html#src.UI.UIInput.draw">[docs]</a>
    <span class="k">def</span><span class="w"> </span><span class="nf">draw</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">screen</span><span class="p">):</span>
        <span class="n">s</span> <span class="o">=</span> <span class="n">pygame</span><span class="o">.</span><span class="n">Surface</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">rect</span><span class="o">.</span><span class="n">size</span><span class="p">)</span>
        <span class="n">s</span><span class="o">.</span><span class="n">set_alpha</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">background_alpha</span><span class="p">)</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">error</span><span class="p">:</span>
            <span class="n">s</span><span class="o">.</span><span class="n">fill</span><span class="p">(</span><span class="n">ERROR_COLOR</span><span class="p">[:</span><span class="mi">3</span><span class="p">])</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">color</span> <span class="o">=</span> <span class="p">(</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">active_color</span>
                <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">active</span> <span class="ow">or</span> <span class="bp">self</span><span class="o">.</span><span class="n">is_selected</span>
                <span class="k">else</span> <span class="bp">self</span><span class="o">.</span><span class="n">inactive_color</span>
            <span class="p">)</span>
            <span class="n">s</span><span class="o">.</span><span class="n">fill</span><span class="p">(</span><span class="n">color</span><span class="p">[:</span><span class="mi">3</span><span class="p">])</span>
        <span class="n">screen</span><span class="o">.</span><span class="n">blit</span><span class="p">(</span><span class="n">s</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">rect</span><span class="p">)</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">text</span><span class="p">:</span>
            <span class="n">color</span> <span class="o">=</span> <span class="n">WHITE</span>
            <span class="n">text</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">text</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">color</span> <span class="o">=</span> <span class="n">LIGHT_GRAY</span>
            <span class="n">text</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">placeholder</span>
        <span class="n">text_surface</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">font</span><span class="o">.</span><span class="n">render</span><span class="p">(</span><span class="n">text</span><span class="p">,</span> <span class="kc">True</span><span class="p">,</span> <span class="n">color</span><span class="p">)</span>
        <span class="n">text_rect</span> <span class="o">=</span> <span class="n">text_surface</span><span class="o">.</span><span class="n">get_rect</span><span class="p">(</span><span class="n">center</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">rect</span><span class="o">.</span><span class="n">center</span><span class="p">)</span>
        <span class="n">screen</span><span class="o">.</span><span class="n">blit</span><span class="p">(</span><span class="n">text_surface</span><span class="p">,</span> <span class="n">text_rect</span><span class="p">)</span>
        <span class="n">border_color</span> <span class="o">=</span> <span class="n">WHITE</span> <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">active</span> <span class="ow">or</span> <span class="bp">self</span><span class="o">.</span><span class="n">is_selected</span> <span class="k">else</span> <span class="n">LIGHT_GRAY</span>
        <span class="n">pygame</span><span class="o">.</span><span class="n">draw</span><span class="o">.</span><span class="n">rect</span><span class="p">(</span><span class="n">screen</span><span class="p">,</span> <span class="n">border_color</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">rect</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="n">border_radius</span><span class="o">=</span><span class="mi">5</span><span class="p">)</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">is_selected</span><span class="p">:</span>
            <span class="n">pygame</span><span class="o">.</span><span class="n">draw</span><span class="o">.</span><span class="n">rect</span><span class="p">(</span><span class="n">screen</span><span class="p">,</span> <span class="n">WHITE</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">rect</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="n">border_radius</span><span class="o">=</span><span class="mi">5</span><span class="p">)</span></div>
</div>



<span class="c1"># base class for all the menu pages</span>
<div class="viewcode-block" id="BasePage">
<a class="viewcode-back" href="../../modules/ui.html#src.UI.BasePage">[docs]</a>
<span class="k">class</span><span class="w"> </span><span class="nc">BasePage</span><span class="p">:</span>
    <span class="k">def</span><span class="w"> </span><span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">instructions</span><span class="o">=</span><span class="kc">None</span><span class="p">):</span>
        <span class="n">window_size</span> <span class="o">=</span> <span class="n">get_window_size</span><span class="p">()</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">screen</span> <span class="o">=</span> <span class="n">pygame</span><span class="o">.</span><span class="n">display</span><span class="o">.</span><span class="n">set_mode</span><span class="p">(</span><span class="n">window_size</span><span class="p">)</span>
        <span class="k">try</span><span class="p">:</span>
            <span class="n">asset_path</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">base_path</span><span class="p">,</span> <span class="s2">&quot;assets/image/Logo.png&quot;</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">logo_image</span> <span class="o">=</span> <span class="n">pygame</span><span class="o">.</span><span class="n">image</span><span class="o">.</span><span class="n">load</span><span class="p">(</span><span class="n">asset_path</span><span class="p">)</span>
            <span class="n">logo_width</span> <span class="o">=</span> <span class="nb">int</span><span class="p">(</span><span class="n">window_size</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">*</span> <span class="mf">0.3</span><span class="p">)</span>
            <span class="n">logo_height</span> <span class="o">=</span> <span class="nb">int</span><span class="p">(</span>
                <span class="n">logo_width</span>
                <span class="o">*</span> <span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">logo_image</span><span class="o">.</span><span class="n">get_height</span><span class="p">()</span> <span class="o">/</span> <span class="bp">self</span><span class="o">.</span><span class="n">logo_image</span><span class="o">.</span><span class="n">get_width</span><span class="p">())</span>
            <span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">logo_image</span> <span class="o">=</span> <span class="n">pygame</span><span class="o">.</span><span class="n">transform</span><span class="o">.</span><span class="n">scale</span><span class="p">(</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">logo_image</span><span class="p">,</span> <span class="p">(</span><span class="n">logo_width</span><span class="p">,</span> <span class="n">logo_height</span><span class="p">)</span>
            <span class="p">)</span>
        <span class="k">except</span> <span class="p">(</span><span class="n">pygame</span><span class="o">.</span><span class="n">error</span><span class="p">,</span> <span class="ne">FileNotFoundError</span><span class="p">):</span>
            <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;Could not load game logo&quot;</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">logo_image</span> <span class="o">=</span> <span class="kc">None</span>

        <span class="k">try</span><span class="p">:</span>
            <span class="n">asset_path</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">base_path</span><span class="p">,</span> <span class="s2">&quot;assets/image/starterbackground.png&quot;</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">background_image</span> <span class="o">=</span> <span class="n">pygame</span><span class="o">.</span><span class="n">image</span><span class="o">.</span><span class="n">load</span><span class="p">(</span><span class="n">asset_path</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">original_background</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">background_image</span><span class="o">.</span><span class="n">copy</span><span class="p">()</span>
        <span class="k">except</span> <span class="p">(</span><span class="n">pygame</span><span class="o">.</span><span class="n">error</span><span class="p">,</span> <span class="ne">FileNotFoundError</span><span class="p">):</span>
            <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;Could not load background image&quot;</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">background_image</span> <span class="o">=</span> <span class="kc">None</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">original_background</span> <span class="o">=</span> <span class="kc">None</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">title_font</span> <span class="o">=</span> <span class="n">font_manager</span><span class="o">.</span><span class="n">get_font</span><span class="p">(</span><span class="mi">82</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">button_font</span> <span class="o">=</span> <span class="n">font_manager</span><span class="o">.</span><span class="n">get_font</span><span class="p">(</span><span class="mi">42</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">version_font</span> <span class="o">=</span> <span class="n">font_manager</span><span class="o">.</span><span class="n">get_font</span><span class="p">(</span><span class="mi">28</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">small_font</span> <span class="o">=</span> <span class="n">font_manager</span><span class="o">.</span><span class="n">get_font</span><span class="p">(</span><span class="mi">24</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">instructions</span> <span class="o">=</span> <span class="n">instructions</span>

<div class="viewcode-block" id="BasePage.draw_background">
<a class="viewcode-back" href="../../modules/ui.html#src.UI.BasePage.draw_background">[docs]</a>
    <span class="k">def</span><span class="w"> </span><span class="nf">draw_background</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="n">window_size</span> <span class="o">=</span> <span class="n">get_window_size</span><span class="p">()</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">original_background</span><span class="p">:</span>
            <span class="n">img_width</span><span class="p">,</span> <span class="n">img_height</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">original_background</span><span class="o">.</span><span class="n">get_size</span><span class="p">()</span>
            <span class="n">window_width</span><span class="p">,</span> <span class="n">window_height</span> <span class="o">=</span> <span class="n">window_size</span>

            <span class="n">img_aspect</span> <span class="o">=</span> <span class="n">img_width</span> <span class="o">/</span> <span class="n">img_height</span>
            <span class="n">window_aspect</span> <span class="o">=</span> <span class="n">window_width</span> <span class="o">/</span> <span class="n">window_height</span>

            <span class="k">if</span> <span class="n">window_aspect</span> <span class="o">&gt;</span> <span class="n">img_aspect</span><span class="p">:</span>
                <span class="n">scaled_width</span> <span class="o">=</span> <span class="n">window_width</span>
                <span class="n">scaled_height</span> <span class="o">=</span> <span class="nb">int</span><span class="p">(</span><span class="n">scaled_width</span> <span class="o">/</span> <span class="n">img_aspect</span><span class="p">)</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="n">scaled_height</span> <span class="o">=</span> <span class="n">window_height</span>
                <span class="n">scaled_width</span> <span class="o">=</span> <span class="nb">int</span><span class="p">(</span><span class="n">scaled_height</span> <span class="o">*</span> <span class="n">img_aspect</span><span class="p">)</span>

            <span class="n">pos_x</span> <span class="o">=</span> <span class="p">(</span><span class="n">window_width</span> <span class="o">-</span> <span class="n">scaled_width</span><span class="p">)</span> <span class="o">//</span> <span class="mi">2</span>
            <span class="n">pos_y</span> <span class="o">=</span> <span class="p">(</span><span class="n">window_height</span> <span class="o">-</span> <span class="n">scaled_height</span><span class="p">)</span> <span class="o">//</span> <span class="mi">2</span>

            <span class="n">scaled_bg</span> <span class="o">=</span> <span class="n">pygame</span><span class="o">.</span><span class="n">transform</span><span class="o">.</span><span class="n">scale</span><span class="p">(</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">original_background</span><span class="p">,</span> <span class="p">(</span><span class="n">scaled_width</span><span class="p">,</span> <span class="n">scaled_height</span><span class="p">)</span>
            <span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">screen</span><span class="o">.</span><span class="n">blit</span><span class="p">(</span><span class="n">scaled_bg</span><span class="p">,</span> <span class="p">(</span><span class="n">pos_x</span><span class="p">,</span> <span class="n">pos_y</span><span class="p">))</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">screen</span><span class="o">.</span><span class="n">fill</span><span class="p">(</span><span class="n">UI_BG</span><span class="p">)</span>
            <span class="n">gradient</span> <span class="o">=</span> <span class="n">pygame</span><span class="o">.</span><span class="n">Surface</span><span class="p">(</span><span class="n">window_size</span><span class="p">,</span> <span class="n">pygame</span><span class="o">.</span><span class="n">SRCALPHA</span><span class="p">)</span>
            <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="n">window_size</span><span class="p">[</span><span class="mi">1</span><span class="p">]):</span>
                <span class="n">alpha</span> <span class="o">=</span> <span class="nb">int</span><span class="p">(</span><span class="mi">255</span> <span class="o">*</span> <span class="p">(</span><span class="mi">1</span> <span class="o">-</span> <span class="n">i</span> <span class="o">/</span> <span class="n">window_size</span><span class="p">[</span><span class="mi">1</span><span class="p">]))</span>
                <span class="n">pygame</span><span class="o">.</span><span class="n">draw</span><span class="o">.</span><span class="n">line</span><span class="p">(</span>
                    <span class="n">gradient</span><span class="p">,</span> <span class="p">(</span><span class="o">*</span><span class="n">ACCENT_COLOR</span><span class="p">[:</span><span class="mi">3</span><span class="p">],</span> <span class="n">alpha</span><span class="p">),</span> <span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="n">i</span><span class="p">),</span> <span class="p">(</span><span class="n">window_size</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span> <span class="n">i</span><span class="p">)</span>
                <span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">screen</span><span class="o">.</span><span class="n">blit</span><span class="p">(</span><span class="n">gradient</span><span class="p">,</span> <span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">))</span></div>


<div class="viewcode-block" id="BasePage.draw_title">
<a class="viewcode-back" href="../../modules/ui.html#src.UI.BasePage.draw_title">[docs]</a>
    <span class="k">def</span><span class="w"> </span><span class="nf">draw_title</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="n">window_size</span> <span class="o">=</span> <span class="n">get_window_size</span><span class="p">()</span>

        <span class="k">if</span> <span class="p">(</span>
            <span class="nb">hasattr</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="s2">&quot;logo_image&quot;</span><span class="p">)</span>
            <span class="ow">and</span> <span class="bp">self</span><span class="o">.</span><span class="n">logo_image</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span>
            <span class="ow">and</span> <span class="p">(</span><span class="nb">isinstance</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">MainMenuPage</span><span class="p">)</span> <span class="ow">or</span> <span class="nb">isinstance</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">HowToPlayPage</span><span class="p">))</span>
        <span class="p">):</span>
            <span class="n">logo_rect</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">logo_image</span><span class="o">.</span><span class="n">get_rect</span><span class="p">(</span><span class="n">centerx</span><span class="o">=</span><span class="n">window_size</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">//</span> <span class="mi">2</span><span class="p">,</span> <span class="n">y</span><span class="o">=</span><span class="mi">80</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">screen</span><span class="o">.</span><span class="n">blit</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">logo_image</span><span class="p">,</span> <span class="n">logo_rect</span><span class="p">)</span>
        <span class="k">elif</span> <span class="nb">isinstance</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">MainMenuPage</span><span class="p">)</span> <span class="ow">or</span> <span class="nb">isinstance</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">HowToPlayPage</span><span class="p">):</span>
            <span class="n">title_shadow</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">title_font</span><span class="o">.</span><span class="n">render</span><span class="p">(</span>
                <span class="s2">&quot;Property Tycoon Beta 04.04.2025&quot;</span><span class="p">,</span> <span class="kc">True</span><span class="p">,</span> <span class="n">BLACK</span>
            <span class="p">)</span>
            <span class="n">title_glow</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">title_font</span><span class="o">.</span><span class="n">render</span><span class="p">(</span>
                <span class="s2">&quot;Property Tycoon Beta 04.04.2025&quot;</span><span class="p">,</span> <span class="kc">True</span><span class="p">,</span> <span class="n">ACCENT_COLOR</span>
            <span class="p">)</span>
            <span class="n">title_text</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">title_font</span><span class="o">.</span><span class="n">render</span><span class="p">(</span>
                <span class="s2">&quot;Property Tycoon Beta 04.04.2025&quot;</span><span class="p">,</span> <span class="kc">True</span><span class="p">,</span> <span class="n">WHITE</span>
            <span class="p">)</span>
            <span class="n">title_rect</span> <span class="o">=</span> <span class="n">title_text</span><span class="o">.</span><span class="n">get_rect</span><span class="p">(</span><span class="n">centerx</span><span class="o">=</span><span class="n">window_size</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">//</span> <span class="mi">2</span><span class="p">,</span> <span class="n">y</span><span class="o">=</span><span class="mi">80</span><span class="p">)</span>
            <span class="n">shadow_rect</span> <span class="o">=</span> <span class="n">title_rect</span><span class="o">.</span><span class="n">copy</span><span class="p">()</span>
            <span class="n">shadow_rect</span><span class="o">.</span><span class="n">x</span> <span class="o">+=</span> <span class="mi">2</span>
            <span class="n">shadow_rect</span><span class="o">.</span><span class="n">y</span> <span class="o">+=</span> <span class="mi">2</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">screen</span><span class="o">.</span><span class="n">blit</span><span class="p">(</span><span class="n">title_shadow</span><span class="p">,</span> <span class="n">shadow_rect</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">screen</span><span class="o">.</span><span class="n">blit</span><span class="p">(</span><span class="n">title_glow</span><span class="p">,</span> <span class="n">title_rect</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">screen</span><span class="o">.</span><span class="n">blit</span><span class="p">(</span><span class="n">title_text</span><span class="p">,</span> <span class="n">title_rect</span><span class="p">)</span></div>


<div class="viewcode-block" id="BasePage.draw_instructions">
<a class="viewcode-back" href="../../modules/ui.html#src.UI.BasePage.draw_instructions">[docs]</a>
    <span class="k">def</span><span class="w"> </span><span class="nf">draw_instructions</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">instructions</span><span class="p">:</span>
            <span class="n">window_size</span> <span class="o">=</span> <span class="n">get_window_size</span><span class="p">()</span>
            <span class="n">font_size</span> <span class="o">=</span> <span class="mi">20</span>
            <span class="n">font</span> <span class="o">=</span> <span class="n">font_manager</span><span class="o">.</span><span class="n">get_font</span><span class="p">(</span><span class="n">font_size</span><span class="p">)</span>
            <span class="n">padding</span> <span class="o">=</span> <span class="mi">10</span>
            <span class="n">line_height</span> <span class="o">=</span> <span class="n">font_size</span> <span class="o">+</span> <span class="mi">2</span>

            <span class="n">total_height</span> <span class="o">=</span> <span class="nb">len</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">instructions</span><span class="p">)</span> <span class="o">*</span> <span class="n">line_height</span>

            <span class="k">for</span> <span class="n">i</span><span class="p">,</span> <span class="n">instruction</span> <span class="ow">in</span> <span class="nb">enumerate</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">instructions</span><span class="p">):</span>
                <span class="n">text_surface</span> <span class="o">=</span> <span class="n">font</span><span class="o">.</span><span class="n">render</span><span class="p">(</span><span class="n">instruction</span><span class="p">,</span> <span class="kc">True</span><span class="p">,</span> <span class="n">WHITE</span><span class="p">)</span>
                <span class="n">y_position</span> <span class="o">=</span> <span class="p">(</span>
                    <span class="n">window_size</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span> <span class="o">-</span> <span class="p">(</span><span class="n">total_height</span> <span class="o">-</span> <span class="p">(</span><span class="n">i</span> <span class="o">*</span> <span class="n">line_height</span><span class="p">))</span> <span class="o">-</span> <span class="n">padding</span>
                <span class="p">)</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">screen</span><span class="o">.</span><span class="n">blit</span><span class="p">(</span><span class="n">text_surface</span><span class="p">,</span> <span class="p">(</span><span class="n">padding</span><span class="p">,</span> <span class="n">y_position</span><span class="p">))</span></div>


<div class="viewcode-block" id="BasePage.draw">
<a class="viewcode-back" href="../../modules/ui.html#src.UI.BasePage.draw">[docs]</a>
    <span class="k">def</span><span class="w"> </span><span class="nf">draw</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">draw_background</span><span class="p">()</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">draw_title</span><span class="p">()</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">draw_instructions</span><span class="p">()</span>
        <span class="n">pygame</span><span class="o">.</span><span class="n">display</span><span class="o">.</span><span class="n">flip</span><span class="p">()</span></div>
</div>



<span class="c1"># the main menu screen</span>
<div class="viewcode-block" id="MainMenuPage">
<a class="viewcode-back" href="../../modules/ui.html#src.UI.MainMenuPage">[docs]</a>
<span class="k">class</span><span class="w"> </span><span class="nc">MainMenuPage</span><span class="p">(</span><span class="n">BasePage</span><span class="p">):</span>
    <span class="k">def</span><span class="w"> </span><span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">instructions</span><span class="o">=</span><span class="kc">None</span><span class="p">):</span>
        <span class="nb">super</span><span class="p">()</span><span class="o">.</span><span class="fm">__init__</span><span class="p">(</span><span class="n">instructions</span><span class="o">=</span><span class="n">instructions</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">small_font</span> <span class="o">=</span> <span class="n">font_manager</span><span class="o">.</span><span class="n">get_font</span><span class="p">(</span><span class="mi">24</span><span class="p">)</span>
        <span class="n">button_width</span> <span class="o">=</span> <span class="mi">300</span>
        <span class="n">button_height</span> <span class="o">=</span> <span class="mi">60</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">start_button</span> <span class="o">=</span> <span class="n">UIButton</span><span class="p">(</span>
            <span class="n">pygame</span><span class="o">.</span><span class="n">Rect</span><span class="p">(</span>
                <span class="p">(</span><span class="n">get_window_size</span><span class="p">()[</span><span class="mi">0</span><span class="p">]</span> <span class="o">-</span> <span class="n">button_width</span><span class="p">)</span> <span class="o">//</span> <span class="mi">2</span><span class="p">,</span>
                <span class="n">get_window_size</span><span class="p">()[</span><span class="mi">1</span><span class="p">]</span> <span class="o">//</span> <span class="mi">2</span><span class="p">,</span>
                <span class="n">button_width</span><span class="p">,</span>
                <span class="n">button_height</span><span class="p">,</span>
            <span class="p">),</span>
            <span class="s2">&quot;Start Game&quot;</span><span class="p">,</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">button_font</span><span class="p">,</span>
        <span class="p">)</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">how_to_play_button</span> <span class="o">=</span> <span class="n">UIButton</span><span class="p">(</span>
            <span class="n">pygame</span><span class="o">.</span><span class="n">Rect</span><span class="p">(</span>
                <span class="p">(</span><span class="n">get_window_size</span><span class="p">()[</span><span class="mi">0</span><span class="p">]</span> <span class="o">-</span> <span class="n">button_width</span><span class="p">)</span> <span class="o">//</span> <span class="mi">2</span><span class="p">,</span>
                <span class="n">get_window_size</span><span class="p">()[</span><span class="mi">1</span><span class="p">]</span> <span class="o">//</span> <span class="mi">2</span> <span class="o">+</span> <span class="mi">80</span><span class="p">,</span>
                <span class="n">button_width</span><span class="p">,</span>
                <span class="n">button_height</span><span class="p">,</span>
            <span class="p">),</span>
            <span class="s2">&quot;How to Play&quot;</span><span class="p">,</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">button_font</span><span class="p">,</span>
            <span class="n">color</span><span class="o">=</span><span class="n">MODE_COLOR</span><span class="p">,</span>
        <span class="p">)</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">settings_button</span> <span class="o">=</span> <span class="n">UIButton</span><span class="p">(</span>
            <span class="n">pygame</span><span class="o">.</span><span class="n">Rect</span><span class="p">(</span>
                <span class="mi">20</span><span class="p">,</span>
                <span class="n">get_window_size</span><span class="p">()[</span><span class="mi">1</span><span class="p">]</span> <span class="o">-</span> <span class="n">button_height</span> <span class="o">-</span> <span class="mi">20</span><span class="p">,</span>
                <span class="n">button_width</span><span class="p">,</span>
                <span class="n">button_height</span><span class="p">,</span>
            <span class="p">),</span>
            <span class="s2">&quot;Settings&quot;</span><span class="p">,</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">button_font</span><span class="p">,</span>
        <span class="p">)</span>

        <span class="k">try</span><span class="p">:</span>
            <span class="n">youtube_path</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">base_path</span><span class="p">,</span> <span class="s2">&quot;assets/image/Youtube Logo.png&quot;</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">youtube_logo</span> <span class="o">=</span> <span class="n">pygame</span><span class="o">.</span><span class="n">image</span><span class="o">.</span><span class="n">load</span><span class="p">(</span><span class="n">youtube_path</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">youtube_logo</span> <span class="o">=</span> <span class="n">pygame</span><span class="o">.</span><span class="n">transform</span><span class="o">.</span><span class="n">scale</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">youtube_logo</span><span class="p">,</span> <span class="p">(</span><span class="mi">40</span><span class="p">,</span> <span class="mi">40</span><span class="p">))</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">youtube_rect</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">youtube_logo</span><span class="o">.</span><span class="n">get_rect</span><span class="p">(</span><span class="n">topleft</span><span class="o">=</span><span class="p">(</span><span class="mi">20</span><span class="p">,</span> <span class="mi">20</span><span class="p">))</span>

            <span class="n">github_path</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">base_path</span><span class="p">,</span> <span class="s2">&quot;assets/image/GitHub-Symbol.png&quot;</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">github_logo</span> <span class="o">=</span> <span class="n">pygame</span><span class="o">.</span><span class="n">image</span><span class="o">.</span><span class="n">load</span><span class="p">(</span><span class="n">github_path</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">github_logo</span> <span class="o">=</span> <span class="n">pygame</span><span class="o">.</span><span class="n">transform</span><span class="o">.</span><span class="n">scale</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">github_logo</span><span class="p">,</span> <span class="p">(</span><span class="mi">40</span><span class="p">,</span> <span class="mi">40</span><span class="p">))</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">github_rect</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">github_logo</span><span class="o">.</span><span class="n">get_rect</span><span class="p">(</span><span class="n">topleft</span><span class="o">=</span><span class="p">(</span><span class="mi">80</span><span class="p">,</span> <span class="mi">20</span><span class="p">))</span>

            <span class="bp">self</span><span class="o">.</span><span class="n">github_hover</span> <span class="o">=</span> <span class="kc">False</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">youtube_hover</span> <span class="o">=</span> <span class="kc">False</span>

            <span class="bp">self</span><span class="o">.</span><span class="n">github_url</span> <span class="o">=</span> <span class="s2">&quot;https://github.com/Minosaji/Software-Engineering-Project&quot;</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">youtube_url</span> <span class="o">=</span> <span class="s2">&quot;https://www.youtube.com/@UOS-G6046-Group5&quot;</span>
        <span class="k">except</span> <span class="p">(</span><span class="n">pygame</span><span class="o">.</span><span class="n">error</span><span class="p">,</span> <span class="ne">FileNotFoundError</span><span class="p">)</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
            <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Could not load social media logos: </span><span class="si">{</span><span class="n">e</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">github_logo</span> <span class="o">=</span> <span class="kc">None</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">youtube_logo</span> <span class="o">=</span> <span class="kc">None</span>

<div class="viewcode-block" id="MainMenuPage.draw">
<a class="viewcode-back" href="../../modules/ui.html#src.UI.MainMenuPage.draw">[docs]</a>
    <span class="k">def</span><span class="w"> </span><span class="nf">draw</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">draw_background</span><span class="p">()</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">draw_title</span><span class="p">()</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">start_button</span><span class="o">.</span><span class="n">draw</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">screen</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">how_to_play_button</span><span class="o">.</span><span class="n">draw</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">screen</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">settings_button</span><span class="o">.</span><span class="n">draw</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">screen</span><span class="p">)</span>

        <span class="k">if</span> <span class="nb">hasattr</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="s2">&quot;youtube_logo&quot;</span><span class="p">)</span> <span class="ow">and</span> <span class="bp">self</span><span class="o">.</span><span class="n">youtube_logo</span><span class="p">:</span>
            <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">youtube_hover</span><span class="p">:</span>
                <span class="n">glow_surface</span> <span class="o">=</span> <span class="n">pygame</span><span class="o">.</span><span class="n">Surface</span><span class="p">(</span>
                    <span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">youtube_rect</span><span class="o">.</span><span class="n">width</span> <span class="o">+</span> <span class="mi">10</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">youtube_rect</span><span class="o">.</span><span class="n">height</span> <span class="o">+</span> <span class="mi">10</span><span class="p">),</span>
                    <span class="n">pygame</span><span class="o">.</span><span class="n">SRCALPHA</span><span class="p">,</span>
                <span class="p">)</span>
                <span class="n">pygame</span><span class="o">.</span><span class="n">draw</span><span class="o">.</span><span class="n">rect</span><span class="p">(</span>
                    <span class="n">glow_surface</span><span class="p">,</span>
                    <span class="p">(</span><span class="o">*</span><span class="n">ACCENT_COLOR</span><span class="p">,</span> <span class="mi">150</span><span class="p">),</span>
                    <span class="n">pygame</span><span class="o">.</span><span class="n">Rect</span><span class="p">(</span>
                        <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="n">glow_surface</span><span class="o">.</span><span class="n">get_width</span><span class="p">(),</span> <span class="n">glow_surface</span><span class="o">.</span><span class="n">get_height</span><span class="p">()</span>
                    <span class="p">),</span>
                    <span class="n">border_radius</span><span class="o">=</span><span class="mi">5</span><span class="p">,</span>
                <span class="p">)</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">screen</span><span class="o">.</span><span class="n">blit</span><span class="p">(</span>
                    <span class="n">glow_surface</span><span class="p">,</span> <span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">youtube_rect</span><span class="o">.</span><span class="n">x</span> <span class="o">-</span> <span class="mi">5</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">youtube_rect</span><span class="o">.</span><span class="n">y</span> <span class="o">-</span> <span class="mi">5</span><span class="p">)</span>
                <span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">screen</span><span class="o">.</span><span class="n">blit</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">youtube_logo</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">youtube_rect</span><span class="p">)</span>

        <span class="k">if</span> <span class="nb">hasattr</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="s2">&quot;github_logo&quot;</span><span class="p">)</span> <span class="ow">and</span> <span class="bp">self</span><span class="o">.</span><span class="n">github_logo</span><span class="p">:</span>
            <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">github_hover</span><span class="p">:</span>
                <span class="n">glow_surface</span> <span class="o">=</span> <span class="n">pygame</span><span class="o">.</span><span class="n">Surface</span><span class="p">(</span>
                    <span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">github_rect</span><span class="o">.</span><span class="n">width</span> <span class="o">+</span> <span class="mi">10</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">github_rect</span><span class="o">.</span><span class="n">height</span> <span class="o">+</span> <span class="mi">10</span><span class="p">),</span>
                    <span class="n">pygame</span><span class="o">.</span><span class="n">SRCALPHA</span><span class="p">,</span>
                <span class="p">)</span>
                <span class="n">pygame</span><span class="o">.</span><span class="n">draw</span><span class="o">.</span><span class="n">rect</span><span class="p">(</span>
                    <span class="n">glow_surface</span><span class="p">,</span>
                    <span class="p">(</span><span class="o">*</span><span class="n">ACCENT_COLOR</span><span class="p">,</span> <span class="mi">150</span><span class="p">),</span>
                    <span class="n">pygame</span><span class="o">.</span><span class="n">Rect</span><span class="p">(</span>
                        <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="n">glow_surface</span><span class="o">.</span><span class="n">get_width</span><span class="p">(),</span> <span class="n">glow_surface</span><span class="o">.</span><span class="n">get_height</span><span class="p">()</span>
                    <span class="p">),</span>
                    <span class="n">border_radius</span><span class="o">=</span><span class="mi">5</span><span class="p">,</span>
                <span class="p">)</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">screen</span><span class="o">.</span><span class="n">blit</span><span class="p">(</span>
                    <span class="n">glow_surface</span><span class="p">,</span> <span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">github_rect</span><span class="o">.</span><span class="n">x</span> <span class="o">-</span> <span class="mi">5</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">github_rect</span><span class="o">.</span><span class="n">y</span> <span class="o">-</span> <span class="mi">5</span><span class="p">)</span>
                <span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">screen</span><span class="o">.</span><span class="n">blit</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">github_logo</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">github_rect</span><span class="p">)</span>

        <span class="n">version_text</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">version_font</span><span class="o">.</span><span class="n">render</span><span class="p">(</span>
            <span class="s2">&quot;Build Version: Alpha 04.04.2025&quot;</span><span class="p">,</span> <span class="kc">True</span><span class="p">,</span> <span class="n">ERROR_COLOR</span>
        <span class="p">)</span>
        <span class="n">version_rect</span> <span class="o">=</span> <span class="n">version_text</span><span class="o">.</span><span class="n">get_rect</span><span class="p">(</span>
            <span class="n">right</span><span class="o">=</span><span class="n">get_window_size</span><span class="p">()[</span><span class="mi">0</span><span class="p">]</span> <span class="o">-</span> <span class="mi">20</span><span class="p">,</span> <span class="n">bottom</span><span class="o">=</span><span class="n">get_window_size</span><span class="p">()[</span><span class="mi">1</span><span class="p">]</span> <span class="o">-</span> <span class="mi">20</span>
        <span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">screen</span><span class="o">.</span><span class="n">blit</span><span class="p">(</span><span class="n">version_text</span><span class="p">,</span> <span class="n">version_rect</span><span class="p">)</span>

        <span class="n">controls_text1</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">small_font</span><span class="o">.</span><span class="n">render</span><span class="p">(</span>
            <span class="s2">&quot;Press ENTER to start&quot;</span><span class="p">,</span> <span class="kc">True</span><span class="p">,</span> <span class="n">LIGHT_GRAY</span>
        <span class="p">)</span>
        <span class="n">controls_text2</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">small_font</span><span class="o">.</span><span class="n">render</span><span class="p">(</span>
            <span class="s2">&quot;H for how to play, S for settings&quot;</span><span class="p">,</span> <span class="kc">True</span><span class="p">,</span> <span class="n">LIGHT_GRAY</span>
        <span class="p">)</span>

        <span class="n">controls_rect1</span> <span class="o">=</span> <span class="n">controls_text1</span><span class="o">.</span><span class="n">get_rect</span><span class="p">(</span>
            <span class="n">right</span><span class="o">=</span><span class="n">get_window_size</span><span class="p">()[</span><span class="mi">0</span><span class="p">]</span> <span class="o">-</span> <span class="mi">20</span><span class="p">,</span> <span class="n">bottom</span><span class="o">=</span><span class="n">get_window_size</span><span class="p">()[</span><span class="mi">1</span><span class="p">]</span> <span class="o">-</span> <span class="mi">70</span>
        <span class="p">)</span>
        <span class="n">controls_rect2</span> <span class="o">=</span> <span class="n">controls_text2</span><span class="o">.</span><span class="n">get_rect</span><span class="p">(</span>
            <span class="n">right</span><span class="o">=</span><span class="n">get_window_size</span><span class="p">()[</span><span class="mi">0</span><span class="p">]</span> <span class="o">-</span> <span class="mi">20</span><span class="p">,</span> <span class="n">bottom</span><span class="o">=</span><span class="n">get_window_size</span><span class="p">()[</span><span class="mi">1</span><span class="p">]</span> <span class="o">-</span> <span class="mi">45</span>
        <span class="p">)</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">screen</span><span class="o">.</span><span class="n">blit</span><span class="p">(</span><span class="n">controls_text1</span><span class="p">,</span> <span class="n">controls_rect1</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">screen</span><span class="o">.</span><span class="n">blit</span><span class="p">(</span><span class="n">controls_text2</span><span class="p">,</span> <span class="n">controls_rect2</span><span class="p">)</span>

        <span class="n">pygame</span><span class="o">.</span><span class="n">display</span><span class="o">.</span><span class="n">flip</span><span class="p">()</span></div>


<div class="viewcode-block" id="MainMenuPage.handle_click">
<a class="viewcode-back" href="../../modules/ui.html#src.UI.MainMenuPage.handle_click">[docs]</a>
    <span class="k">def</span><span class="w"> </span><span class="nf">handle_click</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">pos</span><span class="p">):</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">start_button</span><span class="o">.</span><span class="n">check_hover</span><span class="p">(</span><span class="n">pos</span><span class="p">):</span>
            <span class="k">return</span> <span class="s2">&quot;start&quot;</span>
        <span class="k">elif</span> <span class="bp">self</span><span class="o">.</span><span class="n">how_to_play_button</span><span class="o">.</span><span class="n">check_hover</span><span class="p">(</span><span class="n">pos</span><span class="p">):</span>
            <span class="k">return</span> <span class="s2">&quot;how_to_play&quot;</span>
        <span class="k">elif</span> <span class="bp">self</span><span class="o">.</span><span class="n">settings_button</span><span class="o">.</span><span class="n">check_hover</span><span class="p">(</span><span class="n">pos</span><span class="p">):</span>
            <span class="k">return</span> <span class="s2">&quot;settings&quot;</span>
        <span class="k">elif</span> <span class="nb">hasattr</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="s2">&quot;github_rect&quot;</span><span class="p">)</span> <span class="ow">and</span> <span class="bp">self</span><span class="o">.</span><span class="n">github_rect</span><span class="o">.</span><span class="n">collidepoint</span><span class="p">(</span><span class="n">pos</span><span class="p">):</span>
            <span class="k">try</span><span class="p">:</span>
                <span class="n">webbrowser</span><span class="o">.</span><span class="n">open</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">github_url</span><span class="p">)</span>
                <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Opening GitHub URL: </span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">github_url</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
            <span class="k">except</span> <span class="ne">Exception</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
                <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Error opening GitHub URL: </span><span class="si">{</span><span class="n">e</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
        <span class="k">elif</span> <span class="nb">hasattr</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="s2">&quot;youtube_rect&quot;</span><span class="p">)</span> <span class="ow">and</span> <span class="bp">self</span><span class="o">.</span><span class="n">youtube_rect</span><span class="o">.</span><span class="n">collidepoint</span><span class="p">(</span><span class="n">pos</span><span class="p">):</span>
            <span class="k">try</span><span class="p">:</span>
                <span class="n">webbrowser</span><span class="o">.</span><span class="n">open</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">youtube_url</span><span class="p">)</span>
                <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Opening YouTube URL: </span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">youtube_url</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
            <span class="k">except</span> <span class="ne">Exception</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
                <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Error opening YouTube URL: </span><span class="si">{</span><span class="n">e</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
        <span class="k">return</span> <span class="kc">None</span></div>


<div class="viewcode-block" id="MainMenuPage.handle_motion">
<a class="viewcode-back" href="../../modules/ui.html#src.UI.MainMenuPage.handle_motion">[docs]</a>
    <span class="k">def</span><span class="w"> </span><span class="nf">handle_motion</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">pos</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">start_button</span><span class="o">.</span><span class="n">check_hover</span><span class="p">(</span><span class="n">pos</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">how_to_play_button</span><span class="o">.</span><span class="n">check_hover</span><span class="p">(</span><span class="n">pos</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">settings_button</span><span class="o">.</span><span class="n">check_hover</span><span class="p">(</span><span class="n">pos</span><span class="p">)</span>

        <span class="k">if</span> <span class="nb">hasattr</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="s2">&quot;github_rect&quot;</span><span class="p">):</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">github_hover</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">github_rect</span><span class="o">.</span><span class="n">collidepoint</span><span class="p">(</span><span class="n">pos</span><span class="p">)</span>
        <span class="k">if</span> <span class="nb">hasattr</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="s2">&quot;youtube_rect&quot;</span><span class="p">):</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">youtube_hover</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">youtube_rect</span><span class="o">.</span><span class="n">collidepoint</span><span class="p">(</span><span class="n">pos</span><span class="p">)</span></div>


<div class="viewcode-block" id="MainMenuPage.handle_key">
<a class="viewcode-back" href="../../modules/ui.html#src.UI.MainMenuPage.handle_key">[docs]</a>
    <span class="k">def</span><span class="w"> </span><span class="nf">handle_key</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">event</span><span class="p">):</span>
        <span class="k">if</span> <span class="n">event</span><span class="o">.</span><span class="n">key</span> <span class="o">==</span> <span class="n">pygame</span><span class="o">.</span><span class="n">K_RETURN</span><span class="p">:</span>
            <span class="k">return</span> <span class="s2">&quot;start&quot;</span>
        <span class="k">elif</span> <span class="n">event</span><span class="o">.</span><span class="n">key</span> <span class="o">==</span> <span class="n">pygame</span><span class="o">.</span><span class="n">K_h</span><span class="p">:</span>
            <span class="k">return</span> <span class="s2">&quot;how_to_play&quot;</span>
        <span class="k">elif</span> <span class="n">event</span><span class="o">.</span><span class="n">key</span> <span class="o">==</span> <span class="n">pygame</span><span class="o">.</span><span class="n">K_s</span><span class="p">:</span>
            <span class="k">return</span> <span class="s2">&quot;settings&quot;</span>
        <span class="k">return</span> <span class="kc">None</span></div>
</div>



<span class="c1"># settings page for resolution, font, volume</span>
<div class="viewcode-block" id="SettingsPage">
<a class="viewcode-back" href="../../modules/ui.html#src.UI.SettingsPage">[docs]</a>
<span class="k">class</span><span class="w"> </span><span class="nc">SettingsPage</span><span class="p">(</span><span class="n">BasePage</span><span class="p">):</span>
    <span class="n">CONFIRMATION_DURATION</span> <span class="o">=</span> <span class="mi">5000</span>

    <span class="k">def</span><span class="w"> </span><span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">instructions</span><span class="o">=</span><span class="kc">None</span><span class="p">):</span>
        <span class="nb">super</span><span class="p">()</span><span class="o">.</span><span class="fm">__init__</span><span class="p">(</span><span class="n">instructions</span><span class="o">=</span><span class="n">instructions</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">small_font</span> <span class="o">=</span> <span class="n">font_manager</span><span class="o">.</span><span class="n">get_font</span><span class="p">(</span><span class="mi">24</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">resolution_options</span> <span class="o">=</span> <span class="p">[</span>
            <span class="p">(</span><span class="mi">1280</span><span class="p">,</span> <span class="mi">720</span><span class="p">),</span>
            <span class="p">(</span><span class="mi">854</span><span class="p">,</span> <span class="mi">480</span><span class="p">),</span>
            <span class="p">(</span><span class="mi">1600</span><span class="p">,</span> <span class="mi">900</span><span class="p">),</span>
            <span class="p">(</span><span class="mi">1920</span><span class="p">,</span> <span class="mi">1080</span><span class="p">),</span>
            <span class="p">(</span><span class="mi">2560</span><span class="p">,</span> <span class="mi">1440</span><span class="p">),</span>
        <span class="p">]</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">font_options</span> <span class="o">=</span> <span class="p">[</span>
            <span class="p">(</span><span class="s2">&quot;Ticketing&quot;</span><span class="p">,</span> <span class="s2">&quot;Ticketing.ttf&quot;</span><span class="p">),</span>
            <span class="p">(</span><span class="s2">&quot;Play Regular&quot;</span><span class="p">,</span> <span class="s2">&quot;Play-Regular.ttf&quot;</span><span class="p">),</span>
            <span class="p">(</span><span class="s2">&quot;British Railway=&quot;</span><span class="p">,</span> <span class="s2">&quot;britrdn_.ttf&quot;</span><span class="p">),</span>
            <span class="p">(</span><span class="s2">&quot;Uni of Sussex&quot;</span><span class="p">,</span> <span class="s2">&quot;LibreBaskerville-Bold.ttf&quot;</span><span class="p">),</span>
        <span class="p">]</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">current_resolution</span> <span class="o">=</span> <span class="mi">0</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">current_font</span> <span class="o">=</span> <span class="mi">0</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">show_confirmation</span> <span class="o">=</span> <span class="kc">False</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">confirmation_time</span> <span class="o">=</span> <span class="mi">0</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">sound_manager</span> <span class="o">=</span> <span class="n">sound_manager</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">sound_volume</span> <span class="o">=</span> <span class="nb">int</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">sound_manager</span><span class="o">.</span><span class="n">sound_volume</span> <span class="o">*</span> <span class="mi">100</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">music_volume</span> <span class="o">=</span> <span class="nb">int</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">sound_manager</span><span class="o">.</span><span class="n">music_volume</span> <span class="o">*</span> <span class="mi">100</span><span class="p">)</span>

        <span class="n">button_width</span> <span class="o">=</span> <span class="mi">500</span>
        <span class="n">button_height</span> <span class="o">=</span> <span class="mi">60</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">resolution_button</span> <span class="o">=</span> <span class="n">UIButton</span><span class="p">(</span>
            <span class="n">pygame</span><span class="o">.</span><span class="n">Rect</span><span class="p">(</span>
                <span class="p">(</span><span class="n">get_window_size</span><span class="p">()[</span><span class="mi">0</span><span class="p">]</span> <span class="o">-</span> <span class="n">button_width</span><span class="p">)</span> <span class="o">//</span> <span class="mi">2</span><span class="p">,</span>
                <span class="n">get_window_size</span><span class="p">()[</span><span class="mi">1</span><span class="p">]</span> <span class="o">//</span> <span class="mi">2</span> <span class="o">-</span> <span class="mi">220</span><span class="p">,</span>
                <span class="n">button_width</span><span class="p">,</span>
                <span class="n">button_height</span><span class="p">,</span>
            <span class="p">),</span>
            <span class="p">(</span>
                <span class="sa">f</span><span class="s2">&quot;Screen Size: </span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">resolution_options</span><span class="p">[</span><span class="bp">self</span><span class="o">.</span><span class="n">current_resolution</span><span class="p">][</span><span class="mi">0</span><span class="p">]</span><span class="si">}</span><span class="s2">&quot;</span>
                <span class="sa">f</span><span class="s2">&quot;x</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">resolution_options</span><span class="p">[</span><span class="bp">self</span><span class="o">.</span><span class="n">current_resolution</span><span class="p">][</span><span class="mi">1</span><span class="p">]</span><span class="si">}</span><span class="s2">&quot;</span>
            <span class="p">),</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">button_font</span><span class="p">,</span>
        <span class="p">)</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">font_button</span> <span class="o">=</span> <span class="n">UIButton</span><span class="p">(</span>
            <span class="n">pygame</span><span class="o">.</span><span class="n">Rect</span><span class="p">(</span>
                <span class="p">(</span><span class="n">get_window_size</span><span class="p">()[</span><span class="mi">0</span><span class="p">]</span> <span class="o">-</span> <span class="n">button_width</span><span class="p">)</span> <span class="o">//</span> <span class="mi">2</span><span class="p">,</span>
                <span class="n">get_window_size</span><span class="p">()[</span><span class="mi">1</span><span class="p">]</span> <span class="o">//</span> <span class="mi">2</span> <span class="o">-</span> <span class="mi">150</span><span class="p">,</span>
                <span class="n">button_width</span><span class="p">,</span>
                <span class="n">button_height</span><span class="p">,</span>
            <span class="p">),</span>
            <span class="sa">f</span><span class="s2">&quot;Font: </span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">font_options</span><span class="p">[</span><span class="bp">self</span><span class="o">.</span><span class="n">current_font</span><span class="p">][</span><span class="mi">0</span><span class="p">]</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">,</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">button_font</span><span class="p">,</span>
            <span class="n">color</span><span class="o">=</span><span class="n">MODE_COLOR</span><span class="p">,</span>
        <span class="p">)</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">sound_volume_button</span> <span class="o">=</span> <span class="n">UIButton</span><span class="p">(</span>
            <span class="n">pygame</span><span class="o">.</span><span class="n">Rect</span><span class="p">(</span>
                <span class="p">(</span><span class="n">get_window_size</span><span class="p">()[</span><span class="mi">0</span><span class="p">]</span> <span class="o">-</span> <span class="n">button_width</span><span class="p">)</span> <span class="o">//</span> <span class="mi">2</span><span class="p">,</span>
                <span class="n">get_window_size</span><span class="p">()[</span><span class="mi">1</span><span class="p">]</span> <span class="o">//</span> <span class="mi">2</span> <span class="o">-</span> <span class="mi">80</span><span class="p">,</span>
                <span class="n">button_width</span><span class="p">,</span>
                <span class="n">button_height</span><span class="p">,</span>
            <span class="p">),</span>
            <span class="sa">f</span><span class="s2">&quot;Sound Volume: </span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">sound_volume</span><span class="si">}</span><span class="s2">%&quot;</span><span class="p">,</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">button_font</span><span class="p">,</span>
            <span class="n">color</span><span class="o">=</span><span class="n">MODE_COLOR</span><span class="p">,</span>
        <span class="p">)</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">music_volume_button</span> <span class="o">=</span> <span class="n">UIButton</span><span class="p">(</span>
            <span class="n">pygame</span><span class="o">.</span><span class="n">Rect</span><span class="p">(</span>
                <span class="p">(</span><span class="n">get_window_size</span><span class="p">()[</span><span class="mi">0</span><span class="p">]</span> <span class="o">-</span> <span class="n">button_width</span><span class="p">)</span> <span class="o">//</span> <span class="mi">2</span><span class="p">,</span>
                <span class="n">get_window_size</span><span class="p">()[</span><span class="mi">1</span><span class="p">]</span> <span class="o">//</span> <span class="mi">2</span> <span class="o">-</span> <span class="mi">10</span><span class="p">,</span>
                <span class="n">button_width</span><span class="p">,</span>
                <span class="n">button_height</span><span class="p">,</span>
            <span class="p">),</span>
            <span class="sa">f</span><span class="s2">&quot;Music Volume: </span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">music_volume</span><span class="si">}</span><span class="s2">%&quot;</span><span class="p">,</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">button_font</span><span class="p">,</span>
            <span class="n">color</span><span class="o">=</span><span class="n">MODE_COLOR</span><span class="p">,</span>
        <span class="p">)</span>

        <span class="n">confirm_button_width</span> <span class="o">=</span> <span class="mi">350</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">confirm_button</span> <span class="o">=</span> <span class="n">UIButton</span><span class="p">(</span>
            <span class="n">pygame</span><span class="o">.</span><span class="n">Rect</span><span class="p">(</span>
                <span class="p">(</span><span class="n">get_window_size</span><span class="p">()[</span><span class="mi">0</span><span class="p">]</span> <span class="o">-</span> <span class="n">confirm_button_width</span><span class="p">)</span> <span class="o">//</span> <span class="mi">2</span><span class="p">,</span>
                <span class="n">get_window_size</span><span class="p">()[</span><span class="mi">1</span><span class="p">]</span> <span class="o">//</span> <span class="mi">2</span> <span class="o">+</span> <span class="mi">60</span><span class="p">,</span>
                <span class="n">confirm_button_width</span><span class="p">,</span>
                <span class="n">button_height</span><span class="p">,</span>
            <span class="p">),</span>
            <span class="s2">&quot;Confirm&quot;</span><span class="p">,</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">button_font</span><span class="p">,</span>
        <span class="p">)</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">back_button</span> <span class="o">=</span> <span class="n">UIButton</span><span class="p">(</span>
            <span class="n">pygame</span><span class="o">.</span><span class="n">Rect</span><span class="p">(</span><span class="mi">20</span><span class="p">,</span> <span class="n">get_window_size</span><span class="p">()[</span><span class="mi">1</span><span class="p">]</span> <span class="o">-</span> <span class="mi">80</span><span class="p">,</span> <span class="mi">200</span><span class="p">,</span> <span class="n">button_height</span><span class="p">),</span>
            <span class="s2">&quot;Back&quot;</span><span class="p">,</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">button_font</span><span class="p">,</span>
        <span class="p">)</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">test_sound_button</span> <span class="o">=</span> <span class="n">UIButton</span><span class="p">(</span>
            <span class="n">pygame</span><span class="o">.</span><span class="n">Rect</span><span class="p">(</span>
                <span class="p">(</span><span class="n">get_window_size</span><span class="p">()[</span><span class="mi">0</span><span class="p">]</span> <span class="o">+</span> <span class="n">button_width</span><span class="p">)</span> <span class="o">//</span> <span class="mi">2</span> <span class="o">+</span> <span class="mi">20</span><span class="p">,</span>
                <span class="n">get_window_size</span><span class="p">()[</span><span class="mi">1</span><span class="p">]</span> <span class="o">//</span> <span class="mi">2</span> <span class="o">-</span> <span class="mi">80</span><span class="p">,</span>
                <span class="mi">100</span><span class="p">,</span>
                <span class="n">button_height</span><span class="p">,</span>
            <span class="p">),</span>
            <span class="s2">&quot;Test&quot;</span><span class="p">,</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">button_font</span><span class="p">,</span>
            <span class="n">color</span><span class="o">=</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">150</span><span class="p">,</span> <span class="mi">200</span><span class="p">),</span>
        <span class="p">)</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">test_music_button</span> <span class="o">=</span> <span class="n">UIButton</span><span class="p">(</span>
            <span class="n">pygame</span><span class="o">.</span><span class="n">Rect</span><span class="p">(</span>
                <span class="p">(</span><span class="n">get_window_size</span><span class="p">()[</span><span class="mi">0</span><span class="p">]</span> <span class="o">+</span> <span class="n">button_width</span><span class="p">)</span> <span class="o">//</span> <span class="mi">2</span> <span class="o">+</span> <span class="mi">20</span><span class="p">,</span>
                <span class="n">get_window_size</span><span class="p">()[</span><span class="mi">1</span><span class="p">]</span> <span class="o">//</span> <span class="mi">2</span> <span class="o">-</span> <span class="mi">10</span><span class="p">,</span>
                <span class="mi">100</span><span class="p">,</span>
                <span class="n">button_height</span><span class="p">,</span>
            <span class="p">),</span>
            <span class="s2">&quot;Test&quot;</span><span class="p">,</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">button_font</span><span class="p">,</span>
            <span class="n">color</span><span class="o">=</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">150</span><span class="p">,</span> <span class="mi">200</span><span class="p">),</span>
        <span class="p">)</span>

<div class="viewcode-block" id="SettingsPage.draw">
<a class="viewcode-back" href="../../modules/ui.html#src.UI.SettingsPage.draw">[docs]</a>
    <span class="k">def</span><span class="w"> </span><span class="nf">draw</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">draw_background</span><span class="p">()</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">draw_title</span><span class="p">()</span>

        <span class="n">settings_text</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">button_font</span><span class="o">.</span><span class="n">render</span><span class="p">(</span><span class="s2">&quot;Game Settings&quot;</span><span class="p">,</span> <span class="kc">True</span><span class="p">,</span> <span class="n">WHITE</span><span class="p">)</span>
        <span class="n">settings_rect</span> <span class="o">=</span> <span class="n">settings_text</span><span class="o">.</span><span class="n">get_rect</span><span class="p">(</span><span class="n">centerx</span><span class="o">=</span><span class="n">get_window_size</span><span class="p">()[</span><span class="mi">0</span><span class="p">]</span> <span class="o">//</span> <span class="mi">2</span><span class="p">,</span> <span class="n">y</span><span class="o">=</span><span class="mi">100</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">screen</span><span class="o">.</span><span class="n">blit</span><span class="p">(</span><span class="n">settings_text</span><span class="p">,</span> <span class="n">settings_rect</span><span class="p">)</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">resolution_button</span><span class="o">.</span><span class="n">text</span> <span class="o">=</span> <span class="p">(</span>
            <span class="sa">f</span><span class="s2">&quot;Screen Size: </span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">resolution_options</span><span class="p">[</span><span class="bp">self</span><span class="o">.</span><span class="n">current_resolution</span><span class="p">][</span><span class="mi">0</span><span class="p">]</span><span class="si">}</span><span class="s2">&quot;</span>
            <span class="sa">f</span><span class="s2">&quot;x</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">resolution_options</span><span class="p">[</span><span class="bp">self</span><span class="o">.</span><span class="n">current_resolution</span><span class="p">][</span><span class="mi">1</span><span class="p">]</span><span class="si">}</span><span class="s2">&quot;</span>
        <span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">resolution_button</span><span class="o">.</span><span class="n">draw</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">screen</span><span class="p">)</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">font_button</span><span class="o">.</span><span class="n">text</span> <span class="o">=</span> <span class="sa">f</span><span class="s2">&quot;Font: </span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">font_options</span><span class="p">[</span><span class="bp">self</span><span class="o">.</span><span class="n">current_font</span><span class="p">][</span><span class="mi">0</span><span class="p">]</span><span class="si">}</span><span class="s2">&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">font_button</span><span class="o">.</span><span class="n">draw</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">screen</span><span class="p">)</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">sound_volume_button</span><span class="o">.</span><span class="n">text</span> <span class="o">=</span> <span class="sa">f</span><span class="s2">&quot;Sound Volume: </span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">sound_volume</span><span class="si">}</span><span class="s2">%&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">sound_volume_button</span><span class="o">.</span><span class="n">draw</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">screen</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">test_sound_button</span><span class="o">.</span><span class="n">draw</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">screen</span><span class="p">)</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">music_volume_button</span><span class="o">.</span><span class="n">text</span> <span class="o">=</span> <span class="sa">f</span><span class="s2">&quot;Music Volume: </span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">music_volume</span><span class="si">}</span><span class="s2">%&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">music_volume_button</span><span class="o">.</span><span class="n">draw</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">screen</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">test_music_button</span><span class="o">.</span><span class="n">draw</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">screen</span><span class="p">)</span>

        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">show_confirmation</span><span class="p">:</span>
            <span class="n">current_time</span> <span class="o">=</span> <span class="n">pygame</span><span class="o">.</span><span class="n">time</span><span class="o">.</span><span class="n">get_ticks</span><span class="p">()</span>
            <span class="k">if</span> <span class="n">current_time</span> <span class="o">-</span> <span class="bp">self</span><span class="o">.</span><span class="n">confirmation_time</span> <span class="o">&lt;</span> <span class="bp">self</span><span class="o">.</span><span class="n">CONFIRMATION_DURATION</span><span class="p">:</span>
                <span class="n">confirm_text</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">small_font</span><span class="o">.</span><span class="n">render</span><span class="p">(</span>
                    <span class="s2">&quot;Press ENTER or click Confirm to apply changes&quot;</span><span class="p">,</span> <span class="kc">True</span><span class="p">,</span> <span class="n">SUCCESS_COLOR</span>
                <span class="p">)</span>
                <span class="n">confirm_rect</span> <span class="o">=</span> <span class="n">confirm_text</span><span class="o">.</span><span class="n">get_rect</span><span class="p">(</span>
                    <span class="n">centerx</span><span class="o">=</span><span class="n">get_window_size</span><span class="p">()[</span><span class="mi">0</span><span class="p">]</span> <span class="o">//</span> <span class="mi">2</span><span class="p">,</span>
                    <span class="n">top</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">confirm_button</span><span class="o">.</span><span class="n">rect</span><span class="o">.</span><span class="n">bottom</span> <span class="o">+</span> <span class="mi">10</span><span class="p">,</span>
                <span class="p">)</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">screen</span><span class="o">.</span><span class="n">blit</span><span class="p">(</span><span class="n">confirm_text</span><span class="p">,</span> <span class="n">confirm_rect</span><span class="p">)</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">show_confirmation</span> <span class="o">=</span> <span class="kc">False</span>

        <span class="n">info_text</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">small_font</span><span class="o">.</span><span class="n">render</span><span class="p">(</span>
            <span class="s2">&quot;All resolutions maintain 16:9 aspect ratio&quot;</span><span class="p">,</span> <span class="kc">True</span><span class="p">,</span> <span class="n">LIGHT_GRAY</span>
        <span class="p">)</span>
        <span class="n">info_rect</span> <span class="o">=</span> <span class="n">info_text</span><span class="o">.</span><span class="n">get_rect</span><span class="p">(</span>
            <span class="n">centerx</span><span class="o">=</span><span class="n">get_window_size</span><span class="p">()[</span><span class="mi">0</span><span class="p">]</span> <span class="o">//</span> <span class="mi">2</span><span class="p">,</span>
            <span class="n">top</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">confirm_button</span><span class="o">.</span><span class="n">rect</span><span class="o">.</span><span class="n">bottom</span>
            <span class="o">+</span> <span class="p">(</span><span class="mi">40</span> <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">show_confirmation</span> <span class="k">else</span> <span class="mi">10</span><span class="p">),</span>
        <span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">screen</span><span class="o">.</span><span class="n">blit</span><span class="p">(</span><span class="n">info_text</span><span class="p">,</span> <span class="n">info_rect</span><span class="p">)</span>

        <span class="n">controls</span> <span class="o">=</span> <span class="p">[</span>
            <span class="s2">&quot;Controls:&quot;</span><span class="p">,</span>
            <span class="s2">&quot;R - Change screen resolution&quot;</span><span class="p">,</span>
            <span class="s2">&quot;F - Change font&quot;</span><span class="p">,</span>
            <span class="s2">&quot;S - Adjust sound volume&quot;</span><span class="p">,</span>
            <span class="s2">&quot;M - Adjust music volume&quot;</span><span class="p">,</span>
            <span class="s2">&quot;Enter/Space - Apply and return&quot;</span><span class="p">,</span>
        <span class="p">]</span>

        <span class="n">y_offset</span> <span class="o">=</span> <span class="n">get_window_size</span><span class="p">()[</span><span class="mi">1</span><span class="p">]</span> <span class="o">-</span> <span class="mi">180</span>
        <span class="k">for</span> <span class="n">hint</span> <span class="ow">in</span> <span class="n">controls</span><span class="p">:</span>
            <span class="n">hint_text</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">small_font</span><span class="o">.</span><span class="n">render</span><span class="p">(</span><span class="n">hint</span><span class="p">,</span> <span class="kc">True</span><span class="p">,</span> <span class="n">LIGHT_GRAY</span><span class="p">)</span>
            <span class="n">hint_rect</span> <span class="o">=</span> <span class="n">hint_text</span><span class="o">.</span><span class="n">get_rect</span><span class="p">(</span><span class="n">right</span><span class="o">=</span><span class="n">get_window_size</span><span class="p">()[</span><span class="mi">0</span><span class="p">]</span> <span class="o">-</span> <span class="mi">20</span><span class="p">,</span> <span class="n">y</span><span class="o">=</span><span class="n">y_offset</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">screen</span><span class="o">.</span><span class="n">blit</span><span class="p">(</span><span class="n">hint_text</span><span class="p">,</span> <span class="n">hint_rect</span><span class="p">)</span>
            <span class="n">y_offset</span> <span class="o">+=</span> <span class="mi">25</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">confirm_button</span><span class="o">.</span><span class="n">draw</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">screen</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">back_button</span><span class="o">.</span><span class="n">draw</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">screen</span><span class="p">)</span>

        <span class="n">pygame</span><span class="o">.</span><span class="n">display</span><span class="o">.</span><span class="n">flip</span><span class="p">()</span></div>


<div class="viewcode-block" id="SettingsPage.handle_click">
<a class="viewcode-back" href="../../modules/ui.html#src.UI.SettingsPage.handle_click">[docs]</a>
    <span class="k">def</span><span class="w"> </span><span class="nf">handle_click</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">pos</span><span class="p">):</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">resolution_button</span><span class="o">.</span><span class="n">check_hover</span><span class="p">(</span><span class="n">pos</span><span class="p">):</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">current_resolution</span> <span class="o">=</span> <span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">current_resolution</span> <span class="o">+</span> <span class="mi">1</span><span class="p">)</span> <span class="o">%</span> <span class="nb">len</span><span class="p">(</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">resolution_options</span>
            <span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">show_confirmation</span> <span class="o">=</span> <span class="kc">True</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">confirmation_time</span> <span class="o">=</span> <span class="n">pygame</span><span class="o">.</span><span class="n">time</span><span class="o">.</span><span class="n">get_ticks</span><span class="p">()</span>
            <span class="k">return</span> <span class="kc">False</span>
        <span class="k">elif</span> <span class="bp">self</span><span class="o">.</span><span class="n">font_button</span><span class="o">.</span><span class="n">check_hover</span><span class="p">(</span><span class="n">pos</span><span class="p">):</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">current_font</span> <span class="o">=</span> <span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">current_font</span> <span class="o">+</span> <span class="mi">1</span><span class="p">)</span> <span class="o">%</span> <span class="nb">len</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">font_options</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">show_confirmation</span> <span class="o">=</span> <span class="kc">True</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">confirmation_time</span> <span class="o">=</span> <span class="n">pygame</span><span class="o">.</span><span class="n">time</span><span class="o">.</span><span class="n">get_ticks</span><span class="p">()</span>
            <span class="k">return</span> <span class="kc">False</span>
        <span class="k">elif</span> <span class="bp">self</span><span class="o">.</span><span class="n">sound_volume_button</span><span class="o">.</span><span class="n">check_hover</span><span class="p">(</span><span class="n">pos</span><span class="p">):</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">sound_volume</span> <span class="o">=</span> <span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">sound_volume</span> <span class="o">+</span> <span class="mi">10</span><span class="p">)</span> <span class="o">%</span> <span class="mi">110</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">sound_manager</span><span class="o">.</span><span class="n">set_sound_volume</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">sound_volume</span> <span class="o">/</span> <span class="mf">100.0</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">show_confirmation</span> <span class="o">=</span> <span class="kc">True</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">confirmation_time</span> <span class="o">=</span> <span class="n">pygame</span><span class="o">.</span><span class="n">time</span><span class="o">.</span><span class="n">get_ticks</span><span class="p">()</span>
            <span class="k">return</span> <span class="kc">False</span>
        <span class="k">elif</span> <span class="bp">self</span><span class="o">.</span><span class="n">music_volume_button</span><span class="o">.</span><span class="n">check_hover</span><span class="p">(</span><span class="n">pos</span><span class="p">):</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">music_volume</span> <span class="o">=</span> <span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">music_volume</span> <span class="o">+</span> <span class="mi">10</span><span class="p">)</span> <span class="o">%</span> <span class="mi">110</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">sound_manager</span><span class="o">.</span><span class="n">set_music_volume</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">music_volume</span> <span class="o">/</span> <span class="mf">100.0</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">show_confirmation</span> <span class="o">=</span> <span class="kc">True</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">confirmation_time</span> <span class="o">=</span> <span class="n">pygame</span><span class="o">.</span><span class="n">time</span><span class="o">.</span><span class="n">get_ticks</span><span class="p">()</span>
            <span class="k">return</span> <span class="kc">False</span>
        <span class="k">elif</span> <span class="bp">self</span><span class="o">.</span><span class="n">test_sound_button</span><span class="o">.</span><span class="n">check_hover</span><span class="p">(</span><span class="n">pos</span><span class="p">):</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">sound_manager</span><span class="o">.</span><span class="n">play_sound</span><span class="p">(</span><span class="s2">&quot;menu_click&quot;</span><span class="p">)</span>
            <span class="k">return</span> <span class="kc">False</span>
        <span class="k">elif</span> <span class="bp">self</span><span class="o">.</span><span class="n">test_music_button</span><span class="o">.</span><span class="n">check_hover</span><span class="p">(</span><span class="n">pos</span><span class="p">):</span>
            <span class="k">if</span> <span class="ow">not</span> <span class="n">pygame</span><span class="o">.</span><span class="n">mixer</span><span class="o">.</span><span class="n">music</span><span class="o">.</span><span class="n">get_busy</span><span class="p">():</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">sound_manager</span><span class="o">.</span><span class="n">load_music</span><span class="p">()</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">sound_manager</span><span class="o">.</span><span class="n">play_music</span><span class="p">(</span><span class="n">loop</span><span class="o">=</span><span class="mi">0</span><span class="p">)</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">sound_manager</span><span class="o">.</span><span class="n">stop_music</span><span class="p">()</span>
            <span class="k">return</span> <span class="kc">False</span>
        <span class="k">elif</span> <span class="bp">self</span><span class="o">.</span><span class="n">confirm_button</span><span class="o">.</span><span class="n">check_hover</span><span class="p">(</span><span class="n">pos</span><span class="p">):</span>
            <span class="n">current_resolution</span> <span class="o">=</span> <span class="n">get_window_size</span><span class="p">()</span>
            <span class="n">new_resolution</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">resolution_options</span><span class="p">[</span><span class="bp">self</span><span class="o">.</span><span class="n">current_resolution</span><span class="p">]</span>
            <span class="k">global</span> <span class="n">FONT_PATH</span>
            <span class="n">new_font_path</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">join</span><span class="p">(</span>
                <span class="n">base_path</span><span class="p">,</span> <span class="s2">&quot;assets&quot;</span><span class="p">,</span> <span class="s2">&quot;font&quot;</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">font_options</span><span class="p">[</span><span class="bp">self</span><span class="o">.</span><span class="n">current_font</span><span class="p">][</span><span class="mi">1</span><span class="p">]</span>
            <span class="p">)</span>
            <span class="k">if</span> <span class="n">current_resolution</span> <span class="o">!=</span> <span class="n">new_resolution</span> <span class="ow">or</span> <span class="n">FONT_PATH</span> <span class="o">!=</span> <span class="n">new_font_path</span><span class="p">:</span>
                <span class="n">FONT_PATH</span> <span class="o">=</span> <span class="n">new_font_path</span>
                <span class="n">font_manager</span><span class="o">.</span><span class="n">update_font_path</span><span class="p">(</span><span class="n">new_font_path</span><span class="p">)</span>
                <span class="k">return</span> <span class="kc">True</span>
        <span class="k">elif</span> <span class="bp">self</span><span class="o">.</span><span class="n">back_button</span><span class="o">.</span><span class="n">check_hover</span><span class="p">(</span><span class="n">pos</span><span class="p">):</span>
            <span class="k">return</span> <span class="s2">&quot;back&quot;</span>
        <span class="k">return</span> <span class="kc">False</span></div>


<div class="viewcode-block" id="SettingsPage.handle_motion">
<a class="viewcode-back" href="../../modules/ui.html#src.UI.SettingsPage.handle_motion">[docs]</a>
    <span class="k">def</span><span class="w"> </span><span class="nf">handle_motion</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">pos</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">resolution_button</span><span class="o">.</span><span class="n">check_hover</span><span class="p">(</span><span class="n">pos</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">font_button</span><span class="o">.</span><span class="n">check_hover</span><span class="p">(</span><span class="n">pos</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">sound_volume_button</span><span class="o">.</span><span class="n">check_hover</span><span class="p">(</span><span class="n">pos</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">music_volume_button</span><span class="o">.</span><span class="n">check_hover</span><span class="p">(</span><span class="n">pos</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">test_sound_button</span><span class="o">.</span><span class="n">check_hover</span><span class="p">(</span><span class="n">pos</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">test_music_button</span><span class="o">.</span><span class="n">check_hover</span><span class="p">(</span><span class="n">pos</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">confirm_button</span><span class="o">.</span><span class="n">check_hover</span><span class="p">(</span><span class="n">pos</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">back_button</span><span class="o">.</span><span class="n">check_hover</span><span class="p">(</span><span class="n">pos</span><span class="p">)</span></div>


<div class="viewcode-block" id="SettingsPage.handle_key">
<a class="viewcode-back" href="../../modules/ui.html#src.UI.SettingsPage.handle_key">[docs]</a>
    <span class="k">def</span><span class="w"> </span><span class="nf">handle_key</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">event</span><span class="p">):</span>
        <span class="k">if</span> <span class="n">event</span><span class="o">.</span><span class="n">key</span> <span class="o">==</span> <span class="n">pygame</span><span class="o">.</span><span class="n">K_r</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">current_resolution</span> <span class="o">=</span> <span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">current_resolution</span> <span class="o">+</span> <span class="mi">1</span><span class="p">)</span> <span class="o">%</span> <span class="nb">len</span><span class="p">(</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">resolution_options</span>
            <span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">show_confirmation</span> <span class="o">=</span> <span class="kc">True</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">confirmation_time</span> <span class="o">=</span> <span class="n">pygame</span><span class="o">.</span><span class="n">time</span><span class="o">.</span><span class="n">get_ticks</span><span class="p">()</span>
            <span class="k">return</span> <span class="kc">False</span>
        <span class="k">elif</span> <span class="n">event</span><span class="o">.</span><span class="n">key</span> <span class="o">==</span> <span class="n">pygame</span><span class="o">.</span><span class="n">K_f</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">current_font</span> <span class="o">=</span> <span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">current_font</span> <span class="o">+</span> <span class="mi">1</span><span class="p">)</span> <span class="o">%</span> <span class="nb">len</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">font_options</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">show_confirmation</span> <span class="o">=</span> <span class="kc">True</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">confirmation_time</span> <span class="o">=</span> <span class="n">pygame</span><span class="o">.</span><span class="n">time</span><span class="o">.</span><span class="n">get_ticks</span><span class="p">()</span>
            <span class="k">return</span> <span class="kc">False</span>
        <span class="k">elif</span> <span class="n">event</span><span class="o">.</span><span class="n">key</span> <span class="o">==</span> <span class="n">pygame</span><span class="o">.</span><span class="n">K_s</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">sound_volume</span> <span class="o">=</span> <span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">sound_volume</span> <span class="o">+</span> <span class="mi">10</span><span class="p">)</span> <span class="o">%</span> <span class="mi">110</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">sound_manager</span><span class="o">.</span><span class="n">set_sound_volume</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">sound_volume</span> <span class="o">/</span> <span class="mf">100.0</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">show_confirmation</span> <span class="o">=</span> <span class="kc">True</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">confirmation_time</span> <span class="o">=</span> <span class="n">pygame</span><span class="o">.</span><span class="n">time</span><span class="o">.</span><span class="n">get_ticks</span><span class="p">()</span>
            <span class="k">return</span> <span class="kc">False</span>
        <span class="k">elif</span> <span class="n">event</span><span class="o">.</span><span class="n">key</span> <span class="o">==</span> <span class="n">pygame</span><span class="o">.</span><span class="n">K_m</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">music_volume</span> <span class="o">=</span> <span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">music_volume</span> <span class="o">+</span> <span class="mi">10</span><span class="p">)</span> <span class="o">%</span> <span class="mi">110</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">sound_manager</span><span class="o">.</span><span class="n">set_music_volume</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">music_volume</span> <span class="o">/</span> <span class="mf">100.0</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">show_confirmation</span> <span class="o">=</span> <span class="kc">True</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">confirmation_time</span> <span class="o">=</span> <span class="n">pygame</span><span class="o">.</span><span class="n">time</span><span class="o">.</span><span class="n">get_ticks</span><span class="p">()</span>
            <span class="k">return</span> <span class="kc">False</span>
        <span class="k">elif</span> <span class="n">event</span><span class="o">.</span><span class="n">key</span> <span class="ow">in</span> <span class="p">[</span><span class="n">pygame</span><span class="o">.</span><span class="n">K_RETURN</span><span class="p">,</span> <span class="n">pygame</span><span class="o">.</span><span class="n">K_SPACE</span><span class="p">]:</span>
            <span class="n">current_resolution</span> <span class="o">=</span> <span class="n">get_window_size</span><span class="p">()</span>
            <span class="n">new_resolution</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">resolution_options</span><span class="p">[</span><span class="bp">self</span><span class="o">.</span><span class="n">current_resolution</span><span class="p">]</span>
            <span class="k">global</span> <span class="n">FONT_PATH</span>
            <span class="n">new_font_path</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">join</span><span class="p">(</span>
                <span class="n">base_path</span><span class="p">,</span> <span class="s2">&quot;assets&quot;</span><span class="p">,</span> <span class="s2">&quot;font&quot;</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">font_options</span><span class="p">[</span><span class="bp">self</span><span class="o">.</span><span class="n">current_font</span><span class="p">][</span><span class="mi">1</span><span class="p">]</span>
            <span class="p">)</span>
            <span class="k">if</span> <span class="n">current_resolution</span> <span class="o">!=</span> <span class="n">new_resolution</span> <span class="ow">or</span> <span class="n">FONT_PATH</span> <span class="o">!=</span> <span class="n">new_font_path</span><span class="p">:</span>
                <span class="n">FONT_PATH</span> <span class="o">=</span> <span class="n">new_font_path</span>
                <span class="n">font_manager</span><span class="o">.</span><span class="n">update_font_path</span><span class="p">(</span><span class="n">new_font_path</span><span class="p">)</span>
                <span class="k">return</span> <span class="kc">True</span>
        <span class="k">elif</span> <span class="n">event</span><span class="o">.</span><span class="n">key</span> <span class="o">==</span> <span class="n">pygame</span><span class="o">.</span><span class="n">K_ESCAPE</span><span class="p">:</span>
            <span class="k">return</span> <span class="s2">&quot;back&quot;</span>
        <span class="k">return</span> <span class="kc">False</span></div>


<div class="viewcode-block" id="SettingsPage.get_settings">
<a class="viewcode-back" href="../../modules/ui.html#src.UI.SettingsPage.get_settings">[docs]</a>
    <span class="k">def</span><span class="w"> </span><span class="nf">get_settings</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">return</span> <span class="p">{</span>
            <span class="s2">&quot;resolution&quot;</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">resolution_options</span><span class="p">[</span><span class="bp">self</span><span class="o">.</span><span class="n">current_resolution</span><span class="p">],</span>
            <span class="s2">&quot;font&quot;</span><span class="p">:</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">join</span><span class="p">(</span>
                <span class="n">base_path</span><span class="p">,</span> <span class="s2">&quot;assets&quot;</span><span class="p">,</span> <span class="s2">&quot;font&quot;</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">font_options</span><span class="p">[</span><span class="bp">self</span><span class="o">.</span><span class="n">current_font</span><span class="p">][</span><span class="mi">1</span><span class="p">]</span>
            <span class="p">),</span>
            <span class="s2">&quot;sound_volume&quot;</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">sound_volume</span> <span class="o">/</span> <span class="mf">100.0</span><span class="p">,</span>
            <span class="s2">&quot;music_volume&quot;</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">music_volume</span> <span class="o">/</span> <span class="mf">100.0</span><span class="p">,</span>
        <span class="p">}</span></div>
</div>



<span class="c1"># page for setting up players (human/ai) and names</span>
<div class="viewcode-block" id="StartPage">
<a class="viewcode-back" href="../../modules/ui.html#src.UI.StartPage">[docs]</a>
<span class="k">class</span><span class="w"> </span><span class="nc">StartPage</span><span class="p">(</span><span class="n">BasePage</span><span class="p">):</span>
    <span class="k">def</span><span class="w"> </span><span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">instructions</span><span class="o">=</span><span class="kc">None</span><span class="p">):</span>
        <span class="nb">super</span><span class="p">()</span><span class="o">.</span><span class="fm">__init__</span><span class="p">(</span><span class="n">instructions</span><span class="o">=</span><span class="n">instructions</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">screen</span> <span class="o">=</span> <span class="n">pygame</span><span class="o">.</span><span class="n">display</span><span class="o">.</span><span class="n">set_mode</span><span class="p">(</span><span class="n">get_window_size</span><span class="p">())</span>
        <span class="n">pygame</span><span class="o">.</span><span class="n">display</span><span class="o">.</span><span class="n">set_caption</span><span class="p">(</span><span class="s2">&quot;Property Tycoon Beta 04.04.2025&quot;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">title_font</span> <span class="o">=</span> <span class="n">font_manager</span><span class="o">.</span><span class="n">get_font</span><span class="p">(</span><span class="mi">82</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">button_font</span> <span class="o">=</span> <span class="n">font_manager</span><span class="o">.</span><span class="n">get_font</span><span class="p">(</span><span class="mi">42</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">version_font</span> <span class="o">=</span> <span class="n">font_manager</span><span class="o">.</span><span class="n">get_font</span><span class="p">(</span><span class="mi">28</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">input_font</span> <span class="o">=</span> <span class="n">font_manager</span><span class="o">.</span><span class="n">get_font</span><span class="p">(</span><span class="mi">36</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">small_font</span> <span class="o">=</span> <span class="n">font_manager</span><span class="o">.</span><span class="n">get_font</span><span class="p">(</span><span class="mi">24</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">selected_element</span> <span class="o">=</span> <span class="mi">0</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">active_input</span> <span class="o">=</span> <span class="o">-</span><span class="mi">1</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">human_count</span> <span class="o">=</span> <span class="mi">1</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">ai_count</span> <span class="o">=</span> <span class="mi">1</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">total_players</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">human_count</span> <span class="o">+</span> <span class="bp">self</span><span class="o">.</span><span class="n">ai_count</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">player_names</span> <span class="o">=</span> <span class="p">[</span><span class="s2">&quot;Human Player 1&quot;</span><span class="p">]</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">ai_names</span> <span class="o">=</span> <span class="p">[</span><span class="s2">&quot;Bot 1&quot;</span><span class="p">]</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">ai_name_counter</span> <span class="o">=</span> <span class="mi">1</span>

        <span class="c1"># load player token images</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">token_images</span> <span class="o">=</span> <span class="p">[]</span>
        <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="mi">7</span><span class="p">):</span>
            <span class="k">try</span><span class="p">:</span>
                <span class="n">image_path</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">join</span><span class="p">(</span>
                    <span class="n">base_path</span><span class="p">,</span> <span class="s2">&quot;assets&quot;</span><span class="p">,</span> <span class="s2">&quot;image&quot;</span><span class="p">,</span> <span class="sa">f</span><span class="s2">&quot;Playertoken (</span><span class="si">{</span><span class="n">i</span><span class="si">}</span><span class="s2">).png&quot;</span>
                <span class="p">)</span>
                <span class="k">if</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">exists</span><span class="p">(</span><span class="n">image_path</span><span class="p">):</span>
                    <span class="n">token_image</span> <span class="o">=</span> <span class="n">pygame</span><span class="o">.</span><span class="n">image</span><span class="o">.</span><span class="n">load</span><span class="p">(</span><span class="n">image_path</span><span class="p">)</span>
                    <span class="n">token_image</span> <span class="o">=</span> <span class="n">pygame</span><span class="o">.</span><span class="n">transform</span><span class="o">.</span><span class="n">scale</span><span class="p">(</span><span class="n">token_image</span><span class="p">,</span> <span class="p">(</span><span class="mi">40</span><span class="p">,</span> <span class="mi">40</span><span class="p">))</span>
                    <span class="bp">self</span><span class="o">.</span><span class="n">token_images</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">token_image</span><span class="p">)</span>
                <span class="k">else</span><span class="p">:</span>
                    <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Token image </span><span class="si">{</span><span class="n">i</span><span class="si">}</span><span class="s2"> not found at </span><span class="si">{</span><span class="n">image_path</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
                    <span class="n">fallback</span> <span class="o">=</span> <span class="n">pygame</span><span class="o">.</span><span class="n">Surface</span><span class="p">((</span><span class="mi">40</span><span class="p">,</span> <span class="mi">40</span><span class="p">),</span> <span class="n">pygame</span><span class="o">.</span><span class="n">SRCALPHA</span><span class="p">)</span>
                    <span class="n">pygame</span><span class="o">.</span><span class="n">draw</span><span class="o">.</span><span class="n">circle</span><span class="p">(</span><span class="n">fallback</span><span class="p">,</span> <span class="p">(</span><span class="mi">50</span> <span class="o">*</span> <span class="n">i</span><span class="p">,</span> <span class="mi">100</span><span class="p">,</span> <span class="mi">150</span><span class="p">),</span> <span class="p">(</span><span class="mi">20</span><span class="p">,</span> <span class="mi">20</span><span class="p">),</span> <span class="mi">20</span><span class="p">)</span>
                    <span class="bp">self</span><span class="o">.</span><span class="n">token_images</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">fallback</span><span class="p">)</span>
            <span class="k">except</span> <span class="ne">Exception</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
                <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Error loading token image </span><span class="si">{</span><span class="n">i</span><span class="si">}</span><span class="s2">: </span><span class="si">{</span><span class="n">e</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
                <span class="n">fallback</span> <span class="o">=</span> <span class="n">pygame</span><span class="o">.</span><span class="n">Surface</span><span class="p">((</span><span class="mi">40</span><span class="p">,</span> <span class="mi">40</span><span class="p">),</span> <span class="n">pygame</span><span class="o">.</span><span class="n">SRCALPHA</span><span class="p">)</span>
                <span class="n">pygame</span><span class="o">.</span><span class="n">draw</span><span class="o">.</span><span class="n">circle</span><span class="p">(</span><span class="n">fallback</span><span class="p">,</span> <span class="p">(</span><span class="mi">50</span> <span class="o">*</span> <span class="n">i</span><span class="p">,</span> <span class="mi">100</span><span class="p">,</span> <span class="mi">150</span><span class="p">),</span> <span class="p">(</span><span class="mi">20</span><span class="p">,</span> <span class="mi">20</span><span class="p">),</span> <span class="mi">20</span><span class="p">)</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">token_images</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">fallback</span><span class="p">)</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">player_token_indices</span> <span class="o">=</span> <span class="p">[</span><span class="mi">0</span><span class="p">]</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">ai_token_indices</span> <span class="o">=</span> <span class="p">[</span><span class="mi">1</span><span class="p">]</span>

        <span class="n">button_width</span> <span class="o">=</span> <span class="mi">300</span>
        <span class="n">button_height</span> <span class="o">=</span> <span class="mi">60</span>
        <span class="n">input_y_start</span> <span class="o">=</span> <span class="n">get_window_size</span><span class="p">()[</span><span class="mi">1</span><span class="p">]</span> <span class="o">//</span> <span class="mi">2</span> <span class="o">-</span> <span class="mi">50</span>
        <span class="n">input_width</span> <span class="o">=</span> <span class="mi">300</span>
        <span class="n">input_height</span> <span class="o">=</span> <span class="mi">50</span>
        <span class="n">count_x_offset</span> <span class="o">=</span> <span class="mi">250</span>

        <span class="n">player_controls_y</span> <span class="o">=</span> <span class="n">input_y_start</span> <span class="o">-</span> <span class="mi">180</span>

        <span class="c1"># buttons for adding/removing players</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">human_minus_button</span> <span class="o">=</span> <span class="n">UIButton</span><span class="p">(</span>
            <span class="n">pygame</span><span class="o">.</span><span class="n">Rect</span><span class="p">(</span>
                <span class="n">get_window_size</span><span class="p">()[</span><span class="mi">0</span><span class="p">]</span> <span class="o">//</span> <span class="mi">2</span> <span class="o">-</span> <span class="n">count_x_offset</span> <span class="o">-</span> <span class="mi">100</span><span class="p">,</span>
                <span class="n">player_controls_y</span><span class="p">,</span>
                <span class="mi">50</span><span class="p">,</span>
                <span class="mi">50</span><span class="p">,</span>
            <span class="p">),</span>
            <span class="s2">&quot;-&quot;</span><span class="p">,</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">button_font</span><span class="p">,</span>
            <span class="n">color</span><span class="o">=</span><span class="n">HUMAN_COLOR</span><span class="p">,</span>
        <span class="p">)</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">human_plus_button</span> <span class="o">=</span> <span class="n">UIButton</span><span class="p">(</span>
            <span class="n">pygame</span><span class="o">.</span><span class="n">Rect</span><span class="p">(</span>
                <span class="n">get_window_size</span><span class="p">()[</span><span class="mi">0</span><span class="p">]</span> <span class="o">//</span> <span class="mi">2</span> <span class="o">-</span> <span class="n">count_x_offset</span> <span class="o">+</span> <span class="mi">50</span><span class="p">,</span>
                <span class="n">player_controls_y</span><span class="p">,</span>
                <span class="mi">50</span><span class="p">,</span>
                <span class="mi">50</span><span class="p">,</span>
            <span class="p">),</span>
            <span class="s2">&quot;+&quot;</span><span class="p">,</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">button_font</span><span class="p">,</span>
            <span class="n">color</span><span class="o">=</span><span class="n">HUMAN_COLOR</span><span class="p">,</span>
        <span class="p">)</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">ai_minus_button</span> <span class="o">=</span> <span class="n">UIButton</span><span class="p">(</span>
            <span class="n">pygame</span><span class="o">.</span><span class="n">Rect</span><span class="p">(</span>
                <span class="n">get_window_size</span><span class="p">()[</span><span class="mi">0</span><span class="p">]</span> <span class="o">//</span> <span class="mi">2</span> <span class="o">+</span> <span class="n">count_x_offset</span> <span class="o">-</span> <span class="mi">100</span><span class="p">,</span>
                <span class="n">player_controls_y</span><span class="p">,</span>
                <span class="mi">50</span><span class="p">,</span>
                <span class="mi">50</span><span class="p">,</span>
            <span class="p">),</span>
            <span class="s2">&quot;-&quot;</span><span class="p">,</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">button_font</span><span class="p">,</span>
            <span class="n">color</span><span class="o">=</span><span class="n">AI_COLOR</span><span class="p">,</span>
        <span class="p">)</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">ai_plus_button</span> <span class="o">=</span> <span class="n">UIButton</span><span class="p">(</span>
            <span class="n">pygame</span><span class="o">.</span><span class="n">Rect</span><span class="p">(</span>
                <span class="n">get_window_size</span><span class="p">()[</span><span class="mi">0</span><span class="p">]</span> <span class="o">//</span> <span class="mi">2</span> <span class="o">+</span> <span class="n">count_x_offset</span> <span class="o">+</span> <span class="mi">50</span><span class="p">,</span>
                <span class="n">player_controls_y</span><span class="p">,</span>
                <span class="mi">50</span><span class="p">,</span>
                <span class="mi">50</span><span class="p">,</span>
            <span class="p">),</span>
            <span class="s2">&quot;+&quot;</span><span class="p">,</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">button_font</span><span class="p">,</span>
            <span class="n">color</span><span class="o">=</span><span class="n">AI_COLOR</span><span class="p">,</span>
        <span class="p">)</span>

        <span class="c1"># input fields for player names</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">name_inputs</span> <span class="o">=</span> <span class="p">[]</span>
        <span class="n">input_spacing</span> <span class="o">=</span> <span class="mi">50</span>
        <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">5</span><span class="p">):</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">name_inputs</span><span class="o">.</span><span class="n">append</span><span class="p">(</span>
                <span class="n">UIInput</span><span class="p">(</span>
                    <span class="n">pygame</span><span class="o">.</span><span class="n">Rect</span><span class="p">(</span>
                        <span class="p">(</span><span class="n">get_window_size</span><span class="p">()[</span><span class="mi">0</span><span class="p">]</span> <span class="o">-</span> <span class="n">input_width</span><span class="p">)</span> <span class="o">//</span> <span class="mi">2</span><span class="p">,</span>
                        <span class="n">input_y_start</span> <span class="o">+</span> <span class="n">i</span> <span class="o">*</span> <span class="n">input_spacing</span><span class="p">,</span>
                        <span class="n">input_width</span><span class="p">,</span>
                        <span class="n">input_height</span><span class="p">,</span>
                    <span class="p">),</span>
                    <span class="s2">&quot;&quot;</span><span class="p">,</span>
                    <span class="bp">self</span><span class="o">.</span><span class="n">input_font</span><span class="p">,</span>
                <span class="p">)</span>
            <span class="p">)</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">start_button</span> <span class="o">=</span> <span class="n">UIButton</span><span class="p">(</span>
            <span class="n">pygame</span><span class="o">.</span><span class="n">Rect</span><span class="p">(</span>
                <span class="p">(</span><span class="n">get_window_size</span><span class="p">()[</span><span class="mi">0</span><span class="p">]</span> <span class="o">-</span> <span class="n">button_width</span><span class="p">)</span> <span class="o">//</span> <span class="mi">2</span><span class="p">,</span>
                <span class="n">get_window_size</span><span class="p">()[</span><span class="mi">1</span><span class="p">]</span> <span class="o">-</span> <span class="mi">100</span><span class="p">,</span>
                <span class="n">button_width</span><span class="p">,</span>
                <span class="n">button_height</span><span class="p">,</span>
            <span class="p">),</span>
            <span class="s2">&quot;Start Game&quot;</span><span class="p">,</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">button_font</span><span class="p">,</span>
        <span class="p">)</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">back_button</span> <span class="o">=</span> <span class="n">UIButton</span><span class="p">(</span>
            <span class="n">pygame</span><span class="o">.</span><span class="n">Rect</span><span class="p">(</span><span class="mi">20</span><span class="p">,</span> <span class="n">get_window_size</span><span class="p">()[</span><span class="mi">1</span><span class="p">]</span> <span class="o">-</span> <span class="mi">80</span><span class="p">,</span> <span class="mi">200</span><span class="p">,</span> <span class="n">button_height</span><span class="p">),</span>
            <span class="s2">&quot;Back&quot;</span><span class="p">,</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">button_font</span><span class="p">,</span>
        <span class="p">)</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">token_button_rects</span> <span class="o">=</span> <span class="p">[]</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">token_selection_active</span> <span class="o">=</span> <span class="kc">False</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">token_selection_for_player</span> <span class="o">=</span> <span class="o">-</span><span class="mi">1</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">token_selection_is_ai</span> <span class="o">=</span> <span class="kc">False</span>

<div class="viewcode-block" id="StartPage.generate_unique_ai_name">
<a class="viewcode-back" href="../../modules/ui.html#src.UI.StartPage.generate_unique_ai_name">[docs]</a>
    <span class="k">def</span><span class="w"> </span><span class="nf">generate_unique_ai_name</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">ai_name_counter</span> <span class="o">+=</span> <span class="mi">1</span>
        <span class="k">return</span> <span class="sa">f</span><span class="s2">&quot;Bot </span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">ai_name_counter</span><span class="si">}</span><span class="s2">&quot;</span></div>


<div class="viewcode-block" id="StartPage.update_player_lists">
<a class="viewcode-back" href="../../modules/ui.html#src.UI.StartPage.update_player_lists">[docs]</a>
    <span class="k">def</span><span class="w"> </span><span class="nf">update_player_lists</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="c1"># make sure ai names and tokens match counts</span>
        <span class="k">while</span> <span class="nb">len</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">ai_names</span><span class="p">)</span> <span class="o">&lt;</span> <span class="bp">self</span><span class="o">.</span><span class="n">ai_count</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">ai_names</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">generate_unique_ai_name</span><span class="p">())</span>
        <span class="k">while</span> <span class="nb">len</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">ai_names</span><span class="p">)</span> <span class="o">&gt;</span> <span class="bp">self</span><span class="o">.</span><span class="n">ai_count</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">ai_names</span><span class="o">.</span><span class="n">pop</span><span class="p">()</span>

        <span class="k">while</span> <span class="nb">len</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">player_token_indices</span><span class="p">)</span> <span class="o">&lt;</span> <span class="bp">self</span><span class="o">.</span><span class="n">human_count</span><span class="p">:</span>
            <span class="n">used_indices</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">player_token_indices</span> <span class="o">+</span> <span class="bp">self</span><span class="o">.</span><span class="n">ai_token_indices</span>
            <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">6</span><span class="p">):</span>
                <span class="k">if</span> <span class="n">i</span> <span class="ow">not</span> <span class="ow">in</span> <span class="n">used_indices</span><span class="p">:</span>
                    <span class="bp">self</span><span class="o">.</span><span class="n">player_token_indices</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">i</span><span class="p">)</span>
                    <span class="k">break</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">player_token_indices</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="mi">0</span><span class="p">)</span>

        <span class="k">while</span> <span class="nb">len</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">player_token_indices</span><span class="p">)</span> <span class="o">&gt;</span> <span class="bp">self</span><span class="o">.</span><span class="n">human_count</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">player_token_indices</span><span class="o">.</span><span class="n">pop</span><span class="p">()</span>

        <span class="k">while</span> <span class="nb">len</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">ai_token_indices</span><span class="p">)</span> <span class="o">&lt;</span> <span class="bp">self</span><span class="o">.</span><span class="n">ai_count</span><span class="p">:</span>
            <span class="n">used_indices</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">player_token_indices</span> <span class="o">+</span> <span class="bp">self</span><span class="o">.</span><span class="n">ai_token_indices</span>
            <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">6</span><span class="p">):</span>
                <span class="k">if</span> <span class="n">i</span> <span class="ow">not</span> <span class="ow">in</span> <span class="n">used_indices</span><span class="p">:</span>
                    <span class="bp">self</span><span class="o">.</span><span class="n">ai_token_indices</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">i</span><span class="p">)</span>
                    <span class="k">break</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">ai_token_indices</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="mi">0</span><span class="p">)</span>

        <span class="k">while</span> <span class="nb">len</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">ai_token_indices</span><span class="p">)</span> <span class="o">&gt;</span> <span class="bp">self</span><span class="o">.</span><span class="n">ai_count</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">ai_token_indices</span><span class="o">.</span><span class="n">pop</span><span class="p">()</span></div>


<div class="viewcode-block" id="StartPage.draw">
<a class="viewcode-back" href="../../modules/ui.html#src.UI.StartPage.draw">[docs]</a>
    <span class="k">def</span><span class="w"> </span><span class="nf">draw</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">draw_background</span><span class="p">()</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">draw_title</span><span class="p">()</span>

        <span class="n">player_setup_title</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">button_font</span><span class="o">.</span><span class="n">render</span><span class="p">(</span><span class="s2">&quot;Player Setup&quot;</span><span class="p">,</span> <span class="kc">True</span><span class="p">,</span> <span class="n">WHITE</span><span class="p">)</span>
        <span class="n">title_rect</span> <span class="o">=</span> <span class="n">player_setup_title</span><span class="o">.</span><span class="n">get_rect</span><span class="p">(</span>
            <span class="n">centerx</span><span class="o">=</span><span class="n">get_window_size</span><span class="p">()[</span><span class="mi">0</span><span class="p">]</span> <span class="o">//</span> <span class="mi">2</span><span class="p">,</span> <span class="n">y</span><span class="o">=</span><span class="mi">100</span>
        <span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">screen</span><span class="o">.</span><span class="n">blit</span><span class="p">(</span><span class="n">player_setup_title</span><span class="p">,</span> <span class="n">title_rect</span><span class="p">)</span>

        <span class="n">input_y_start</span> <span class="o">=</span> <span class="n">get_window_size</span><span class="p">()[</span><span class="mi">1</span><span class="p">]</span> <span class="o">//</span> <span class="mi">2</span> <span class="o">-</span> <span class="mi">50</span>

        <span class="n">player_controls_y</span> <span class="o">=</span> <span class="n">input_y_start</span> <span class="o">-</span> <span class="mi">120</span>

        <span class="c1"># draw player count controls</span>
        <span class="n">human_text</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">button_font</span><span class="o">.</span><span class="n">render</span><span class="p">(</span>
            <span class="sa">f</span><span class="s2">&quot;Human Players: </span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">human_count</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">,</span> <span class="kc">True</span><span class="p">,</span> <span class="n">HUMAN_COLOR</span>
        <span class="p">)</span>
        <span class="n">human_rect</span> <span class="o">=</span> <span class="n">human_text</span><span class="o">.</span><span class="n">get_rect</span><span class="p">(</span>
            <span class="n">centerx</span><span class="o">=</span><span class="n">get_window_size</span><span class="p">()[</span><span class="mi">0</span><span class="p">]</span> <span class="o">//</span> <span class="mi">2</span> <span class="o">-</span> <span class="mi">150</span><span class="p">,</span> <span class="n">y</span><span class="o">=</span><span class="n">player_controls_y</span> <span class="o">-</span> <span class="mi">40</span>
        <span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">screen</span><span class="o">.</span><span class="n">blit</span><span class="p">(</span><span class="n">human_text</span><span class="p">,</span> <span class="n">human_rect</span><span class="p">)</span>

        <span class="n">ai_text</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">button_font</span><span class="o">.</span><span class="n">render</span><span class="p">(</span>
            <span class="sa">f</span><span class="s2">&quot;AI Players: </span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">ai_count</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">,</span> <span class="kc">True</span><span class="p">,</span> <span class="n">AI_COLOR</span>
        <span class="p">)</span>
        <span class="n">ai_rect</span> <span class="o">=</span> <span class="n">ai_text</span><span class="o">.</span><span class="n">get_rect</span><span class="p">(</span>
            <span class="n">centerx</span><span class="o">=</span><span class="n">get_window_size</span><span class="p">()[</span><span class="mi">0</span><span class="p">]</span> <span class="o">//</span> <span class="mi">2</span> <span class="o">+</span> <span class="mi">150</span><span class="p">,</span> <span class="n">y</span><span class="o">=</span><span class="n">player_controls_y</span> <span class="o">-</span> <span class="mi">40</span>
        <span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">screen</span><span class="o">.</span><span class="n">blit</span><span class="p">(</span><span class="n">ai_text</span><span class="p">,</span> <span class="n">ai_rect</span><span class="p">)</span>

        <span class="n">total_text</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">small_font</span><span class="o">.</span><span class="n">render</span><span class="p">(</span>
            <span class="sa">f</span><span class="s2">&quot;Total Players: </span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">total_players</span><span class="si">}</span><span class="s2">/5&quot;</span><span class="p">,</span> <span class="kc">True</span><span class="p">,</span> <span class="n">LIGHT_GRAY</span>
        <span class="p">)</span>
        <span class="n">total_rect</span> <span class="o">=</span> <span class="n">total_text</span><span class="o">.</span><span class="n">get_rect</span><span class="p">(</span>
            <span class="n">centerx</span><span class="o">=</span><span class="n">get_window_size</span><span class="p">()[</span><span class="mi">0</span><span class="p">]</span> <span class="o">//</span> <span class="mi">2</span><span class="p">,</span> <span class="n">y</span><span class="o">=</span><span class="n">player_controls_y</span> <span class="o">+</span> <span class="mi">20</span>
        <span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">screen</span><span class="o">.</span><span class="n">blit</span><span class="p">(</span><span class="n">total_text</span><span class="p">,</span> <span class="n">total_rect</span><span class="p">)</span>

        <span class="n">button_y</span> <span class="o">=</span> <span class="n">player_controls_y</span> <span class="o">+</span> <span class="mi">60</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">human_minus_button</span><span class="o">.</span><span class="n">rect</span><span class="o">.</span><span class="n">y</span> <span class="o">=</span> <span class="n">button_y</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">human_plus_button</span><span class="o">.</span><span class="n">rect</span><span class="o">.</span><span class="n">y</span> <span class="o">=</span> <span class="n">button_y</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">ai_minus_button</span><span class="o">.</span><span class="n">rect</span><span class="o">.</span><span class="n">y</span> <span class="o">=</span> <span class="n">button_y</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">ai_plus_button</span><span class="o">.</span><span class="n">rect</span><span class="o">.</span><span class="n">y</span> <span class="o">=</span> <span class="n">button_y</span>

        <span class="c1"># enable/disable +/- buttons based on limits</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">human_minus_button</span><span class="o">.</span><span class="n">active</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">human_count</span> <span class="o">&gt;</span> <span class="mi">1</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">human_plus_button</span><span class="o">.</span><span class="n">active</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">human_count</span> <span class="o">&lt;</span> <span class="mi">5</span> <span class="ow">and</span> <span class="bp">self</span><span class="o">.</span><span class="n">total_players</span> <span class="o">&lt;</span> <span class="mi">5</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">ai_minus_button</span><span class="o">.</span><span class="n">active</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">ai_count</span> <span class="o">&gt;</span> <span class="mi">0</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">ai_plus_button</span><span class="o">.</span><span class="n">active</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">ai_count</span> <span class="o">&lt;</span> <span class="mi">4</span> <span class="ow">and</span> <span class="bp">self</span><span class="o">.</span><span class="n">total_players</span> <span class="o">&lt;</span> <span class="mi">5</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">human_minus_button</span><span class="o">.</span><span class="n">draw</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">screen</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">human_plus_button</span><span class="o">.</span><span class="n">draw</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">screen</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">ai_minus_button</span><span class="o">.</span><span class="n">draw</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">screen</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">ai_plus_button</span><span class="o">.</span><span class="n">draw</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">screen</span><span class="p">)</span>

        <span class="n">input_spacing</span> <span class="o">=</span> <span class="mi">50</span>

        <span class="c1"># draw name inputs and token icons</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">token_selection_active</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">draw_token_selection</span><span class="p">()</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="c1"># draw human player inputs</span>
            <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">human_count</span><span class="p">):</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">name_inputs</span><span class="p">[</span><span class="n">i</span><span class="p">]</span><span class="o">.</span><span class="n">active</span> <span class="o">=</span> <span class="n">i</span> <span class="o">==</span> <span class="bp">self</span><span class="o">.</span><span class="n">active_input</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">name_inputs</span><span class="p">[</span><span class="n">i</span><span class="p">]</span><span class="o">.</span><span class="n">text</span> <span class="o">=</span> <span class="p">(</span>
                    <span class="bp">self</span><span class="o">.</span><span class="n">player_names</span><span class="p">[</span><span class="n">i</span><span class="p">]</span> <span class="k">if</span> <span class="n">i</span> <span class="o">&lt;</span> <span class="nb">len</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">player_names</span><span class="p">)</span> <span class="k">else</span> <span class="s2">&quot;&quot;</span>
                <span class="p">)</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">name_inputs</span><span class="p">[</span><span class="n">i</span><span class="p">]</span><span class="o">.</span><span class="n">draw</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">screen</span><span class="p">)</span>

                <span class="n">human_label</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">small_font</span><span class="o">.</span><span class="n">render</span><span class="p">(</span><span class="s2">&quot;Human&quot;</span><span class="p">,</span> <span class="kc">True</span><span class="p">,</span> <span class="n">HUMAN_COLOR</span><span class="p">)</span>
                <span class="n">label_rect</span> <span class="o">=</span> <span class="n">human_label</span><span class="o">.</span><span class="n">get_rect</span><span class="p">(</span>
                    <span class="n">right</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">name_inputs</span><span class="p">[</span><span class="n">i</span><span class="p">]</span><span class="o">.</span><span class="n">rect</span><span class="o">.</span><span class="n">left</span> <span class="o">-</span> <span class="mi">10</span><span class="p">,</span>
                    <span class="n">centery</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">name_inputs</span><span class="p">[</span><span class="n">i</span><span class="p">]</span><span class="o">.</span><span class="n">rect</span><span class="o">.</span><span class="n">centery</span><span class="p">,</span>
                <span class="p">)</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">screen</span><span class="o">.</span><span class="n">blit</span><span class="p">(</span><span class="n">human_label</span><span class="p">,</span> <span class="n">label_rect</span><span class="p">)</span>

                <span class="n">token_rect</span> <span class="o">=</span> <span class="n">pygame</span><span class="o">.</span><span class="n">Rect</span><span class="p">(</span>
                    <span class="bp">self</span><span class="o">.</span><span class="n">name_inputs</span><span class="p">[</span><span class="n">i</span><span class="p">]</span><span class="o">.</span><span class="n">rect</span><span class="o">.</span><span class="n">right</span> <span class="o">+</span> <span class="mi">10</span><span class="p">,</span>
                    <span class="bp">self</span><span class="o">.</span><span class="n">name_inputs</span><span class="p">[</span><span class="n">i</span><span class="p">]</span><span class="o">.</span><span class="n">rect</span><span class="o">.</span><span class="n">centery</span> <span class="o">-</span> <span class="mi">20</span><span class="p">,</span>
                    <span class="mi">40</span><span class="p">,</span>
                    <span class="mi">40</span><span class="p">,</span>
                <span class="p">)</span>

                <span class="n">token_index</span> <span class="o">=</span> <span class="p">(</span>
                    <span class="bp">self</span><span class="o">.</span><span class="n">player_token_indices</span><span class="p">[</span><span class="n">i</span><span class="p">]</span>
                    <span class="k">if</span> <span class="n">i</span> <span class="o">&lt;</span> <span class="nb">len</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">player_token_indices</span><span class="p">)</span>
                    <span class="k">else</span> <span class="mi">0</span>
                <span class="p">)</span>
                <span class="n">token_image</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">token_images</span><span class="p">[</span><span class="n">token_index</span><span class="p">]</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">screen</span><span class="o">.</span><span class="n">blit</span><span class="p">(</span><span class="n">token_image</span><span class="p">,</span> <span class="n">token_rect</span><span class="p">)</span>

                <span class="n">pygame</span><span class="o">.</span><span class="n">draw</span><span class="o">.</span><span class="n">rect</span><span class="p">(</span>
                    <span class="bp">self</span><span class="o">.</span><span class="n">screen</span><span class="p">,</span> <span class="n">HUMAN_COLOR</span><span class="p">,</span> <span class="n">token_rect</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="n">border_radius</span><span class="o">=</span><span class="mi">5</span>
                <span class="p">)</span>

                <span class="k">if</span> <span class="n">i</span> <span class="o">&gt;=</span> <span class="nb">len</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">token_button_rects</span><span class="p">):</span>
                    <span class="bp">self</span><span class="o">.</span><span class="n">token_button_rects</span><span class="o">.</span><span class="n">append</span><span class="p">((</span><span class="n">token_rect</span><span class="p">,</span> <span class="n">i</span><span class="p">,</span> <span class="kc">False</span><span class="p">))</span>
                <span class="k">else</span><span class="p">:</span>
                    <span class="bp">self</span><span class="o">.</span><span class="n">token_button_rects</span><span class="p">[</span><span class="n">i</span><span class="p">]</span> <span class="o">=</span> <span class="p">(</span><span class="n">token_rect</span><span class="p">,</span> <span class="n">i</span><span class="p">,</span> <span class="kc">False</span><span class="p">)</span>

            <span class="c1"># draw ai player placeholders</span>
            <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">ai_count</span><span class="p">):</span>
                <span class="n">ai_input_rect</span> <span class="o">=</span> <span class="n">pygame</span><span class="o">.</span><span class="n">Rect</span><span class="p">(</span>
                    <span class="p">(</span><span class="n">get_window_size</span><span class="p">()[</span><span class="mi">0</span><span class="p">]</span> <span class="o">-</span> <span class="mi">300</span><span class="p">)</span> <span class="o">//</span> <span class="mi">2</span><span class="p">,</span>
                    <span class="n">input_y_start</span> <span class="o">+</span> <span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">human_count</span> <span class="o">+</span> <span class="n">i</span><span class="p">)</span> <span class="o">*</span> <span class="n">input_spacing</span><span class="p">,</span>
                    <span class="mi">300</span><span class="p">,</span>
                    <span class="mi">50</span><span class="p">,</span>
                <span class="p">)</span>

                <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">active_input</span> <span class="o">==</span> <span class="bp">self</span><span class="o">.</span><span class="n">human_count</span> <span class="o">+</span> <span class="n">i</span><span class="p">:</span>
                    <span class="n">pygame</span><span class="o">.</span><span class="n">draw</span><span class="o">.</span><span class="n">rect</span><span class="p">(</span>
                        <span class="bp">self</span><span class="o">.</span><span class="n">screen</span><span class="p">,</span> <span class="n">ACCENT_COLOR</span><span class="p">,</span> <span class="n">ai_input_rect</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="n">border_radius</span><span class="o">=</span><span class="mi">5</span>
                    <span class="p">)</span>

                <span class="n">ai_text</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">input_font</span><span class="o">.</span><span class="n">render</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">ai_names</span><span class="p">[</span><span class="n">i</span><span class="p">],</span> <span class="kc">True</span><span class="p">,</span> <span class="n">LIGHT_GRAY</span><span class="p">)</span>
                <span class="n">ai_rect</span> <span class="o">=</span> <span class="n">ai_text</span><span class="o">.</span><span class="n">get_rect</span><span class="p">(</span><span class="n">center</span><span class="o">=</span><span class="n">ai_input_rect</span><span class="o">.</span><span class="n">center</span><span class="p">)</span>

                <span class="n">pygame</span><span class="o">.</span><span class="n">draw</span><span class="o">.</span><span class="n">rect</span><span class="p">(</span>
                    <span class="bp">self</span><span class="o">.</span><span class="n">screen</span><span class="p">,</span> <span class="p">(</span><span class="o">*</span><span class="n">AI_COLOR</span><span class="p">[:</span><span class="mi">3</span><span class="p">],</span> <span class="mi">50</span><span class="p">),</span> <span class="n">ai_input_rect</span><span class="p">,</span> <span class="n">border_radius</span><span class="o">=</span><span class="mi">5</span>
                <span class="p">)</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">screen</span><span class="o">.</span><span class="n">blit</span><span class="p">(</span><span class="n">ai_text</span><span class="p">,</span> <span class="n">ai_rect</span><span class="p">)</span>

                <span class="n">ai_label</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">small_font</span><span class="o">.</span><span class="n">render</span><span class="p">(</span><span class="s2">&quot;AI&quot;</span><span class="p">,</span> <span class="kc">True</span><span class="p">,</span> <span class="n">AI_COLOR</span><span class="p">)</span>
                <span class="n">label_rect</span> <span class="o">=</span> <span class="n">ai_label</span><span class="o">.</span><span class="n">get_rect</span><span class="p">(</span>
                    <span class="n">right</span><span class="o">=</span><span class="n">ai_input_rect</span><span class="o">.</span><span class="n">left</span> <span class="o">-</span> <span class="mi">10</span><span class="p">,</span> <span class="n">centery</span><span class="o">=</span><span class="n">ai_input_rect</span><span class="o">.</span><span class="n">centery</span>
                <span class="p">)</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">screen</span><span class="o">.</span><span class="n">blit</span><span class="p">(</span><span class="n">ai_label</span><span class="p">,</span> <span class="n">label_rect</span><span class="p">)</span>

                <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">human_count</span> <span class="o">+</span> <span class="n">i</span> <span class="o">&gt;=</span> <span class="nb">len</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">token_button_rects</span><span class="p">):</span>
                    <span class="bp">self</span><span class="o">.</span><span class="n">token_button_rects</span><span class="o">.</span><span class="n">append</span><span class="p">((</span><span class="n">ai_input_rect</span><span class="p">,</span> <span class="n">i</span><span class="p">,</span> <span class="kc">True</span><span class="p">))</span>
                <span class="k">else</span><span class="p">:</span>
                    <span class="n">_</span><span class="p">,</span> <span class="n">idx</span><span class="p">,</span> <span class="n">is_ai</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">token_button_rects</span><span class="p">[</span><span class="bp">self</span><span class="o">.</span><span class="n">human_count</span> <span class="o">+</span> <span class="n">i</span><span class="p">]</span>
                    <span class="bp">self</span><span class="o">.</span><span class="n">token_button_rects</span><span class="p">[</span><span class="bp">self</span><span class="o">.</span><span class="n">human_count</span> <span class="o">+</span> <span class="n">i</span><span class="p">]</span> <span class="o">=</span> <span class="p">(</span>
                        <span class="n">ai_input_rect</span><span class="p">,</span>
                        <span class="n">i</span><span class="p">,</span>
                        <span class="kc">True</span><span class="p">,</span>
                    <span class="p">)</span>

                <span class="n">token_rect</span> <span class="o">=</span> <span class="n">pygame</span><span class="o">.</span><span class="n">Rect</span><span class="p">(</span>
                    <span class="n">ai_input_rect</span><span class="o">.</span><span class="n">right</span> <span class="o">+</span> <span class="mi">10</span><span class="p">,</span> <span class="n">ai_input_rect</span><span class="o">.</span><span class="n">centery</span> <span class="o">-</span> <span class="mi">20</span><span class="p">,</span> <span class="mi">40</span><span class="p">,</span> <span class="mi">40</span>
                <span class="p">)</span>

                <span class="n">token_index</span> <span class="o">=</span> <span class="p">(</span>
                    <span class="bp">self</span><span class="o">.</span><span class="n">ai_token_indices</span><span class="p">[</span><span class="n">i</span><span class="p">]</span> <span class="k">if</span> <span class="n">i</span> <span class="o">&lt;</span> <span class="nb">len</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">ai_token_indices</span><span class="p">)</span> <span class="k">else</span> <span class="mi">0</span>
                <span class="p">)</span>
                <span class="n">token_image</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">token_images</span><span class="p">[</span><span class="n">token_index</span><span class="p">]</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">screen</span><span class="o">.</span><span class="n">blit</span><span class="p">(</span><span class="n">token_image</span><span class="p">,</span> <span class="n">token_rect</span><span class="p">)</span>

                <span class="n">pygame</span><span class="o">.</span><span class="n">draw</span><span class="o">.</span><span class="n">rect</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">screen</span><span class="p">,</span> <span class="n">AI_COLOR</span><span class="p">,</span> <span class="n">token_rect</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="n">border_radius</span><span class="o">=</span><span class="mi">5</span><span class="p">)</span>

                <span class="bp">self</span><span class="o">.</span><span class="n">token_button_rects</span><span class="o">.</span><span class="n">append</span><span class="p">((</span><span class="n">token_rect</span><span class="p">,</span> <span class="n">i</span><span class="p">,</span> <span class="kc">True</span><span class="p">))</span>

        <span class="c1"># enable start button only if valid setup</span>
        <span class="n">can_start</span> <span class="o">=</span> <span class="p">(</span>
            <span class="nb">all</span><span class="p">(</span><span class="n">name</span><span class="o">.</span><span class="n">strip</span><span class="p">()</span> <span class="k">for</span> <span class="n">name</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">player_names</span><span class="p">[:</span> <span class="bp">self</span><span class="o">.</span><span class="n">human_count</span><span class="p">])</span>
            <span class="ow">and</span> <span class="bp">self</span><span class="o">.</span><span class="n">total_players</span> <span class="o">&gt;=</span> <span class="mi">2</span>
            <span class="ow">and</span> <span class="bp">self</span><span class="o">.</span><span class="n">total_players</span> <span class="o">&lt;=</span> <span class="mi">5</span>
        <span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">start_button</span><span class="o">.</span><span class="n">active</span> <span class="o">=</span> <span class="n">can_start</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">start_button</span><span class="o">.</span><span class="n">draw</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">screen</span><span class="p">)</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">back_button</span><span class="o">.</span><span class="n">draw</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">screen</span><span class="p">)</span>

        <span class="c1"># draw control hints</span>
        <span class="n">controls</span> <span class="o">=</span> <span class="p">[</span>
            <span class="s2">&quot;Controls:&quot;</span><span class="p">,</span>
            <span class="s2">&quot;H/h - Adjust human players&quot;</span><span class="p">,</span>
            <span class="s2">&quot;A/a - Adjust AI players&quot;</span><span class="p">,</span>
            <span class="s2">&quot;Enter - Edit selected name&quot;</span><span class="p">,</span>
            <span class="s2">&quot;Tab - Switch between name fields&quot;</span><span class="p">,</span>
            <span class="s2">&quot;Space - Start game&quot;</span><span class="p">,</span>
            <span class="s2">&quot;ESC/Back - Return to menu&quot;</span><span class="p">,</span>
            <span class="s2">&quot;Click token icon - Change player token&quot;</span><span class="p">,</span>
            <span class="s2">&quot;Click player name - Edit name&quot;</span><span class="p">,</span>
        <span class="p">]</span>

        <span class="n">y_offset</span> <span class="o">=</span> <span class="n">get_window_size</span><span class="p">()[</span><span class="mi">1</span><span class="p">]</span> <span class="o">-</span> <span class="mi">210</span>
        <span class="k">for</span> <span class="n">hint</span> <span class="ow">in</span> <span class="n">controls</span><span class="p">:</span>
            <span class="n">hint_text</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">small_font</span><span class="o">.</span><span class="n">render</span><span class="p">(</span><span class="n">hint</span><span class="p">,</span> <span class="kc">True</span><span class="p">,</span> <span class="n">LIGHT_GRAY</span><span class="p">)</span>
            <span class="n">hint_rect</span> <span class="o">=</span> <span class="n">hint_text</span><span class="o">.</span><span class="n">get_rect</span><span class="p">(</span><span class="n">right</span><span class="o">=</span><span class="n">get_window_size</span><span class="p">()[</span><span class="mi">0</span><span class="p">]</span> <span class="o">-</span> <span class="mi">20</span><span class="p">,</span> <span class="n">y</span><span class="o">=</span><span class="n">y_offset</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">screen</span><span class="o">.</span><span class="n">blit</span><span class="p">(</span><span class="n">hint_text</span><span class="p">,</span> <span class="n">hint_rect</span><span class="p">)</span>
            <span class="n">y_offset</span> <span class="o">+=</span> <span class="mi">20</span>

        <span class="n">pygame</span><span class="o">.</span><span class="n">display</span><span class="o">.</span><span class="n">flip</span><span class="p">()</span></div>


<div class="viewcode-block" id="StartPage.draw_token_selection">
<a class="viewcode-back" href="../../modules/ui.html#src.UI.StartPage.draw_token_selection">[docs]</a>
    <span class="k">def</span><span class="w"> </span><span class="nf">draw_token_selection</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="c1"># draw the popup for choosing player tokens</span>
        <span class="n">overlay</span> <span class="o">=</span> <span class="n">pygame</span><span class="o">.</span><span class="n">Surface</span><span class="p">(</span><span class="n">get_window_size</span><span class="p">(),</span> <span class="n">pygame</span><span class="o">.</span><span class="n">SRCALPHA</span><span class="p">)</span>
        <span class="n">overlay</span><span class="o">.</span><span class="n">fill</span><span class="p">((</span><span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">180</span><span class="p">))</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">screen</span><span class="o">.</span><span class="n">blit</span><span class="p">(</span><span class="n">overlay</span><span class="p">,</span> <span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">))</span>

        <span class="n">panel_width</span> <span class="o">=</span> <span class="mi">500</span>
        <span class="n">panel_height</span> <span class="o">=</span> <span class="mi">400</span>
        <span class="n">panel_x</span> <span class="o">=</span> <span class="p">(</span><span class="n">get_window_size</span><span class="p">()[</span><span class="mi">0</span><span class="p">]</span> <span class="o">-</span> <span class="n">panel_width</span><span class="p">)</span> <span class="o">//</span> <span class="mi">2</span>
        <span class="n">panel_y</span> <span class="o">=</span> <span class="p">(</span><span class="n">get_window_size</span><span class="p">()[</span><span class="mi">1</span><span class="p">]</span> <span class="o">-</span> <span class="n">panel_height</span><span class="p">)</span> <span class="o">//</span> <span class="mi">2</span>

        <span class="n">pygame</span><span class="o">.</span><span class="n">draw</span><span class="o">.</span><span class="n">rect</span><span class="p">(</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">screen</span><span class="p">,</span>
            <span class="n">UI_BG</span><span class="p">,</span>
            <span class="n">pygame</span><span class="o">.</span><span class="n">Rect</span><span class="p">(</span><span class="n">panel_x</span><span class="p">,</span> <span class="n">panel_y</span><span class="p">,</span> <span class="n">panel_width</span><span class="p">,</span> <span class="n">panel_height</span><span class="p">),</span>
            <span class="n">border_radius</span><span class="o">=</span><span class="mi">15</span><span class="p">,</span>
        <span class="p">)</span>
        <span class="n">pygame</span><span class="o">.</span><span class="n">draw</span><span class="o">.</span><span class="n">rect</span><span class="p">(</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">screen</span><span class="p">,</span>
            <span class="n">ACCENT_COLOR</span><span class="p">,</span>
            <span class="n">pygame</span><span class="o">.</span><span class="n">Rect</span><span class="p">(</span><span class="n">panel_x</span><span class="p">,</span> <span class="n">panel_y</span><span class="p">,</span> <span class="n">panel_width</span><span class="p">,</span> <span class="n">panel_height</span><span class="p">),</span>
            <span class="mi">2</span><span class="p">,</span>
            <span class="n">border_radius</span><span class="o">=</span><span class="mi">15</span><span class="p">,</span>
        <span class="p">)</span>

        <span class="n">player_type</span> <span class="o">=</span> <span class="s2">&quot;AI&quot;</span> <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">token_selection_is_ai</span> <span class="k">else</span> <span class="s2">&quot;Human&quot;</span>
        <span class="n">player_index</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">token_selection_for_player</span> <span class="o">+</span> <span class="mi">1</span>
        <span class="n">title_text</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">button_font</span><span class="o">.</span><span class="n">render</span><span class="p">(</span>
            <span class="sa">f</span><span class="s2">&quot;Select Token for </span><span class="si">{</span><span class="n">player_type</span><span class="si">}</span><span class="s2"> </span><span class="si">{</span><span class="n">player_index</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">,</span> <span class="kc">True</span><span class="p">,</span> <span class="n">WHITE</span>
        <span class="p">)</span>
        <span class="n">title_rect</span> <span class="o">=</span> <span class="n">title_text</span><span class="o">.</span><span class="n">get_rect</span><span class="p">(</span>
            <span class="n">centerx</span><span class="o">=</span><span class="n">panel_x</span> <span class="o">+</span> <span class="n">panel_width</span> <span class="o">//</span> <span class="mi">2</span><span class="p">,</span> <span class="n">top</span><span class="o">=</span><span class="n">panel_y</span> <span class="o">+</span> <span class="mi">20</span>
        <span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">screen</span><span class="o">.</span><span class="n">blit</span><span class="p">(</span><span class="n">title_text</span><span class="p">,</span> <span class="n">title_rect</span><span class="p">)</span>

        <span class="n">hint_text</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">small_font</span><span class="o">.</span><span class="n">render</span><span class="p">(</span>
            <span class="s2">&quot;Click any token to select&quot;</span><span class="p">,</span> <span class="kc">True</span><span class="p">,</span> <span class="n">LIGHT_GRAY</span>
        <span class="p">)</span>
        <span class="n">hint_rect</span> <span class="o">=</span> <span class="n">hint_text</span><span class="o">.</span><span class="n">get_rect</span><span class="p">(</span>
            <span class="n">centerx</span><span class="o">=</span><span class="n">panel_x</span> <span class="o">+</span> <span class="n">panel_width</span> <span class="o">//</span> <span class="mi">2</span><span class="p">,</span> <span class="n">top</span><span class="o">=</span><span class="n">panel_y</span> <span class="o">+</span> <span class="mi">60</span>
        <span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">screen</span><span class="o">.</span><span class="n">blit</span><span class="p">(</span><span class="n">hint_text</span><span class="p">,</span> <span class="n">hint_rect</span><span class="p">)</span>

        <span class="n">token_size</span> <span class="o">=</span> <span class="mi">60</span>
        <span class="n">token_spacing</span> <span class="o">=</span> <span class="mi">20</span>
        <span class="n">tokens_per_row</span> <span class="o">=</span> <span class="mi">3</span>
        <span class="n">total_width</span> <span class="o">=</span> <span class="p">(</span><span class="n">token_size</span> <span class="o">*</span> <span class="n">tokens_per_row</span><span class="p">)</span> <span class="o">+</span> <span class="p">(</span>
            <span class="n">token_spacing</span> <span class="o">*</span> <span class="p">(</span><span class="n">tokens_per_row</span> <span class="o">-</span> <span class="mi">1</span><span class="p">)</span>
        <span class="p">)</span>
        <span class="n">start_x</span> <span class="o">=</span> <span class="n">panel_x</span> <span class="o">+</span> <span class="p">(</span><span class="n">panel_width</span> <span class="o">-</span> <span class="n">total_width</span><span class="p">)</span> <span class="o">//</span> <span class="mi">2</span>
        <span class="n">start_y</span> <span class="o">=</span> <span class="n">panel_y</span> <span class="o">+</span> <span class="mi">100</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">token_selection_rects</span> <span class="o">=</span> <span class="p">[]</span>

        <span class="k">for</span> <span class="n">i</span><span class="p">,</span> <span class="n">token_image</span> <span class="ow">in</span> <span class="nb">enumerate</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">token_images</span><span class="p">):</span>
            <span class="n">row</span> <span class="o">=</span> <span class="n">i</span> <span class="o">//</span> <span class="n">tokens_per_row</span>
            <span class="n">col</span> <span class="o">=</span> <span class="n">i</span> <span class="o">%</span> <span class="n">tokens_per_row</span>

            <span class="n">x</span> <span class="o">=</span> <span class="n">start_x</span> <span class="o">+</span> <span class="n">col</span> <span class="o">*</span> <span class="p">(</span><span class="n">token_size</span> <span class="o">+</span> <span class="n">token_spacing</span><span class="p">)</span>
            <span class="n">y</span> <span class="o">=</span> <span class="n">start_y</span> <span class="o">+</span> <span class="n">row</span> <span class="o">*</span> <span class="p">(</span><span class="n">token_size</span> <span class="o">+</span> <span class="n">token_spacing</span><span class="p">)</span>

            <span class="n">scaled_token</span> <span class="o">=</span> <span class="n">pygame</span><span class="o">.</span><span class="n">transform</span><span class="o">.</span><span class="n">scale</span><span class="p">(</span><span class="n">token_image</span><span class="p">,</span> <span class="p">(</span><span class="n">token_size</span><span class="p">,</span> <span class="n">token_size</span><span class="p">))</span>
            <span class="n">token_rect</span> <span class="o">=</span> <span class="n">pygame</span><span class="o">.</span><span class="n">Rect</span><span class="p">(</span><span class="n">x</span><span class="p">,</span> <span class="n">y</span><span class="p">,</span> <span class="n">token_size</span><span class="p">,</span> <span class="n">token_size</span><span class="p">)</span>

            <span class="n">token_in_use</span> <span class="o">=</span> <span class="kc">False</span>
            <span class="n">token_user</span> <span class="o">=</span> <span class="kc">None</span>
            <span class="n">token_is_ai</span> <span class="o">=</span> <span class="kc">False</span>

            <span class="k">for</span> <span class="n">j</span><span class="p">,</span> <span class="n">token_idx</span> <span class="ow">in</span> <span class="nb">enumerate</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">player_token_indices</span><span class="p">):</span>
                <span class="k">if</span> <span class="n">token_idx</span> <span class="o">==</span> <span class="n">i</span><span class="p">:</span>
                    <span class="n">token_in_use</span> <span class="o">=</span> <span class="kc">True</span>
                    <span class="n">token_user</span> <span class="o">=</span> <span class="n">j</span> <span class="o">+</span> <span class="mi">1</span>
                    <span class="n">token_is_ai</span> <span class="o">=</span> <span class="kc">False</span>
                    <span class="k">break</span>

            <span class="k">if</span> <span class="ow">not</span> <span class="n">token_in_use</span><span class="p">:</span>
                <span class="k">for</span> <span class="n">j</span><span class="p">,</span> <span class="n">token_idx</span> <span class="ow">in</span> <span class="nb">enumerate</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">ai_token_indices</span><span class="p">):</span>
                    <span class="k">if</span> <span class="n">token_idx</span> <span class="o">==</span> <span class="n">i</span><span class="p">:</span>
                        <span class="n">token_in_use</span> <span class="o">=</span> <span class="kc">True</span>
                        <span class="n">token_user</span> <span class="o">=</span> <span class="n">j</span> <span class="o">+</span> <span class="mi">1</span>
                        <span class="n">token_is_ai</span> <span class="o">=</span> <span class="kc">True</span>
                        <span class="k">break</span>

            <span class="bp">self</span><span class="o">.</span><span class="n">screen</span><span class="o">.</span><span class="n">blit</span><span class="p">(</span><span class="n">scaled_token</span><span class="p">,</span> <span class="n">token_rect</span><span class="p">)</span>

            <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">token_selection_is_ai</span><span class="p">:</span>
                <span class="n">is_selected</span> <span class="o">=</span> <span class="p">(</span>
                    <span class="n">i</span> <span class="o">==</span> <span class="bp">self</span><span class="o">.</span><span class="n">ai_token_indices</span><span class="p">[</span><span class="bp">self</span><span class="o">.</span><span class="n">token_selection_for_player</span><span class="p">]</span>
                <span class="p">)</span>
                <span class="n">border_color</span> <span class="o">=</span> <span class="n">AI_COLOR</span> <span class="k">if</span> <span class="n">is_selected</span> <span class="k">else</span> <span class="n">WHITE</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="n">is_selected</span> <span class="o">=</span> <span class="p">(</span>
                    <span class="n">i</span> <span class="o">==</span> <span class="bp">self</span><span class="o">.</span><span class="n">player_token_indices</span><span class="p">[</span><span class="bp">self</span><span class="o">.</span><span class="n">token_selection_for_player</span><span class="p">]</span>
                <span class="p">)</span>
                <span class="n">border_color</span> <span class="o">=</span> <span class="n">HUMAN_COLOR</span> <span class="k">if</span> <span class="n">is_selected</span> <span class="k">else</span> <span class="n">WHITE</span>

            <span class="n">pygame</span><span class="o">.</span><span class="n">draw</span><span class="o">.</span><span class="n">rect</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">screen</span><span class="p">,</span> <span class="n">border_color</span><span class="p">,</span> <span class="n">token_rect</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="n">border_radius</span><span class="o">=</span><span class="mi">5</span><span class="p">)</span>

            <span class="k">if</span> <span class="p">(</span>
                <span class="n">token_in_use</span>
                <span class="ow">and</span> <span class="ow">not</span> <span class="p">(</span>
                    <span class="bp">self</span><span class="o">.</span><span class="n">token_selection_is_ai</span>
                    <span class="ow">and</span> <span class="n">token_is_ai</span>
                    <span class="ow">and</span> <span class="n">token_user</span> <span class="o">==</span> <span class="bp">self</span><span class="o">.</span><span class="n">token_selection_for_player</span> <span class="o">+</span> <span class="mi">1</span>
                <span class="p">)</span>
                <span class="ow">and</span> <span class="ow">not</span> <span class="p">(</span>
                    <span class="ow">not</span> <span class="bp">self</span><span class="o">.</span><span class="n">token_selection_is_ai</span>
                    <span class="ow">and</span> <span class="ow">not</span> <span class="n">token_is_ai</span>
                    <span class="ow">and</span> <span class="n">token_user</span> <span class="o">==</span> <span class="bp">self</span><span class="o">.</span><span class="n">token_selection_for_player</span> <span class="o">+</span> <span class="mi">1</span>
                <span class="p">)</span>
            <span class="p">):</span>
                <span class="n">user_text</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">small_font</span><span class="o">.</span><span class="n">render</span><span class="p">(</span>
                    <span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="s1">&#39;AI&#39;</span><span class="w"> </span><span class="k">if</span><span class="w"> </span><span class="n">token_is_ai</span><span class="w"> </span><span class="k">else</span><span class="w"> </span><span class="s1">&#39;P&#39;</span><span class="si">}{</span><span class="n">token_user</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">,</span>
                    <span class="kc">True</span><span class="p">,</span>
                    <span class="n">AI_COLOR</span> <span class="k">if</span> <span class="n">token_is_ai</span> <span class="k">else</span> <span class="n">HUMAN_COLOR</span><span class="p">,</span>
                <span class="p">)</span>
                <span class="n">user_rect</span> <span class="o">=</span> <span class="n">user_text</span><span class="o">.</span><span class="n">get_rect</span><span class="p">(</span>
                    <span class="n">center</span><span class="o">=</span><span class="p">(</span><span class="n">x</span> <span class="o">+</span> <span class="n">token_size</span> <span class="o">//</span> <span class="mi">2</span><span class="p">,</span> <span class="n">y</span> <span class="o">+</span> <span class="n">token_size</span> <span class="o">+</span> <span class="mi">10</span><span class="p">)</span>
                <span class="p">)</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">screen</span><span class="o">.</span><span class="n">blit</span><span class="p">(</span><span class="n">user_text</span><span class="p">,</span> <span class="n">user_rect</span><span class="p">)</span>

            <span class="bp">self</span><span class="o">.</span><span class="n">token_selection_rects</span><span class="o">.</span><span class="n">append</span><span class="p">((</span><span class="n">token_rect</span><span class="p">,</span> <span class="n">i</span><span class="p">,</span> <span class="kc">True</span><span class="p">))</span>

        <span class="n">close_button_width</span> <span class="o">=</span> <span class="mi">100</span>
        <span class="n">close_button_height</span> <span class="o">=</span> <span class="mi">40</span>
        <span class="n">close_button_rect</span> <span class="o">=</span> <span class="n">pygame</span><span class="o">.</span><span class="n">Rect</span><span class="p">(</span>
            <span class="n">panel_x</span> <span class="o">+</span> <span class="p">(</span><span class="n">panel_width</span> <span class="o">-</span> <span class="n">close_button_width</span><span class="p">)</span> <span class="o">//</span> <span class="mi">2</span><span class="p">,</span>
            <span class="n">panel_y</span> <span class="o">+</span> <span class="n">panel_height</span> <span class="o">-</span> <span class="mi">60</span><span class="p">,</span>
            <span class="n">close_button_width</span><span class="p">,</span>
            <span class="n">close_button_height</span><span class="p">,</span>
        <span class="p">)</span>

        <span class="n">pygame</span><span class="o">.</span><span class="n">draw</span><span class="o">.</span><span class="n">rect</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">screen</span><span class="p">,</span> <span class="n">ACCENT_COLOR</span><span class="p">,</span> <span class="n">close_button_rect</span><span class="p">,</span> <span class="n">border_radius</span><span class="o">=</span><span class="mi">5</span><span class="p">)</span>
        <span class="n">close_text</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">small_font</span><span class="o">.</span><span class="n">render</span><span class="p">(</span><span class="s2">&quot;Close&quot;</span><span class="p">,</span> <span class="kc">True</span><span class="p">,</span> <span class="n">WHITE</span><span class="p">)</span>
        <span class="n">close_rect</span> <span class="o">=</span> <span class="n">close_text</span><span class="o">.</span><span class="n">get_rect</span><span class="p">(</span><span class="n">center</span><span class="o">=</span><span class="n">close_button_rect</span><span class="o">.</span><span class="n">center</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">screen</span><span class="o">.</span><span class="n">blit</span><span class="p">(</span><span class="n">close_text</span><span class="p">,</span> <span class="n">close_rect</span><span class="p">)</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">close_button_rect</span> <span class="o">=</span> <span class="n">close_button_rect</span></div>


<div class="viewcode-block" id="StartPage.handle_click">
<a class="viewcode-back" href="../../modules/ui.html#src.UI.StartPage.handle_click">[docs]</a>
    <span class="k">def</span><span class="w"> </span><span class="nf">handle_click</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">pos</span><span class="p">):</span>
        <span class="c1"># handle clicks on buttons and inputs</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">token_selection_active</span><span class="p">:</span>
            <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">handle_token_selection_click</span><span class="p">(</span><span class="n">pos</span><span class="p">)</span>

        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">start_button</span><span class="o">.</span><span class="n">check_hover</span><span class="p">(</span><span class="n">pos</span><span class="p">):</span>
            <span class="k">return</span> <span class="kc">True</span>

        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">back_button</span><span class="o">.</span><span class="n">check_hover</span><span class="p">(</span><span class="n">pos</span><span class="p">):</span>
            <span class="k">return</span> <span class="s2">&quot;back&quot;</span>

        <span class="c1"># check clicks on +/- buttons</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">human_minus_button</span><span class="o">.</span><span class="n">check_hover</span><span class="p">(</span><span class="n">pos</span><span class="p">)</span> <span class="ow">and</span> <span class="bp">self</span><span class="o">.</span><span class="n">human_count</span> <span class="o">&gt;</span> <span class="mi">1</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">human_count</span> <span class="o">-=</span> <span class="mi">1</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">active_input</span> <span class="o">=</span> <span class="o">-</span><span class="mi">1</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">update_player_lists</span><span class="p">()</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">total_players</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">human_count</span> <span class="o">+</span> <span class="bp">self</span><span class="o">.</span><span class="n">ai_count</span>
            <span class="k">return</span> <span class="kc">False</span>

        <span class="k">if</span> <span class="p">(</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">human_plus_button</span><span class="o">.</span><span class="n">check_hover</span><span class="p">(</span><span class="n">pos</span><span class="p">)</span>
            <span class="ow">and</span> <span class="bp">self</span><span class="o">.</span><span class="n">human_count</span> <span class="o">&lt;</span> <span class="mi">5</span>
            <span class="ow">and</span> <span class="bp">self</span><span class="o">.</span><span class="n">total_players</span> <span class="o">&lt;</span> <span class="mi">5</span>
        <span class="p">):</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">human_count</span> <span class="o">+=</span> <span class="mi">1</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">active_input</span> <span class="o">=</span> <span class="o">-</span><span class="mi">1</span>
            <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">player_names</span><span class="p">)</span> <span class="o">&lt;</span> <span class="bp">self</span><span class="o">.</span><span class="n">human_count</span><span class="p">:</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">player_names</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Human Player </span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">human_count</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">update_player_lists</span><span class="p">()</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">total_players</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">human_count</span> <span class="o">+</span> <span class="bp">self</span><span class="o">.</span><span class="n">ai_count</span>
            <span class="k">return</span> <span class="kc">False</span>

        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">ai_minus_button</span><span class="o">.</span><span class="n">check_hover</span><span class="p">(</span><span class="n">pos</span><span class="p">)</span> <span class="ow">and</span> <span class="bp">self</span><span class="o">.</span><span class="n">ai_count</span> <span class="o">&gt;</span> <span class="mi">0</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">ai_count</span> <span class="o">-=</span> <span class="mi">1</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">active_input</span> <span class="o">=</span> <span class="o">-</span><span class="mi">1</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">update_player_lists</span><span class="p">()</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">total_players</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">human_count</span> <span class="o">+</span> <span class="bp">self</span><span class="o">.</span><span class="n">ai_count</span>
            <span class="k">return</span> <span class="kc">False</span>

        <span class="k">if</span> <span class="p">(</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">ai_plus_button</span><span class="o">.</span><span class="n">check_hover</span><span class="p">(</span><span class="n">pos</span><span class="p">)</span>
            <span class="ow">and</span> <span class="bp">self</span><span class="o">.</span><span class="n">ai_count</span> <span class="o">&lt;</span> <span class="mi">4</span>
            <span class="ow">and</span> <span class="bp">self</span><span class="o">.</span><span class="n">total_players</span> <span class="o">&lt;</span> <span class="mi">5</span>
        <span class="p">):</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">ai_count</span> <span class="o">+=</span> <span class="mi">1</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">active_input</span> <span class="o">=</span> <span class="o">-</span><span class="mi">1</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">update_player_lists</span><span class="p">()</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">total_players</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">human_count</span> <span class="o">+</span> <span class="bp">self</span><span class="o">.</span><span class="n">ai_count</span>
            <span class="k">return</span> <span class="kc">False</span>

        <span class="c1"># check clicks on name input fields</span>
        <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">human_count</span><span class="p">):</span>
            <span class="n">rect</span> <span class="o">=</span> <span class="n">pygame</span><span class="o">.</span><span class="n">Rect</span><span class="p">(</span>
                <span class="p">(</span><span class="n">get_window_size</span><span class="p">()[</span><span class="mi">0</span><span class="p">]</span> <span class="o">-</span> <span class="mi">300</span><span class="p">)</span> <span class="o">//</span> <span class="mi">2</span><span class="p">,</span>
                <span class="p">(</span><span class="n">get_window_size</span><span class="p">()[</span><span class="mi">1</span><span class="p">]</span> <span class="o">//</span> <span class="mi">2</span> <span class="o">-</span> <span class="mi">50</span><span class="p">)</span> <span class="o">+</span> <span class="n">i</span> <span class="o">*</span> <span class="mi">50</span><span class="p">,</span>
                <span class="mi">300</span><span class="p">,</span>
                <span class="mi">50</span><span class="p">,</span>
            <span class="p">)</span>

            <span class="k">if</span> <span class="n">rect</span><span class="o">.</span><span class="n">collidepoint</span><span class="p">(</span><span class="n">pos</span><span class="p">):</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">active_input</span> <span class="o">=</span> <span class="n">i</span>
                <span class="k">return</span> <span class="kc">False</span>

        <span class="c1"># check clicks on ai name placeholders (no editing here)</span>
        <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">ai_count</span><span class="p">):</span>
            <span class="n">ai_input_rect</span> <span class="o">=</span> <span class="n">pygame</span><span class="o">.</span><span class="n">Rect</span><span class="p">(</span>
                <span class="p">(</span><span class="n">get_window_size</span><span class="p">()[</span><span class="mi">0</span><span class="p">]</span> <span class="o">-</span> <span class="mi">300</span><span class="p">)</span> <span class="o">//</span> <span class="mi">2</span><span class="p">,</span>
                <span class="p">(</span><span class="n">get_window_size</span><span class="p">()[</span><span class="mi">1</span><span class="p">]</span> <span class="o">//</span> <span class="mi">2</span> <span class="o">-</span> <span class="mi">50</span><span class="p">)</span> <span class="o">+</span> <span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">human_count</span> <span class="o">+</span> <span class="n">i</span><span class="p">)</span> <span class="o">*</span> <span class="mi">50</span><span class="p">,</span>
                <span class="mi">300</span><span class="p">,</span>
                <span class="mi">50</span><span class="p">,</span>
            <span class="p">)</span>

            <span class="k">if</span> <span class="n">ai_input_rect</span><span class="o">.</span><span class="n">collidepoint</span><span class="p">(</span><span class="n">pos</span><span class="p">):</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">active_input</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">human_count</span> <span class="o">+</span> <span class="n">i</span>
                <span class="k">return</span> <span class="kc">False</span>

        <span class="c1"># check clicks on token icons to open selection popup</span>
        <span class="k">for</span> <span class="n">rect</span><span class="p">,</span> <span class="n">player_idx</span><span class="p">,</span> <span class="n">is_ai</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">token_button_rects</span><span class="p">:</span>
            <span class="k">if</span> <span class="n">rect</span><span class="o">.</span><span class="n">collidepoint</span><span class="p">(</span><span class="n">pos</span><span class="p">):</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">token_selection_active</span> <span class="o">=</span> <span class="kc">True</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">token_selection_for_player</span> <span class="o">=</span> <span class="n">player_idx</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">token_selection_is_ai</span> <span class="o">=</span> <span class="n">is_ai</span>
                <span class="k">return</span> <span class="kc">False</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">active_input</span> <span class="o">=</span> <span class="o">-</span><span class="mi">1</span>
        <span class="k">return</span> <span class="kc">False</span></div>


<div class="viewcode-block" id="StartPage.handle_token_selection_click">
<a class="viewcode-back" href="../../modules/ui.html#src.UI.StartPage.handle_token_selection_click">[docs]</a>
    <span class="k">def</span><span class="w"> </span><span class="nf">handle_token_selection_click</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">pos</span><span class="p">):</span>
        <span class="c1"># handle clicks within the token selection popup</span>
        <span class="k">if</span> <span class="nb">hasattr</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="s2">&quot;close_button_rect&quot;</span><span class="p">)</span> <span class="ow">and</span> <span class="bp">self</span><span class="o">.</span><span class="n">close_button_rect</span><span class="o">.</span><span class="n">collidepoint</span><span class="p">(</span>
            <span class="n">pos</span>
        <span class="p">):</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">token_selection_active</span> <span class="o">=</span> <span class="kc">False</span>
            <span class="k">return</span> <span class="kc">False</span>

        <span class="k">for</span> <span class="n">rect</span><span class="p">,</span> <span class="n">token_idx</span><span class="p">,</span> <span class="n">available</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">token_selection_rects</span><span class="p">:</span>
            <span class="k">if</span> <span class="n">rect</span><span class="o">.</span><span class="n">collidepoint</span><span class="p">(</span><span class="n">pos</span><span class="p">):</span>
                <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">token_selection_is_ai</span><span class="p">:</span>
                    <span class="k">for</span> <span class="n">i</span><span class="p">,</span> <span class="n">human_token</span> <span class="ow">in</span> <span class="nb">enumerate</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">player_token_indices</span><span class="p">):</span>
                        <span class="k">if</span> <span class="n">human_token</span> <span class="o">==</span> <span class="n">token_idx</span><span class="p">:</span>
                            <span class="bp">self</span><span class="o">.</span><span class="n">player_token_indices</span><span class="p">[</span><span class="n">i</span><span class="p">]</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">ai_token_indices</span><span class="p">[</span>
                                <span class="bp">self</span><span class="o">.</span><span class="n">token_selection_for_player</span>
                            <span class="p">]</span>
                            <span class="bp">self</span><span class="o">.</span><span class="n">ai_token_indices</span><span class="p">[</span><span class="bp">self</span><span class="o">.</span><span class="n">token_selection_for_player</span><span class="p">]</span> <span class="o">=</span> <span class="p">(</span>
                                <span class="n">token_idx</span>
                            <span class="p">)</span>
                            <span class="bp">self</span><span class="o">.</span><span class="n">token_selection_active</span> <span class="o">=</span> <span class="kc">False</span>
                            <span class="k">return</span> <span class="kc">False</span>

                    <span class="k">for</span> <span class="n">i</span><span class="p">,</span> <span class="n">ai_token</span> <span class="ow">in</span> <span class="nb">enumerate</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">ai_token_indices</span><span class="p">):</span>
                        <span class="k">if</span> <span class="p">(</span>
                            <span class="n">ai_token</span> <span class="o">==</span> <span class="n">token_idx</span>
                            <span class="ow">and</span> <span class="n">i</span> <span class="o">!=</span> <span class="bp">self</span><span class="o">.</span><span class="n">token_selection_for_player</span>
                        <span class="p">):</span>
                            <span class="bp">self</span><span class="o">.</span><span class="n">ai_token_indices</span><span class="p">[</span><span class="n">i</span><span class="p">]</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">ai_token_indices</span><span class="p">[</span>
                                <span class="bp">self</span><span class="o">.</span><span class="n">token_selection_for_player</span>
                            <span class="p">]</span>
                            <span class="bp">self</span><span class="o">.</span><span class="n">ai_token_indices</span><span class="p">[</span><span class="bp">self</span><span class="o">.</span><span class="n">token_selection_for_player</span><span class="p">]</span> <span class="o">=</span> <span class="p">(</span>
                                <span class="n">token_idx</span>
                            <span class="p">)</span>
                            <span class="bp">self</span><span class="o">.</span><span class="n">token_selection_active</span> <span class="o">=</span> <span class="kc">False</span>
                            <span class="k">return</span> <span class="kc">False</span>

                    <span class="bp">self</span><span class="o">.</span><span class="n">ai_token_indices</span><span class="p">[</span><span class="bp">self</span><span class="o">.</span><span class="n">token_selection_for_player</span><span class="p">]</span> <span class="o">=</span> <span class="n">token_idx</span>
                <span class="k">else</span><span class="p">:</span>
                    <span class="k">for</span> <span class="n">i</span><span class="p">,</span> <span class="n">ai_token</span> <span class="ow">in</span> <span class="nb">enumerate</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">ai_token_indices</span><span class="p">):</span>
                        <span class="k">if</span> <span class="n">ai_token</span> <span class="o">==</span> <span class="n">token_idx</span><span class="p">:</span>
                            <span class="bp">self</span><span class="o">.</span><span class="n">ai_token_indices</span><span class="p">[</span><span class="n">i</span><span class="p">]</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">player_token_indices</span><span class="p">[</span>
                                <span class="bp">self</span><span class="o">.</span><span class="n">token_selection_for_player</span>
                            <span class="p">]</span>
                            <span class="bp">self</span><span class="o">.</span><span class="n">player_token_indices</span><span class="p">[</span>
                                <span class="bp">self</span><span class="o">.</span><span class="n">token_selection_for_player</span>
                            <span class="p">]</span> <span class="o">=</span> <span class="n">token_idx</span>
                            <span class="bp">self</span><span class="o">.</span><span class="n">token_selection_active</span> <span class="o">=</span> <span class="kc">False</span>
                            <span class="k">return</span> <span class="kc">False</span>

                    <span class="k">for</span> <span class="n">i</span><span class="p">,</span> <span class="n">human_token</span> <span class="ow">in</span> <span class="nb">enumerate</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">player_token_indices</span><span class="p">):</span>
                        <span class="k">if</span> <span class="p">(</span>
                            <span class="n">human_token</span> <span class="o">==</span> <span class="n">token_idx</span>
                            <span class="ow">and</span> <span class="n">i</span> <span class="o">!=</span> <span class="bp">self</span><span class="o">.</span><span class="n">token_selection_for_player</span>
                        <span class="p">):</span>
                            <span class="bp">self</span><span class="o">.</span><span class="n">player_token_indices</span><span class="p">[</span><span class="n">i</span><span class="p">]</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">player_token_indices</span><span class="p">[</span>
                                <span class="bp">self</span><span class="o">.</span><span class="n">token_selection_for_player</span>
                            <span class="p">]</span>
                            <span class="bp">self</span><span class="o">.</span><span class="n">player_token_indices</span><span class="p">[</span>
                                <span class="bp">self</span><span class="o">.</span><span class="n">token_selection_for_player</span>
                            <span class="p">]</span> <span class="o">=</span> <span class="n">token_idx</span>
                            <span class="bp">self</span><span class="o">.</span><span class="n">token_selection_active</span> <span class="o">=</span> <span class="kc">False</span>
                            <span class="k">return</span> <span class="kc">False</span>

                    <span class="bp">self</span><span class="o">.</span><span class="n">player_token_indices</span><span class="p">[</span><span class="bp">self</span><span class="o">.</span><span class="n">token_selection_for_player</span><span class="p">]</span> <span class="o">=</span> <span class="p">(</span>
                        <span class="n">token_idx</span>
                    <span class="p">)</span>

                <span class="bp">self</span><span class="o">.</span><span class="n">token_selection_active</span> <span class="o">=</span> <span class="kc">False</span>
                <span class="k">return</span> <span class="kc">False</span>

        <span class="k">return</span> <span class="kc">False</span></div>


<div class="viewcode-block" id="StartPage.handle_motion">
<a class="viewcode-back" href="../../modules/ui.html#src.UI.StartPage.handle_motion">[docs]</a>
    <span class="k">def</span><span class="w"> </span><span class="nf">handle_motion</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">pos</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">human_minus_button</span><span class="o">.</span><span class="n">check_hover</span><span class="p">(</span><span class="n">pos</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">human_plus_button</span><span class="o">.</span><span class="n">check_hover</span><span class="p">(</span><span class="n">pos</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">ai_minus_button</span><span class="o">.</span><span class="n">check_hover</span><span class="p">(</span><span class="n">pos</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">ai_plus_button</span><span class="o">.</span><span class="n">check_hover</span><span class="p">(</span><span class="n">pos</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">start_button</span><span class="o">.</span><span class="n">check_hover</span><span class="p">(</span><span class="n">pos</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">back_button</span><span class="o">.</span><span class="n">check_hover</span><span class="p">(</span><span class="n">pos</span><span class="p">)</span></div>


<div class="viewcode-block" id="StartPage.handle_key">
<a class="viewcode-back" href="../../modules/ui.html#src.UI.StartPage.handle_key">[docs]</a>
    <span class="k">def</span><span class="w"> </span><span class="nf">handle_key</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">event</span><span class="p">):</span>
        <span class="c1"># handle keyboard input for navigation and text entry</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">token_selection_active</span><span class="p">:</span>
            <span class="k">if</span> <span class="n">event</span><span class="o">.</span><span class="n">key</span> <span class="o">==</span> <span class="n">pygame</span><span class="o">.</span><span class="n">K_ESCAPE</span><span class="p">:</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">token_selection_active</span> <span class="o">=</span> <span class="kc">False</span>
            <span class="k">elif</span> <span class="n">event</span><span class="o">.</span><span class="n">key</span> <span class="o">==</span> <span class="n">pygame</span><span class="o">.</span><span class="n">K_LEFT</span><span class="p">:</span>
                <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">token_selection_for_player</span> <span class="o">&gt;=</span> <span class="mi">0</span><span class="p">:</span>
                    <span class="n">current_indices</span> <span class="o">=</span> <span class="p">(</span>
                        <span class="bp">self</span><span class="o">.</span><span class="n">player_token_indices</span>
                        <span class="k">if</span> <span class="ow">not</span> <span class="bp">self</span><span class="o">.</span><span class="n">token_selection_is_ai</span>
                        <span class="k">else</span> <span class="bp">self</span><span class="o">.</span><span class="n">ai_token_indices</span>
                    <span class="p">)</span>
                    <span class="n">current_idx</span> <span class="o">=</span> <span class="n">current_indices</span><span class="p">[</span><span class="bp">self</span><span class="o">.</span><span class="n">token_selection_for_player</span><span class="p">]</span>
                    <span class="n">used_indices</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">player_token_indices</span> <span class="o">+</span> <span class="bp">self</span><span class="o">.</span><span class="n">ai_token_indices</span>
                    <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="n">current_idx</span> <span class="o">-</span> <span class="mi">1</span><span class="p">,</span> <span class="o">-</span><span class="mi">1</span><span class="p">,</span> <span class="o">-</span><span class="mi">1</span><span class="p">):</span>
                        <span class="k">if</span> <span class="n">i</span> <span class="ow">not</span> <span class="ow">in</span> <span class="n">used_indices</span> <span class="ow">or</span> <span class="n">i</span> <span class="o">==</span> <span class="n">current_idx</span><span class="p">:</span>
                            <span class="k">if</span> <span class="ow">not</span> <span class="bp">self</span><span class="o">.</span><span class="n">token_selection_is_ai</span><span class="p">:</span>
                                <span class="bp">self</span><span class="o">.</span><span class="n">player_token_indices</span><span class="p">[</span>
                                    <span class="bp">self</span><span class="o">.</span><span class="n">token_selection_for_player</span>
                                <span class="p">]</span> <span class="o">=</span> <span class="n">i</span>
                            <span class="k">else</span><span class="p">:</span>
                                <span class="bp">self</span><span class="o">.</span><span class="n">ai_token_indices</span><span class="p">[</span>
                                    <span class="bp">self</span><span class="o">.</span><span class="n">token_selection_for_player</span>
                                <span class="p">]</span> <span class="o">=</span> <span class="n">i</span>
                            <span class="k">break</span>
            <span class="k">elif</span> <span class="n">event</span><span class="o">.</span><span class="n">key</span> <span class="o">==</span> <span class="n">pygame</span><span class="o">.</span><span class="n">K_RIGHT</span><span class="p">:</span>
                <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">token_selection_for_player</span> <span class="o">&gt;=</span> <span class="mi">0</span><span class="p">:</span>
                    <span class="n">current_indices</span> <span class="o">=</span> <span class="p">(</span>
                        <span class="bp">self</span><span class="o">.</span><span class="n">player_token_indices</span>
                        <span class="k">if</span> <span class="ow">not</span> <span class="bp">self</span><span class="o">.</span><span class="n">token_selection_is_ai</span>
                        <span class="k">else</span> <span class="bp">self</span><span class="o">.</span><span class="n">ai_token_indices</span>
                    <span class="p">)</span>
                    <span class="n">current_idx</span> <span class="o">=</span> <span class="n">current_indices</span><span class="p">[</span><span class="bp">self</span><span class="o">.</span><span class="n">token_selection_for_player</span><span class="p">]</span>
                    <span class="n">used_indices</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">player_token_indices</span> <span class="o">+</span> <span class="bp">self</span><span class="o">.</span><span class="n">ai_token_indices</span>
                    <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="n">current_idx</span> <span class="o">+</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">6</span><span class="p">):</span>
                        <span class="k">if</span> <span class="n">i</span> <span class="ow">not</span> <span class="ow">in</span> <span class="n">used_indices</span> <span class="ow">or</span> <span class="n">i</span> <span class="o">==</span> <span class="n">current_idx</span><span class="p">:</span>
                            <span class="k">if</span> <span class="ow">not</span> <span class="bp">self</span><span class="o">.</span><span class="n">token_selection_is_ai</span><span class="p">:</span>
                                <span class="bp">self</span><span class="o">.</span><span class="n">player_token_indices</span><span class="p">[</span>
                                    <span class="bp">self</span><span class="o">.</span><span class="n">token_selection_for_player</span>
                                <span class="p">]</span> <span class="o">=</span> <span class="n">i</span>
                            <span class="k">else</span><span class="p">:</span>
                                <span class="bp">self</span><span class="o">.</span><span class="n">ai_token_indices</span><span class="p">[</span>
                                    <span class="bp">self</span><span class="o">.</span><span class="n">token_selection_for_player</span>
                                <span class="p">]</span> <span class="o">=</span> <span class="n">i</span>
                            <span class="k">break</span>
            <span class="k">elif</span> <span class="n">event</span><span class="o">.</span><span class="n">key</span> <span class="o">==</span> <span class="n">pygame</span><span class="o">.</span><span class="n">K_RETURN</span><span class="p">:</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">token_selection_active</span> <span class="o">=</span> <span class="kc">False</span>
            <span class="k">return</span> <span class="kc">False</span>

        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">active_input</span> <span class="o">&gt;=</span> <span class="mi">0</span><span class="p">:</span>
            <span class="k">if</span> <span class="n">event</span><span class="o">.</span><span class="n">key</span> <span class="o">==</span> <span class="n">pygame</span><span class="o">.</span><span class="n">K_RETURN</span><span class="p">:</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">active_input</span> <span class="o">=</span> <span class="o">-</span><span class="mi">1</span>
            <span class="k">elif</span> <span class="n">event</span><span class="o">.</span><span class="n">key</span> <span class="o">==</span> <span class="n">pygame</span><span class="o">.</span><span class="n">K_BACKSPACE</span><span class="p">:</span>
                <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">active_input</span> <span class="o">&lt;</span> <span class="bp">self</span><span class="o">.</span><span class="n">human_count</span><span class="p">:</span>
                    <span class="n">name</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">player_names</span><span class="p">[</span><span class="bp">self</span><span class="o">.</span><span class="n">active_input</span><span class="p">]</span>
                    <span class="bp">self</span><span class="o">.</span><span class="n">player_names</span><span class="p">[</span><span class="bp">self</span><span class="o">.</span><span class="n">active_input</span><span class="p">]</span> <span class="o">=</span> <span class="p">(</span>
                        <span class="n">name</span><span class="p">[:</span><span class="o">-</span><span class="mi">1</span><span class="p">]</span> <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">name</span><span class="p">)</span> <span class="o">&gt;</span> <span class="mi">0</span> <span class="k">else</span> <span class="s2">&quot;&quot;</span>
                    <span class="p">)</span>
                <span class="k">else</span><span class="p">:</span>
                    <span class="n">ai_idx</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">active_input</span> <span class="o">-</span> <span class="bp">self</span><span class="o">.</span><span class="n">human_count</span>
                    <span class="n">name</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">ai_names</span><span class="p">[</span><span class="n">ai_idx</span><span class="p">]</span>
                    <span class="bp">self</span><span class="o">.</span><span class="n">ai_names</span><span class="p">[</span><span class="n">ai_idx</span><span class="p">]</span> <span class="o">=</span> <span class="n">name</span><span class="p">[:</span><span class="o">-</span><span class="mi">1</span><span class="p">]</span> <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">name</span><span class="p">)</span> <span class="o">&gt;</span> <span class="mi">0</span> <span class="k">else</span> <span class="s2">&quot;&quot;</span>
            <span class="k">elif</span> <span class="n">event</span><span class="o">.</span><span class="n">key</span> <span class="o">==</span> <span class="n">pygame</span><span class="o">.</span><span class="n">K_TAB</span><span class="p">:</span>
                <span class="k">if</span> <span class="n">event</span><span class="o">.</span><span class="n">mod</span> <span class="o">&amp;</span> <span class="n">pygame</span><span class="o">.</span><span class="n">KMOD_SHIFT</span><span class="p">:</span>
                    <span class="bp">self</span><span class="o">.</span><span class="n">active_input</span> <span class="o">=</span> <span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">active_input</span> <span class="o">-</span> <span class="mi">1</span><span class="p">)</span> <span class="o">%</span> <span class="p">(</span>
                        <span class="bp">self</span><span class="o">.</span><span class="n">human_count</span> <span class="o">+</span> <span class="bp">self</span><span class="o">.</span><span class="n">ai_count</span>
                    <span class="p">)</span>
                <span class="k">else</span><span class="p">:</span>
                    <span class="bp">self</span><span class="o">.</span><span class="n">active_input</span> <span class="o">=</span> <span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">active_input</span> <span class="o">+</span> <span class="mi">1</span><span class="p">)</span> <span class="o">%</span> <span class="p">(</span>
                        <span class="bp">self</span><span class="o">.</span><span class="n">human_count</span> <span class="o">+</span> <span class="bp">self</span><span class="o">.</span><span class="n">ai_count</span>
                    <span class="p">)</span>
            <span class="k">elif</span> <span class="n">event</span><span class="o">.</span><span class="n">key</span> <span class="o">==</span> <span class="n">pygame</span><span class="o">.</span><span class="n">K_UP</span><span class="p">:</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">active_input</span> <span class="o">=</span> <span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">active_input</span> <span class="o">-</span> <span class="mi">1</span><span class="p">)</span> <span class="o">%</span> <span class="p">(</span>
                    <span class="bp">self</span><span class="o">.</span><span class="n">human_count</span> <span class="o">+</span> <span class="bp">self</span><span class="o">.</span><span class="n">ai_count</span>
                <span class="p">)</span>
            <span class="k">elif</span> <span class="n">event</span><span class="o">.</span><span class="n">key</span> <span class="o">==</span> <span class="n">pygame</span><span class="o">.</span><span class="n">K_DOWN</span><span class="p">:</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">active_input</span> <span class="o">=</span> <span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">active_input</span> <span class="o">+</span> <span class="mi">1</span><span class="p">)</span> <span class="o">%</span> <span class="p">(</span>
                    <span class="bp">self</span><span class="o">.</span><span class="n">human_count</span> <span class="o">+</span> <span class="bp">self</span><span class="o">.</span><span class="n">ai_count</span>
                <span class="p">)</span>
            <span class="k">elif</span> <span class="n">event</span><span class="o">.</span><span class="n">key</span> <span class="o">==</span> <span class="n">pygame</span><span class="o">.</span><span class="n">K_ESCAPE</span><span class="p">:</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">active_input</span> <span class="o">=</span> <span class="o">-</span><span class="mi">1</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">active_input</span> <span class="o">&lt;</span> <span class="bp">self</span><span class="o">.</span><span class="n">human_count</span><span class="p">:</span>
                    <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">player_names</span><span class="p">[</span><span class="bp">self</span><span class="o">.</span><span class="n">active_input</span><span class="p">])</span> <span class="o">&lt;</span> <span class="mi">15</span><span class="p">:</span>
                        <span class="bp">self</span><span class="o">.</span><span class="n">player_names</span><span class="p">[</span><span class="bp">self</span><span class="o">.</span><span class="n">active_input</span><span class="p">]</span> <span class="o">+=</span> <span class="n">event</span><span class="o">.</span><span class="n">unicode</span>
                <span class="k">else</span><span class="p">:</span>
                    <span class="n">ai_idx</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">active_input</span> <span class="o">-</span> <span class="bp">self</span><span class="o">.</span><span class="n">human_count</span>
                    <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">ai_names</span><span class="p">[</span><span class="n">ai_idx</span><span class="p">])</span> <span class="o">&lt;</span> <span class="mi">15</span><span class="p">:</span>
                        <span class="bp">self</span><span class="o">.</span><span class="n">ai_names</span><span class="p">[</span><span class="n">ai_idx</span><span class="p">]</span> <span class="o">+=</span> <span class="n">event</span><span class="o">.</span><span class="n">unicode</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="k">if</span> <span class="n">event</span><span class="o">.</span><span class="n">key</span> <span class="o">==</span> <span class="n">pygame</span><span class="o">.</span><span class="n">K_h</span><span class="p">:</span>
                <span class="k">if</span> <span class="p">(</span>
                    <span class="n">event</span><span class="o">.</span><span class="n">mod</span> <span class="o">&amp;</span> <span class="n">pygame</span><span class="o">.</span><span class="n">KMOD_SHIFT</span>
                    <span class="ow">and</span> <span class="bp">self</span><span class="o">.</span><span class="n">human_count</span> <span class="o">&lt;</span> <span class="mi">5</span>
                    <span class="ow">and</span> <span class="bp">self</span><span class="o">.</span><span class="n">total_players</span> <span class="o">&lt;</span> <span class="mi">5</span>
                <span class="p">):</span>
                    <span class="bp">self</span><span class="o">.</span><span class="n">human_count</span> <span class="o">+=</span> <span class="mi">1</span>
                    <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">player_names</span><span class="p">)</span> <span class="o">&lt;</span> <span class="bp">self</span><span class="o">.</span><span class="n">human_count</span><span class="p">:</span>
                        <span class="bp">self</span><span class="o">.</span><span class="n">player_names</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Human Player </span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">human_count</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
                    <span class="bp">self</span><span class="o">.</span><span class="n">update_player_lists</span><span class="p">()</span>
                <span class="k">elif</span> <span class="bp">self</span><span class="o">.</span><span class="n">human_count</span> <span class="o">&gt;</span> <span class="mi">1</span><span class="p">:</span>
                    <span class="bp">self</span><span class="o">.</span><span class="n">human_count</span> <span class="o">-=</span> <span class="mi">1</span>
                    <span class="bp">self</span><span class="o">.</span><span class="n">update_player_lists</span><span class="p">()</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">total_players</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">human_count</span> <span class="o">+</span> <span class="bp">self</span><span class="o">.</span><span class="n">ai_count</span>

            <span class="k">elif</span> <span class="n">event</span><span class="o">.</span><span class="n">key</span> <span class="o">==</span> <span class="n">pygame</span><span class="o">.</span><span class="n">K_a</span><span class="p">:</span>
                <span class="k">if</span> <span class="p">(</span>
                    <span class="n">event</span><span class="o">.</span><span class="n">mod</span> <span class="o">&amp;</span> <span class="n">pygame</span><span class="o">.</span><span class="n">KMOD_SHIFT</span>
                    <span class="ow">and</span> <span class="bp">self</span><span class="o">.</span><span class="n">ai_count</span> <span class="o">&lt;</span> <span class="mi">4</span>
                    <span class="ow">and</span> <span class="bp">self</span><span class="o">.</span><span class="n">total_players</span> <span class="o">&lt;</span> <span class="mi">5</span>
                <span class="p">):</span>
                    <span class="bp">self</span><span class="o">.</span><span class="n">ai_count</span> <span class="o">+=</span> <span class="mi">1</span>
                    <span class="bp">self</span><span class="o">.</span><span class="n">update_player_lists</span><span class="p">()</span>
                <span class="k">elif</span> <span class="bp">self</span><span class="o">.</span><span class="n">ai_count</span> <span class="o">&gt;</span> <span class="mi">0</span><span class="p">:</span>
                    <span class="bp">self</span><span class="o">.</span><span class="n">ai_count</span> <span class="o">-=</span> <span class="mi">1</span>
                    <span class="bp">self</span><span class="o">.</span><span class="n">update_player_lists</span><span class="p">()</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">total_players</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">human_count</span> <span class="o">+</span> <span class="bp">self</span><span class="o">.</span><span class="n">ai_count</span>

            <span class="k">elif</span> <span class="n">event</span><span class="o">.</span><span class="n">key</span> <span class="o">==</span> <span class="n">pygame</span><span class="o">.</span><span class="n">K_t</span><span class="p">:</span>
                <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">human_count</span> <span class="o">&gt;</span> <span class="mi">0</span><span class="p">:</span>
                    <span class="bp">self</span><span class="o">.</span><span class="n">token_selection_active</span> <span class="o">=</span> <span class="kc">True</span>
                    <span class="bp">self</span><span class="o">.</span><span class="n">token_selection_for_player</span> <span class="o">=</span> <span class="mi">0</span>
                    <span class="bp">self</span><span class="o">.</span><span class="n">token_selection_is_ai</span> <span class="o">=</span> <span class="kc">False</span>

            <span class="k">elif</span> <span class="n">event</span><span class="o">.</span><span class="n">key</span> <span class="o">==</span> <span class="n">pygame</span><span class="o">.</span><span class="n">K_SPACE</span> <span class="ow">or</span> <span class="n">event</span><span class="o">.</span><span class="n">key</span> <span class="o">==</span> <span class="n">pygame</span><span class="o">.</span><span class="n">K_RETURN</span><span class="p">:</span>
                <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">start_button</span><span class="o">.</span><span class="n">active</span><span class="p">:</span>
                    <span class="k">return</span> <span class="kc">True</span>

            <span class="k">elif</span> <span class="n">event</span><span class="o">.</span><span class="n">key</span> <span class="o">==</span> <span class="n">pygame</span><span class="o">.</span><span class="n">K_ESCAPE</span><span class="p">:</span>
                <span class="k">return</span> <span class="s2">&quot;back&quot;</span>
        <span class="k">return</span> <span class="kc">False</span></div>


<div class="viewcode-block" id="StartPage.get_player_info">
<a class="viewcode-back" href="../../modules/ui.html#src.UI.StartPage.get_player_info">[docs]</a>
    <span class="k">def</span><span class="w"> </span><span class="nf">get_player_info</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="c1"># return the final player setup details</span>
        <span class="n">all_names</span> <span class="o">=</span> <span class="p">(</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">player_names</span><span class="p">[:</span> <span class="bp">self</span><span class="o">.</span><span class="n">human_count</span><span class="p">]</span> <span class="o">+</span> <span class="bp">self</span><span class="o">.</span><span class="n">ai_names</span><span class="p">[:</span> <span class="bp">self</span><span class="o">.</span><span class="n">ai_count</span><span class="p">]</span>
        <span class="p">)</span>
        <span class="k">return</span> <span class="p">(</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">total_players</span><span class="p">,</span>
            <span class="n">all_names</span><span class="p">,</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">ai_count</span><span class="p">,</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">player_token_indices</span> <span class="o">+</span> <span class="bp">self</span><span class="o">.</span><span class="n">ai_token_indices</span><span class="p">,</span>
        <span class="p">)</span></div>
</div>



<div class="viewcode-block" id="PlayerSelectPage">
<a class="viewcode-back" href="../../modules/ui.html#src.UI.PlayerSelectPage">[docs]</a>
<span class="k">class</span><span class="w"> </span><span class="nc">PlayerSelectPage</span><span class="p">(</span><span class="n">BasePage</span><span class="p">):</span>
    <span class="k">def</span><span class="w"> </span><span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="nb">super</span><span class="p">()</span><span class="o">.</span><span class="fm">__init__</span><span class="p">()</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">input_font</span> <span class="o">=</span> <span class="n">font_manager</span><span class="o">.</span><span class="n">get_font</span><span class="p">(</span><span class="mi">36</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">small_font</span> <span class="o">=</span> <span class="n">font_manager</span><span class="o">.</span><span class="n">get_font</span><span class="p">(</span><span class="mi">24</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">selected_element</span> <span class="o">=</span> <span class="mi">0</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">active_input</span> <span class="o">=</span> <span class="o">-</span><span class="mi">1</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">player_count</span> <span class="o">=</span> <span class="mi">2</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">player_names</span> <span class="o">=</span> <span class="p">[</span><span class="s2">&quot;&quot;</span> <span class="k">for</span> <span class="n">_</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">5</span><span class="p">)]</span>

        <span class="n">input_width</span> <span class="o">=</span> <span class="mi">300</span>
        <span class="n">input_height</span> <span class="o">=</span> <span class="mi">50</span>
        <span class="n">input_y_start</span> <span class="o">=</span> <span class="n">get_window_size</span><span class="p">()[</span><span class="mi">1</span><span class="p">]</span> <span class="o">//</span> <span class="mi">2</span> <span class="o">-</span> <span class="mi">100</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">name_inputs</span> <span class="o">=</span> <span class="p">[]</span>
        <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">5</span><span class="p">):</span>
            <span class="n">input_rect</span> <span class="o">=</span> <span class="n">pygame</span><span class="o">.</span><span class="n">Rect</span><span class="p">(</span>
                <span class="p">(</span><span class="n">get_window_size</span><span class="p">()[</span><span class="mi">0</span><span class="p">]</span> <span class="o">-</span> <span class="n">input_width</span><span class="p">)</span> <span class="o">//</span> <span class="mi">2</span><span class="p">,</span>
                <span class="n">input_y_start</span> <span class="o">+</span> <span class="n">i</span> <span class="o">*</span> <span class="mi">70</span><span class="p">,</span>
                <span class="n">input_width</span><span class="p">,</span>
                <span class="n">input_height</span><span class="p">,</span>
            <span class="p">)</span>
            <span class="n">input_field</span> <span class="o">=</span> <span class="n">UIInput</span><span class="p">(</span><span class="n">input_rect</span><span class="p">,</span> <span class="s2">&quot;&quot;</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">input_font</span><span class="p">)</span>
            <span class="n">input_field</span><span class="o">.</span><span class="n">placeholder</span> <span class="o">=</span> <span class="sa">f</span><span class="s2">&quot;Enter Player </span><span class="si">{</span><span class="n">i</span><span class="o">+</span><span class="mi">1</span><span class="si">}</span><span class="s2"> name...&quot;</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">name_inputs</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">input_field</span><span class="p">)</span>

        <span class="n">count_x_offset</span> <span class="o">=</span> <span class="mi">250</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">minus_button</span> <span class="o">=</span> <span class="n">UIButton</span><span class="p">(</span>
            <span class="n">pygame</span><span class="o">.</span><span class="n">Rect</span><span class="p">(</span>
                <span class="n">get_window_size</span><span class="p">()[</span><span class="mi">0</span><span class="p">]</span> <span class="o">//</span> <span class="mi">2</span> <span class="o">-</span> <span class="n">count_x_offset</span><span class="p">,</span> <span class="n">input_y_start</span> <span class="o">-</span> <span class="mi">80</span><span class="p">,</span> <span class="mi">50</span><span class="p">,</span> <span class="mi">50</span>
            <span class="p">),</span>
            <span class="s2">&quot;-&quot;</span><span class="p">,</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">button_font</span><span class="p">,</span>
        <span class="p">)</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">plus_button</span> <span class="o">=</span> <span class="n">UIButton</span><span class="p">(</span>
            <span class="n">pygame</span><span class="o">.</span><span class="n">Rect</span><span class="p">(</span>
                <span class="n">get_window_size</span><span class="p">()[</span><span class="mi">0</span><span class="p">]</span> <span class="o">//</span> <span class="mi">2</span> <span class="o">+</span> <span class="n">count_x_offset</span> <span class="o">-</span> <span class="mi">50</span><span class="p">,</span>
                <span class="n">input_y_start</span> <span class="o">-</span> <span class="mi">80</span><span class="p">,</span>
                <span class="mi">50</span><span class="p">,</span>
                <span class="mi">50</span><span class="p">,</span>
            <span class="p">),</span>
            <span class="s2">&quot;+&quot;</span><span class="p">,</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">button_font</span><span class="p">,</span>
        <span class="p">)</span>

        <span class="n">button_width</span> <span class="o">=</span> <span class="mi">300</span>
        <span class="n">button_height</span> <span class="o">=</span> <span class="mi">60</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">continue_button</span> <span class="o">=</span> <span class="n">UIButton</span><span class="p">(</span>
            <span class="n">pygame</span><span class="o">.</span><span class="n">Rect</span><span class="p">(</span>
                <span class="p">(</span><span class="n">get_window_size</span><span class="p">()[</span><span class="mi">0</span><span class="p">]</span> <span class="o">-</span> <span class="n">button_width</span><span class="p">)</span> <span class="o">//</span> <span class="mi">2</span><span class="p">,</span>
                <span class="n">get_window_size</span><span class="p">()[</span><span class="mi">1</span><span class="p">]</span> <span class="o">-</span> <span class="mi">120</span><span class="p">,</span>
                <span class="n">button_width</span><span class="p">,</span>
                <span class="n">button_height</span><span class="p">,</span>
            <span class="p">),</span>
            <span class="s2">&quot;Continue&quot;</span><span class="p">,</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">button_font</span><span class="p">,</span>
        <span class="p">)</span>

<div class="viewcode-block" id="PlayerSelectPage.draw">
<a class="viewcode-back" href="../../modules/ui.html#src.UI.PlayerSelectPage.draw">[docs]</a>
    <span class="k">def</span><span class="w"> </span><span class="nf">draw</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">draw_background</span><span class="p">()</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">draw_title</span><span class="p">()</span>

        <span class="n">section_title</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">button_font</span><span class="o">.</span><span class="n">render</span><span class="p">(</span><span class="s2">&quot;Select Number of Players&quot;</span><span class="p">,</span> <span class="kc">True</span><span class="p">,</span> <span class="n">WHITE</span><span class="p">)</span>
        <span class="n">title_rect</span> <span class="o">=</span> <span class="n">section_title</span><span class="o">.</span><span class="n">get_rect</span><span class="p">(</span>
            <span class="n">centerx</span><span class="o">=</span><span class="n">get_window_size</span><span class="p">()[</span><span class="mi">0</span><span class="p">]</span> <span class="o">//</span> <span class="mi">2</span><span class="p">,</span> <span class="n">y</span><span class="o">=</span><span class="n">get_window_size</span><span class="p">()[</span><span class="mi">1</span><span class="p">]</span> <span class="o">//</span> <span class="mi">2</span> <span class="o">-</span> <span class="mi">170</span>
        <span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">screen</span><span class="o">.</span><span class="n">blit</span><span class="p">(</span><span class="n">section_title</span><span class="p">,</span> <span class="n">title_rect</span><span class="p">)</span>

        <span class="n">count_text</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">button_font</span><span class="o">.</span><span class="n">render</span><span class="p">(</span><span class="nb">str</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">player_count</span><span class="p">),</span> <span class="kc">True</span><span class="p">,</span> <span class="n">WHITE</span><span class="p">)</span>
        <span class="n">count_rect</span> <span class="o">=</span> <span class="n">count_text</span><span class="o">.</span><span class="n">get_rect</span><span class="p">(</span>
            <span class="n">centerx</span><span class="o">=</span><span class="n">get_window_size</span><span class="p">()[</span><span class="mi">0</span><span class="p">]</span> <span class="o">//</span> <span class="mi">2</span><span class="p">,</span> <span class="n">y</span><span class="o">=</span><span class="n">get_window_size</span><span class="p">()[</span><span class="mi">1</span><span class="p">]</span> <span class="o">//</span> <span class="mi">2</span> <span class="o">-</span> <span class="mi">130</span>
        <span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">screen</span><span class="o">.</span><span class="n">blit</span><span class="p">(</span><span class="n">count_text</span><span class="p">,</span> <span class="n">count_rect</span><span class="p">)</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">minus_button</span><span class="o">.</span><span class="n">active</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">player_count</span> <span class="o">&gt;</span> <span class="mi">2</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">plus_button</span><span class="o">.</span><span class="n">active</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">player_count</span> <span class="o">&lt;</span> <span class="mi">5</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">minus_button</span><span class="o">.</span><span class="n">is_selected</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">selected_element</span> <span class="o">==</span> <span class="mi">0</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">plus_button</span><span class="o">.</span><span class="n">is_selected</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">selected_element</span> <span class="o">==</span> <span class="mi">1</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">minus_button</span><span class="o">.</span><span class="n">draw</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">screen</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">plus_button</span><span class="o">.</span><span class="n">draw</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">screen</span><span class="p">)</span>

        <span class="n">name_section_title</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">button_font</span><span class="o">.</span><span class="n">render</span><span class="p">(</span><span class="s2">&quot;Enter Player Names&quot;</span><span class="p">,</span> <span class="kc">True</span><span class="p">,</span> <span class="n">WHITE</span><span class="p">)</span>
        <span class="n">name_title_rect</span> <span class="o">=</span> <span class="n">name_section_title</span><span class="o">.</span><span class="n">get_rect</span><span class="p">(</span>
            <span class="n">centerx</span><span class="o">=</span><span class="n">get_window_size</span><span class="p">()[</span><span class="mi">0</span><span class="p">]</span> <span class="o">//</span> <span class="mi">2</span><span class="p">,</span> <span class="n">y</span><span class="o">=</span><span class="n">get_window_size</span><span class="p">()[</span><span class="mi">1</span><span class="p">]</span> <span class="o">//</span> <span class="mi">2</span> <span class="o">-</span> <span class="mi">90</span>
        <span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">screen</span><span class="o">.</span><span class="n">blit</span><span class="p">(</span><span class="n">name_section_title</span><span class="p">,</span> <span class="n">name_title_rect</span><span class="p">)</span>

        <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">player_count</span><span class="p">):</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">name_inputs</span><span class="p">[</span><span class="n">i</span><span class="p">]</span><span class="o">.</span><span class="n">active</span> <span class="o">=</span> <span class="n">i</span> <span class="o">==</span> <span class="bp">self</span><span class="o">.</span><span class="n">active_input</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">name_inputs</span><span class="p">[</span><span class="n">i</span><span class="p">]</span><span class="o">.</span><span class="n">is_selected</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">selected_element</span> <span class="o">==</span> <span class="n">i</span> <span class="o">+</span> <span class="mi">2</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">name_inputs</span><span class="p">[</span><span class="n">i</span><span class="p">]</span><span class="o">.</span><span class="n">error</span> <span class="o">=</span> <span class="ow">not</span> <span class="bp">self</span><span class="o">.</span><span class="n">player_names</span><span class="p">[</span><span class="n">i</span><span class="p">]</span><span class="o">.</span><span class="n">strip</span><span class="p">()</span>
            <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">player_names</span><span class="p">[</span><span class="n">i</span><span class="p">]:</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">name_inputs</span><span class="p">[</span><span class="n">i</span><span class="p">]</span><span class="o">.</span><span class="n">text</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">player_names</span><span class="p">[</span><span class="n">i</span><span class="p">]</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">name_inputs</span><span class="p">[</span><span class="n">i</span><span class="p">]</span><span class="o">.</span><span class="n">draw</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">screen</span><span class="p">)</span>

            <span class="k">if</span> <span class="n">i</span> <span class="o">==</span> <span class="bp">self</span><span class="o">.</span><span class="n">active_input</span><span class="p">:</span>
                <span class="n">help_text</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">small_font</span><span class="o">.</span><span class="n">render</span><span class="p">(</span>
                    <span class="s2">&quot;Type name and press Enter&quot;</span><span class="p">,</span> <span class="kc">True</span><span class="p">,</span> <span class="n">LIGHT_GRAY</span>
                <span class="p">)</span>
                <span class="n">help_rect</span> <span class="o">=</span> <span class="n">help_text</span><span class="o">.</span><span class="n">get_rect</span><span class="p">(</span>
                    <span class="n">left</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">name_inputs</span><span class="p">[</span><span class="n">i</span><span class="p">]</span><span class="o">.</span><span class="n">rect</span><span class="o">.</span><span class="n">right</span> <span class="o">+</span> <span class="mi">10</span><span class="p">,</span>
                    <span class="n">centery</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">name_inputs</span><span class="p">[</span><span class="n">i</span><span class="p">]</span><span class="o">.</span><span class="n">rect</span><span class="o">.</span><span class="n">centery</span><span class="p">,</span>
                <span class="p">)</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">screen</span><span class="o">.</span><span class="n">blit</span><span class="p">(</span><span class="n">help_text</span><span class="p">,</span> <span class="n">help_rect</span><span class="p">)</span>

        <span class="n">can_continue</span> <span class="o">=</span> <span class="nb">all</span><span class="p">(</span>
            <span class="n">name</span><span class="o">.</span><span class="n">strip</span><span class="p">()</span> <span class="k">for</span> <span class="n">name</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">player_names</span><span class="p">[:</span> <span class="bp">self</span><span class="o">.</span><span class="n">player_count</span><span class="p">]</span>
        <span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">continue_button</span><span class="o">.</span><span class="n">active</span> <span class="o">=</span> <span class="n">can_continue</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">continue_button</span><span class="o">.</span><span class="n">is_selected</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">selected_element</span> <span class="o">==</span> <span class="mi">7</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">continue_button</span><span class="o">.</span><span class="n">draw</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">screen</span><span class="p">)</span>

        <span class="n">controls</span> <span class="o">=</span> <span class="p">[</span>
            <span class="s2">&quot;/ - Navigate fields&quot;</span><span class="p">,</span>
            <span class="s2">&quot;Enter - Edit name&quot;</span><span class="p">,</span>
            <span class="s2">&quot;Tab - Next field&quot;</span><span class="p">,</span>
            <span class="s2">&quot;Escape - Cancel editing&quot;</span><span class="p">,</span>
        <span class="p">]</span>

        <span class="n">y_offset</span> <span class="o">=</span> <span class="n">get_window_size</span><span class="p">()[</span><span class="mi">1</span><span class="p">]</span> <span class="o">-</span> <span class="mi">80</span>
        <span class="k">for</span> <span class="n">hint</span> <span class="ow">in</span> <span class="n">controls</span><span class="p">:</span>
            <span class="n">hint_text</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">small_font</span><span class="o">.</span><span class="n">render</span><span class="p">(</span><span class="n">hint</span><span class="p">,</span> <span class="kc">True</span><span class="p">,</span> <span class="n">LIGHT_GRAY</span><span class="p">)</span>
            <span class="n">hint_rect</span> <span class="o">=</span> <span class="n">hint_text</span><span class="o">.</span><span class="n">get_rect</span><span class="p">(</span>
                <span class="n">centerx</span><span class="o">=</span><span class="n">get_window_size</span><span class="p">()[</span><span class="mi">0</span><span class="p">]</span> <span class="o">//</span> <span class="mi">2</span><span class="p">,</span> <span class="n">y</span><span class="o">=</span><span class="n">y_offset</span>
            <span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">screen</span><span class="o">.</span><span class="n">blit</span><span class="p">(</span><span class="n">hint_text</span><span class="p">,</span> <span class="n">hint_rect</span><span class="p">)</span>
            <span class="n">y_offset</span> <span class="o">+=</span> <span class="mi">20</span>

        <span class="n">pygame</span><span class="o">.</span><span class="n">display</span><span class="o">.</span><span class="n">flip</span><span class="p">()</span></div>


<div class="viewcode-block" id="PlayerSelectPage.handle_click">
<a class="viewcode-back" href="../../modules/ui.html#src.UI.PlayerSelectPage.handle_click">[docs]</a>
    <span class="k">def</span><span class="w"> </span><span class="nf">handle_click</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">pos</span><span class="p">):</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">minus_button</span><span class="o">.</span><span class="n">check_hover</span><span class="p">(</span><span class="n">pos</span><span class="p">)</span> <span class="ow">and</span> <span class="bp">self</span><span class="o">.</span><span class="n">player_count</span> <span class="o">&gt;</span> <span class="mi">2</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">player_count</span> <span class="o">-=</span> <span class="mi">1</span>
            <span class="k">return</span> <span class="kc">False</span>

        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">plus_button</span><span class="o">.</span><span class="n">check_hover</span><span class="p">(</span><span class="n">pos</span><span class="p">)</span> <span class="ow">and</span> <span class="bp">self</span><span class="o">.</span><span class="n">player_count</span> <span class="o">&lt;</span> <span class="mi">5</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">player_count</span> <span class="o">+=</span> <span class="mi">1</span>
            <span class="k">return</span> <span class="kc">False</span>

        <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">player_count</span><span class="p">):</span>
            <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">name_inputs</span><span class="p">[</span><span class="n">i</span><span class="p">]</span><span class="o">.</span><span class="n">rect</span><span class="o">.</span><span class="n">collidepoint</span><span class="p">(</span><span class="n">pos</span><span class="p">):</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">active_input</span> <span class="o">=</span> <span class="n">i</span>
                <span class="k">return</span> <span class="kc">False</span>

        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">continue_button</span><span class="o">.</span><span class="n">check_hover</span><span class="p">(</span><span class="n">pos</span><span class="p">):</span>
            <span class="k">if</span> <span class="nb">all</span><span class="p">(</span><span class="n">name</span><span class="o">.</span><span class="n">strip</span><span class="p">()</span> <span class="k">for</span> <span class="n">name</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">player_names</span><span class="p">[:</span> <span class="bp">self</span><span class="o">.</span><span class="n">player_count</span><span class="p">]):</span>
                <span class="k">return</span> <span class="kc">True</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">active_input</span> <span class="o">=</span> <span class="o">-</span><span class="mi">1</span>
        <span class="k">return</span> <span class="kc">False</span></div>


<div class="viewcode-block" id="PlayerSelectPage.handle_motion">
<a class="viewcode-back" href="../../modules/ui.html#src.UI.PlayerSelectPage.handle_motion">[docs]</a>
    <span class="k">def</span><span class="w"> </span><span class="nf">handle_motion</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">pos</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">minus_button</span><span class="o">.</span><span class="n">check_hover</span><span class="p">(</span><span class="n">pos</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">plus_button</span><span class="o">.</span><span class="n">check_hover</span><span class="p">(</span><span class="n">pos</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">continue_button</span><span class="o">.</span><span class="n">check_hover</span><span class="p">(</span><span class="n">pos</span><span class="p">)</span></div>


<div class="viewcode-block" id="PlayerSelectPage.handle_key">
<a class="viewcode-back" href="../../modules/ui.html#src.UI.PlayerSelectPage.handle_key">[docs]</a>
    <span class="k">def</span><span class="w"> </span><span class="nf">handle_key</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">event</span><span class="p">):</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">active_input</span> <span class="o">&gt;=</span> <span class="mi">0</span><span class="p">:</span>
            <span class="k">if</span> <span class="n">event</span><span class="o">.</span><span class="n">key</span> <span class="o">==</span> <span class="n">pygame</span><span class="o">.</span><span class="n">K_RETURN</span><span class="p">:</span>
                <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">name_inputs</span><span class="p">[</span><span class="bp">self</span><span class="o">.</span><span class="n">active_input</span><span class="p">]</span><span class="o">.</span><span class="n">text</span><span class="o">.</span><span class="n">strip</span><span class="p">():</span>
                    <span class="bp">self</span><span class="o">.</span><span class="n">player_names</span><span class="p">[</span><span class="bp">self</span><span class="o">.</span><span class="n">active_input</span><span class="p">]</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">name_inputs</span><span class="p">[</span>
                        <span class="bp">self</span><span class="o">.</span><span class="n">active_input</span>
                    <span class="p">]</span><span class="o">.</span><span class="n">text</span><span class="o">.</span><span class="n">strip</span><span class="p">()</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">active_input</span> <span class="o">=</span> <span class="o">-</span><span class="mi">1</span>
            <span class="k">elif</span> <span class="n">event</span><span class="o">.</span><span class="n">key</span> <span class="o">==</span> <span class="n">pygame</span><span class="o">.</span><span class="n">K_BACKSPACE</span><span class="p">:</span>
                <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">name_inputs</span><span class="p">[</span><span class="bp">self</span><span class="o">.</span><span class="n">active_input</span><span class="p">]</span><span class="o">.</span><span class="n">text</span><span class="p">:</span>
                    <span class="bp">self</span><span class="o">.</span><span class="n">name_inputs</span><span class="p">[</span><span class="bp">self</span><span class="o">.</span><span class="n">active_input</span><span class="p">]</span><span class="o">.</span><span class="n">text</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">name_inputs</span><span class="p">[</span>
                        <span class="bp">self</span><span class="o">.</span><span class="n">active_input</span>
                    <span class="p">]</span><span class="o">.</span><span class="n">text</span><span class="p">[:</span><span class="o">-</span><span class="mi">1</span><span class="p">]</span>
                    <span class="bp">self</span><span class="o">.</span><span class="n">player_names</span><span class="p">[</span><span class="bp">self</span><span class="o">.</span><span class="n">active_input</span><span class="p">]</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">name_inputs</span><span class="p">[</span>
                        <span class="bp">self</span><span class="o">.</span><span class="n">active_input</span>
                    <span class="p">]</span><span class="o">.</span><span class="n">text</span>
            <span class="k">elif</span> <span class="n">event</span><span class="o">.</span><span class="n">key</span> <span class="o">==</span> <span class="n">pygame</span><span class="o">.</span><span class="n">K_TAB</span><span class="p">:</span>
                <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">name_inputs</span><span class="p">[</span><span class="bp">self</span><span class="o">.</span><span class="n">active_input</span><span class="p">]</span><span class="o">.</span><span class="n">text</span><span class="o">.</span><span class="n">strip</span><span class="p">():</span>
                    <span class="bp">self</span><span class="o">.</span><span class="n">player_names</span><span class="p">[</span><span class="bp">self</span><span class="o">.</span><span class="n">active_input</span><span class="p">]</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">name_inputs</span><span class="p">[</span>
                        <span class="bp">self</span><span class="o">.</span><span class="n">active_input</span>
                    <span class="p">]</span><span class="o">.</span><span class="n">text</span><span class="o">.</span><span class="n">strip</span><span class="p">()</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">active_input</span> <span class="o">=</span> <span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">active_input</span> <span class="o">+</span> <span class="mi">1</span><span class="p">)</span> <span class="o">%</span> <span class="bp">self</span><span class="o">.</span><span class="n">player_count</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">selected_element</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">active_input</span> <span class="o">+</span> <span class="mi">2</span>
            <span class="k">elif</span> <span class="n">event</span><span class="o">.</span><span class="n">key</span> <span class="o">==</span> <span class="n">pygame</span><span class="o">.</span><span class="n">K_ESCAPE</span><span class="p">:</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">active_input</span> <span class="o">=</span> <span class="o">-</span><span class="mi">1</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">name_inputs</span><span class="p">[</span><span class="bp">self</span><span class="o">.</span><span class="n">active_input</span><span class="p">]</span><span class="o">.</span><span class="n">text</span><span class="p">)</span> <span class="o">&lt;</span> <span class="mi">15</span><span class="p">:</span>
                    <span class="bp">self</span><span class="o">.</span><span class="n">name_inputs</span><span class="p">[</span><span class="bp">self</span><span class="o">.</span><span class="n">active_input</span><span class="p">]</span><span class="o">.</span><span class="n">text</span> <span class="o">+=</span> <span class="n">event</span><span class="o">.</span><span class="n">unicode</span>
                    <span class="bp">self</span><span class="o">.</span><span class="n">player_names</span><span class="p">[</span><span class="bp">self</span><span class="o">.</span><span class="n">active_input</span><span class="p">]</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">name_inputs</span><span class="p">[</span>
                        <span class="bp">self</span><span class="o">.</span><span class="n">active_input</span>
                    <span class="p">]</span><span class="o">.</span><span class="n">text</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="k">if</span> <span class="n">event</span><span class="o">.</span><span class="n">key</span> <span class="ow">in</span> <span class="p">(</span><span class="n">pygame</span><span class="o">.</span><span class="n">K_UP</span><span class="p">,</span> <span class="n">pygame</span><span class="o">.</span><span class="n">K_LEFT</span><span class="p">):</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">selected_element</span> <span class="o">=</span> <span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">selected_element</span> <span class="o">-</span> <span class="mi">1</span><span class="p">)</span> <span class="o">%</span> <span class="mi">8</span>
                <span class="k">while</span> <span class="p">(</span>
                    <span class="bp">self</span><span class="o">.</span><span class="n">selected_element</span> <span class="o">&gt;=</span> <span class="mi">2</span>
                    <span class="ow">and</span> <span class="bp">self</span><span class="o">.</span><span class="n">selected_element</span> <span class="o">&lt;</span> <span class="mi">7</span>
                    <span class="ow">and</span> <span class="bp">self</span><span class="o">.</span><span class="n">selected_element</span> <span class="o">-</span> <span class="mi">2</span> <span class="o">&gt;=</span> <span class="bp">self</span><span class="o">.</span><span class="n">player_count</span>
                <span class="p">):</span>
                    <span class="bp">self</span><span class="o">.</span><span class="n">selected_element</span> <span class="o">=</span> <span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">selected_element</span> <span class="o">-</span> <span class="mi">1</span><span class="p">)</span> <span class="o">%</span> <span class="mi">8</span>
            <span class="k">elif</span> <span class="n">event</span><span class="o">.</span><span class="n">key</span> <span class="ow">in</span> <span class="p">(</span><span class="n">pygame</span><span class="o">.</span><span class="n">K_DOWN</span><span class="p">,</span> <span class="n">pygame</span><span class="o">.</span><span class="n">K_RIGHT</span><span class="p">):</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">selected_element</span> <span class="o">=</span> <span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">selected_element</span> <span class="o">+</span> <span class="mi">1</span><span class="p">)</span> <span class="o">%</span> <span class="mi">8</span>
                <span class="k">while</span> <span class="p">(</span>
                    <span class="bp">self</span><span class="o">.</span><span class="n">selected_element</span> <span class="o">&gt;=</span> <span class="mi">2</span>
                    <span class="ow">and</span> <span class="bp">self</span><span class="o">.</span><span class="n">selected_element</span> <span class="o">&lt;</span> <span class="mi">7</span>
                    <span class="ow">and</span> <span class="bp">self</span><span class="o">.</span><span class="n">selected_element</span> <span class="o">-</span> <span class="mi">2</span> <span class="o">&gt;=</span> <span class="bp">self</span><span class="o">.</span><span class="n">player_count</span>
                <span class="p">):</span>
                    <span class="bp">self</span><span class="o">.</span><span class="n">selected_element</span> <span class="o">=</span> <span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">selected_element</span> <span class="o">+</span> <span class="mi">1</span><span class="p">)</span> <span class="o">%</span> <span class="mi">8</span>
            <span class="k">elif</span> <span class="n">event</span><span class="o">.</span><span class="n">key</span> <span class="o">==</span> <span class="n">pygame</span><span class="o">.</span><span class="n">K_RETURN</span><span class="p">:</span>
                <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">selected_element</span> <span class="o">==</span> <span class="mi">0</span> <span class="ow">and</span> <span class="bp">self</span><span class="o">.</span><span class="n">player_count</span> <span class="o">&gt;</span> <span class="mi">2</span><span class="p">:</span>
                    <span class="bp">self</span><span class="o">.</span><span class="n">player_count</span> <span class="o">-=</span> <span class="mi">1</span>
                <span class="k">elif</span> <span class="bp">self</span><span class="o">.</span><span class="n">selected_element</span> <span class="o">==</span> <span class="mi">1</span> <span class="ow">and</span> <span class="bp">self</span><span class="o">.</span><span class="n">player_count</span> <span class="o">&lt;</span> <span class="mi">5</span><span class="p">:</span>
                    <span class="bp">self</span><span class="o">.</span><span class="n">player_count</span> <span class="o">+=</span> <span class="mi">1</span>
                <span class="k">elif</span> <span class="mi">2</span> <span class="o">&lt;=</span> <span class="bp">self</span><span class="o">.</span><span class="n">selected_element</span> <span class="o">&lt;=</span> <span class="mi">6</span><span class="p">:</span>
                    <span class="bp">self</span><span class="o">.</span><span class="n">active_input</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">selected_element</span> <span class="o">-</span> <span class="mi">2</span>
                <span class="k">elif</span> <span class="bp">self</span><span class="o">.</span><span class="n">selected_element</span> <span class="o">==</span> <span class="mi">7</span><span class="p">:</span>
                    <span class="k">if</span> <span class="nb">all</span><span class="p">(</span>
                        <span class="n">name</span><span class="o">.</span><span class="n">strip</span><span class="p">()</span> <span class="k">for</span> <span class="n">name</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">player_names</span><span class="p">[:</span> <span class="bp">self</span><span class="o">.</span><span class="n">player_count</span><span class="p">]</span>
                    <span class="p">):</span>
                        <span class="k">return</span> <span class="kc">True</span>
            <span class="k">elif</span> <span class="n">event</span><span class="o">.</span><span class="n">key</span> <span class="o">==</span> <span class="n">pygame</span><span class="o">.</span><span class="n">K_ESCAPE</span><span class="p">:</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">active_input</span> <span class="o">=</span> <span class="o">-</span><span class="mi">1</span>
        <span class="k">return</span> <span class="kc">False</span></div>


<div class="viewcode-block" id="PlayerSelectPage.get_player_info">
<a class="viewcode-back" href="../../modules/ui.html#src.UI.PlayerSelectPage.get_player_info">[docs]</a>
    <span class="k">def</span><span class="w"> </span><span class="nf">get_player_info</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">player_count</span><span class="p">,</span> <span class="p">[</span>
            <span class="n">name</span><span class="o">.</span><span class="n">strip</span><span class="p">()</span> <span class="k">for</span> <span class="n">name</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">player_names</span><span class="p">[:</span> <span class="bp">self</span><span class="o">.</span><span class="n">player_count</span><span class="p">]</span>
        <span class="p">]</span></div>
</div>



<span class="c1"># page showing game instructions</span>
<div class="viewcode-block" id="HowToPlayPage">
<a class="viewcode-back" href="../../modules/ui.html#src.UI.HowToPlayPage">[docs]</a>
<span class="k">class</span><span class="w"> </span><span class="nc">HowToPlayPage</span><span class="p">(</span><span class="n">BasePage</span><span class="p">):</span>
    <span class="k">def</span><span class="w"> </span><span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">instructions</span><span class="o">=</span><span class="kc">None</span><span class="p">):</span>
        <span class="nb">super</span><span class="p">()</span><span class="o">.</span><span class="fm">__init__</span><span class="p">(</span><span class="n">instructions</span><span class="o">=</span><span class="n">instructions</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">small_font</span> <span class="o">=</span> <span class="n">font_manager</span><span class="o">.</span><span class="n">get_font</span><span class="p">(</span><span class="mi">24</span><span class="p">)</span>

        <span class="n">button_height</span> <span class="o">=</span> <span class="mi">60</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">back_button</span> <span class="o">=</span> <span class="n">UIButton</span><span class="p">(</span>
            <span class="n">pygame</span><span class="o">.</span><span class="n">Rect</span><span class="p">(</span><span class="mi">20</span><span class="p">,</span> <span class="n">get_window_size</span><span class="p">()[</span><span class="mi">1</span><span class="p">]</span> <span class="o">-</span> <span class="mi">80</span><span class="p">,</span> <span class="mi">200</span><span class="p">,</span> <span class="n">button_height</span><span class="p">),</span>
            <span class="s2">&quot;Back&quot;</span><span class="p">,</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">button_font</span><span class="p">,</span>
        <span class="p">)</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">shortcuts_button</span> <span class="o">=</span> <span class="n">UIButton</span><span class="p">(</span>
            <span class="n">pygame</span><span class="o">.</span><span class="n">Rect</span><span class="p">(</span>
                <span class="n">get_window_size</span><span class="p">()[</span><span class="mi">0</span><span class="p">]</span> <span class="o">-</span> <span class="mi">320</span><span class="p">,</span>
                <span class="n">get_window_size</span><span class="p">()[</span><span class="mi">1</span><span class="p">]</span> <span class="o">-</span> <span class="mi">80</span><span class="p">,</span>
                <span class="mi">300</span><span class="p">,</span>
                <span class="n">button_height</span><span class="p">,</span>
            <span class="p">),</span>
            <span class="s2">&quot;Keyboard Shortcuts&quot;</span><span class="p">,</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">button_font</span><span class="p">,</span>
        <span class="p">)</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">instructions</span> <span class="o">=</span> <span class="p">[</span>
            <span class="s2">&quot;How to Play&quot;</span><span class="p">,</span>
            <span class="s2">&quot;&quot;</span><span class="p">,</span>
            <span class="s2">&quot;Become the wealthiest player by buying, renting, and developing properties!&quot;</span><span class="p">,</span>
            <span class="s2">&quot;&quot;</span><span class="p">,</span>
            <span class="s2">&quot; Roll dice to move around the board&quot;</span><span class="p">,</span>
            <span class="s2">&quot; Buy properties when you land on them&quot;</span><span class="p">,</span>
            <span class="s2">&quot; Collect rent from other players&quot;</span><span class="p">,</span>
            <span class="s2">&quot; Build houses to increase property value&quot;</span><span class="p">,</span>
        <span class="p">]</span>

<div class="viewcode-block" id="HowToPlayPage.draw">
<a class="viewcode-back" href="../../modules/ui.html#src.UI.HowToPlayPage.draw">[docs]</a>
    <span class="k">def</span><span class="w"> </span><span class="nf">draw</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">draw_background</span><span class="p">()</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">draw_title</span><span class="p">()</span>

        <span class="n">panel_width</span> <span class="o">=</span> <span class="mi">1000</span>
        <span class="n">panel_height</span> <span class="o">=</span> <span class="n">get_window_size</span><span class="p">()[</span><span class="mi">1</span><span class="p">]</span> <span class="o">-</span> <span class="mi">350</span>
        <span class="n">panel_x</span> <span class="o">=</span> <span class="p">(</span><span class="n">get_window_size</span><span class="p">()[</span><span class="mi">0</span><span class="p">]</span> <span class="o">-</span> <span class="n">panel_width</span><span class="p">)</span> <span class="o">//</span> <span class="mi">2</span>
        <span class="n">panel_y</span> <span class="o">=</span> <span class="mi">320</span>

        <span class="n">shadow_offset</span> <span class="o">=</span> <span class="mi">5</span>
        <span class="n">shadow</span> <span class="o">=</span> <span class="n">pygame</span><span class="o">.</span><span class="n">Surface</span><span class="p">(</span>
            <span class="p">(</span><span class="n">panel_width</span> <span class="o">+</span> <span class="n">shadow_offset</span> <span class="o">*</span> <span class="mi">2</span><span class="p">,</span> <span class="n">panel_height</span> <span class="o">+</span> <span class="n">shadow_offset</span> <span class="o">*</span> <span class="mi">2</span><span class="p">),</span>
            <span class="n">pygame</span><span class="o">.</span><span class="n">SRCALPHA</span><span class="p">,</span>
        <span class="p">)</span>
        <span class="n">pygame</span><span class="o">.</span><span class="n">draw</span><span class="o">.</span><span class="n">rect</span><span class="p">(</span><span class="n">shadow</span><span class="p">,</span> <span class="p">(</span><span class="o">*</span><span class="n">BLACK</span><span class="p">,</span> <span class="mi">128</span><span class="p">),</span> <span class="n">shadow</span><span class="o">.</span><span class="n">get_rect</span><span class="p">(),</span> <span class="n">border_radius</span><span class="o">=</span><span class="mi">15</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">screen</span><span class="o">.</span><span class="n">blit</span><span class="p">(</span><span class="n">shadow</span><span class="p">,</span> <span class="p">(</span><span class="n">panel_x</span> <span class="o">-</span> <span class="n">shadow_offset</span><span class="p">,</span> <span class="n">panel_y</span> <span class="o">-</span> <span class="n">shadow_offset</span><span class="p">))</span>

        <span class="n">pygame</span><span class="o">.</span><span class="n">draw</span><span class="o">.</span><span class="n">rect</span><span class="p">(</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">screen</span><span class="p">,</span>
            <span class="n">WHITE</span><span class="p">,</span>
            <span class="n">pygame</span><span class="o">.</span><span class="n">Rect</span><span class="p">(</span><span class="n">panel_x</span><span class="p">,</span> <span class="n">panel_y</span><span class="p">,</span> <span class="n">panel_width</span><span class="p">,</span> <span class="n">panel_height</span><span class="p">),</span>
            <span class="n">border_radius</span><span class="o">=</span><span class="mi">15</span><span class="p">,</span>
        <span class="p">)</span>

        <span class="n">title</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">instructions</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>
        <span class="n">title_surface</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">button_font</span><span class="o">.</span><span class="n">render</span><span class="p">(</span><span class="n">title</span><span class="p">,</span> <span class="kc">True</span><span class="p">,</span> <span class="n">ACCENT_COLOR</span><span class="p">)</span>
        <span class="n">title_rect</span> <span class="o">=</span> <span class="n">title_surface</span><span class="o">.</span><span class="n">get_rect</span><span class="p">(</span>
            <span class="n">centerx</span><span class="o">=</span><span class="n">get_window_size</span><span class="p">()[</span><span class="mi">0</span><span class="p">]</span> <span class="o">//</span> <span class="mi">2</span><span class="p">,</span> <span class="n">y</span><span class="o">=</span><span class="n">panel_y</span> <span class="o">+</span> <span class="mi">15</span>
        <span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">screen</span><span class="o">.</span><span class="n">blit</span><span class="p">(</span><span class="n">title_surface</span><span class="p">,</span> <span class="n">title_rect</span><span class="p">)</span>

        <span class="n">y_offset</span> <span class="o">=</span> <span class="n">panel_y</span> <span class="o">+</span> <span class="mi">100</span>

        <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="nb">len</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">instructions</span><span class="p">)):</span>
            <span class="n">line</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">instructions</span><span class="p">[</span><span class="n">i</span><span class="p">]</span>

            <span class="k">if</span> <span class="n">line</span> <span class="o">==</span> <span class="s2">&quot;&quot;</span><span class="p">:</span>
                <span class="n">y_offset</span> <span class="o">+=</span> <span class="mi">12</span>
                <span class="k">continue</span>
            <span class="k">elif</span> <span class="n">line</span><span class="o">.</span><span class="n">endswith</span><span class="p">(</span><span class="s2">&quot;:&quot;</span><span class="p">):</span>
                <span class="n">text_surface</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">button_font</span><span class="o">.</span><span class="n">render</span><span class="p">(</span><span class="n">line</span><span class="p">,</span> <span class="kc">True</span><span class="p">,</span> <span class="n">ACCENT_COLOR</span><span class="p">)</span>
                <span class="n">y_offset</span> <span class="o">+=</span> <span class="mi">10</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="n">text_surface</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">small_font</span><span class="o">.</span><span class="n">render</span><span class="p">(</span><span class="n">line</span><span class="p">,</span> <span class="kc">True</span><span class="p">,</span> <span class="n">BLACK</span><span class="p">)</span>

            <span class="n">text_rect</span> <span class="o">=</span> <span class="n">text_surface</span><span class="o">.</span><span class="n">get_rect</span><span class="p">(</span>
                <span class="n">centerx</span><span class="o">=</span><span class="n">get_window_size</span><span class="p">()[</span><span class="mi">0</span><span class="p">]</span> <span class="o">//</span> <span class="mi">2</span><span class="p">,</span> <span class="n">y</span><span class="o">=</span><span class="n">y_offset</span>
            <span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">screen</span><span class="o">.</span><span class="n">blit</span><span class="p">(</span><span class="n">text_surface</span><span class="p">,</span> <span class="n">text_rect</span><span class="p">)</span>
            <span class="n">y_offset</span> <span class="o">+=</span> <span class="mi">22</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">back_button</span><span class="o">.</span><span class="n">draw</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">screen</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">shortcuts_button</span><span class="o">.</span><span class="n">draw</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">screen</span><span class="p">)</span>

        <span class="n">hint_text</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">small_font</span><span class="o">.</span><span class="n">render</span><span class="p">(</span>
            <span class="s2">&quot;Press ESC or BACKSPACE to return&quot;</span><span class="p">,</span> <span class="kc">True</span><span class="p">,</span> <span class="n">LIGHT_GRAY</span>
        <span class="p">)</span>
        <span class="n">hint_rect</span> <span class="o">=</span> <span class="n">hint_text</span><span class="o">.</span><span class="n">get_rect</span><span class="p">(</span>
            <span class="n">right</span><span class="o">=</span><span class="n">get_window_size</span><span class="p">()[</span><span class="mi">0</span><span class="p">]</span> <span class="o">-</span> <span class="mi">20</span><span class="p">,</span> <span class="n">y</span><span class="o">=</span><span class="n">get_window_size</span><span class="p">()[</span><span class="mi">1</span><span class="p">]</span> <span class="o">-</span> <span class="mi">180</span>
        <span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">screen</span><span class="o">.</span><span class="n">blit</span><span class="p">(</span><span class="n">hint_text</span><span class="p">,</span> <span class="n">hint_rect</span><span class="p">)</span>

        <span class="n">pygame</span><span class="o">.</span><span class="n">display</span><span class="o">.</span><span class="n">flip</span><span class="p">()</span></div>


<div class="viewcode-block" id="HowToPlayPage.handle_click">
<a class="viewcode-back" href="../../modules/ui.html#src.UI.HowToPlayPage.handle_click">[docs]</a>
    <span class="k">def</span><span class="w"> </span><span class="nf">handle_click</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">pos</span><span class="p">):</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">back_button</span><span class="o">.</span><span class="n">check_hover</span><span class="p">(</span><span class="n">pos</span><span class="p">):</span>
            <span class="k">return</span> <span class="kc">True</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">shortcuts_button</span><span class="o">.</span><span class="n">check_hover</span><span class="p">(</span><span class="n">pos</span><span class="p">):</span>
            <span class="k">return</span> <span class="s2">&quot;keyboard_shortcuts&quot;</span>
        <span class="k">return</span> <span class="kc">None</span></div>


<div class="viewcode-block" id="HowToPlayPage.handle_motion">
<a class="viewcode-back" href="../../modules/ui.html#src.UI.HowToPlayPage.handle_motion">[docs]</a>
    <span class="k">def</span><span class="w"> </span><span class="nf">handle_motion</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">pos</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">back_button</span><span class="o">.</span><span class="n">check_hover</span><span class="p">(</span><span class="n">pos</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">shortcuts_button</span><span class="o">.</span><span class="n">check_hover</span><span class="p">(</span><span class="n">pos</span><span class="p">)</span></div>


<div class="viewcode-block" id="HowToPlayPage.handle_key">
<a class="viewcode-back" href="../../modules/ui.html#src.UI.HowToPlayPage.handle_key">[docs]</a>
    <span class="k">def</span><span class="w"> </span><span class="nf">handle_key</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">event</span><span class="p">):</span>
        <span class="k">if</span> <span class="n">event</span><span class="o">.</span><span class="n">key</span> <span class="ow">in</span> <span class="p">[</span><span class="n">pygame</span><span class="o">.</span><span class="n">K_ESCAPE</span><span class="p">,</span> <span class="n">pygame</span><span class="o">.</span><span class="n">K_BACKSPACE</span><span class="p">]:</span>
            <span class="k">return</span> <span class="kc">True</span>
        <span class="k">return</span> <span class="kc">None</span></div>
</div>



<span class="c1"># page showing keyboard shortcuts</span>
<div class="viewcode-block" id="KeyboardShortcutsPage">
<a class="viewcode-back" href="../../modules/ui.html#src.UI.KeyboardShortcutsPage">[docs]</a>
<span class="k">class</span><span class="w"> </span><span class="nc">KeyboardShortcutsPage</span><span class="p">(</span><span class="n">BasePage</span><span class="p">):</span>
    <span class="k">def</span><span class="w"> </span><span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">instructions</span><span class="o">=</span><span class="kc">None</span><span class="p">):</span>
        <span class="nb">super</span><span class="p">()</span><span class="o">.</span><span class="fm">__init__</span><span class="p">(</span><span class="n">instructions</span><span class="o">=</span><span class="n">instructions</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">small_font</span> <span class="o">=</span> <span class="n">font_manager</span><span class="o">.</span><span class="n">get_font</span><span class="p">(</span><span class="mi">24</span><span class="p">)</span>

        <span class="n">button_width</span> <span class="o">=</span> <span class="mi">200</span>
        <span class="n">button_height</span> <span class="o">=</span> <span class="mi">60</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">back_button</span> <span class="o">=</span> <span class="n">UIButton</span><span class="p">(</span>
            <span class="n">pygame</span><span class="o">.</span><span class="n">Rect</span><span class="p">(</span><span class="mi">20</span><span class="p">,</span> <span class="n">get_window_size</span><span class="p">()[</span><span class="mi">1</span><span class="p">]</span> <span class="o">-</span> <span class="mi">80</span><span class="p">,</span> <span class="n">button_width</span><span class="p">,</span> <span class="n">button_height</span><span class="p">),</span>
            <span class="s2">&quot;Back&quot;</span><span class="p">,</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">button_font</span><span class="p">,</span>
        <span class="p">)</span>

        <span class="c1"># list of shortcuts [key, description]</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">shortcuts</span> <span class="o">=</span> <span class="p">[</span>
            <span class="p">[</span><span class="s2">&quot;General&quot;</span><span class="p">,</span> <span class="s2">&quot;&quot;</span><span class="p">],</span>
            <span class="p">[</span><span class="s2">&quot;Space/Enter&quot;</span><span class="p">,</span> <span class="s2">&quot;Roll dice&quot;</span><span class="p">],</span>
            <span class="p">[</span><span class="s2">&quot;Q&quot;</span><span class="p">,</span> <span class="s2">&quot;Exit game voluntarily&quot;</span><span class="p">],</span>
            <span class="p">[</span><span class="s2">&quot;Arrow Keys&quot;</span><span class="p">,</span> <span class="s2">&quot;Move camera view&quot;</span><span class="p">],</span>
            <span class="p">[</span><span class="s2">&quot;ESC&quot;</span><span class="p">,</span> <span class="s2">&quot;Close popups&quot;</span><span class="p">],</span>
            <span class="p">[</span><span class="s2">&quot;&quot;</span><span class="p">,</span> <span class="s2">&quot;&quot;</span><span class="p">],</span>
            <span class="p">[</span><span class="s2">&quot;Property Buying&quot;</span><span class="p">,</span> <span class="s2">&quot;&quot;</span><span class="p">],</span>
            <span class="p">[</span><span class="s2">&quot;Y/Enter&quot;</span><span class="p">,</span> <span class="s2">&quot;Buy property&quot;</span><span class="p">],</span>
            <span class="p">[</span><span class="s2">&quot;N/ESC&quot;</span><span class="p">,</span> <span class="s2">&quot;Pass on buying property&quot;</span><span class="p">],</span>
            <span class="p">[</span><span class="s2">&quot;&quot;</span><span class="p">,</span> <span class="s2">&quot;&quot;</span><span class="p">],</span>
            <span class="p">[</span><span class="s2">&quot;Auction&quot;</span><span class="p">,</span> <span class="s2">&quot;&quot;</span><span class="p">],</span>
            <span class="p">[</span><span class="s2">&quot;Number Keys&quot;</span><span class="p">,</span> <span class="s2">&quot;Enter bid amount&quot;</span><span class="p">],</span>
            <span class="p">[</span><span class="s2">&quot;Backspace&quot;</span><span class="p">,</span> <span class="s2">&quot;Delete last digit of bid&quot;</span><span class="p">],</span>
            <span class="p">[</span><span class="s2">&quot;Enter&quot;</span><span class="p">,</span> <span class="s2">&quot;Submit bid&quot;</span><span class="p">],</span>
            <span class="p">[</span><span class="s2">&quot;ESC&quot;</span><span class="p">,</span> <span class="s2">&quot;Pass in auction&quot;</span><span class="p">],</span>
            <span class="p">[</span><span class="s2">&quot;&quot;</span><span class="p">,</span> <span class="s2">&quot;&quot;</span><span class="p">],</span>
            <span class="p">[</span><span class="s2">&quot;Property Management&quot;</span><span class="p">,</span> <span class="s2">&quot;&quot;</span><span class="p">],</span>
            <span class="p">[</span><span class="s2">&quot;1&quot;</span><span class="p">,</span> <span class="s2">&quot;Build house/hotel&quot;</span><span class="p">],</span>
            <span class="p">[</span><span class="s2">&quot;2&quot;</span><span class="p">,</span> <span class="s2">&quot;Mortgage/Unmortgage property&quot;</span><span class="p">],</span>
            <span class="p">[</span><span class="s2">&quot;3&quot;</span><span class="p">,</span> <span class="s2">&quot;Sell house/hotel&quot;</span><span class="p">],</span>
            <span class="p">[</span><span class="s2">&quot;4&quot;</span><span class="p">,</span> <span class="s2">&quot;Put property up for auction&quot;</span><span class="p">],</span>
            <span class="p">[</span><span class="s2">&quot;ESC&quot;</span><span class="p">,</span> <span class="s2">&quot;Exit property development mode&quot;</span><span class="p">],</span>
            <span class="p">[</span><span class="s2">&quot;&quot;</span><span class="p">,</span> <span class="s2">&quot;&quot;</span><span class="p">],</span>
            <span class="p">[</span><span class="s2">&quot;Jail Options&quot;</span><span class="p">,</span> <span class="s2">&quot;&quot;</span><span class="p">],</span>
            <span class="p">[</span><span class="s2">&quot;1&quot;</span><span class="p">,</span> <span class="s2">&quot;Use Get Out of Jail Free card&quot;</span><span class="p">],</span>
            <span class="p">[</span><span class="s2">&quot;2&quot;</span><span class="p">,</span> <span class="s2">&quot;Pay 50 fine&quot;</span><span class="p">],</span>
            <span class="p">[</span><span class="s2">&quot;3&quot;</span><span class="p">,</span> <span class="s2">&quot;Try rolling doubles&quot;</span><span class="p">],</span>
            <span class="p">[</span><span class="s2">&quot;4&quot;</span><span class="p">,</span> <span class="s2">&quot;Stay in jail (skip turns)&quot;</span><span class="p">],</span>
            <span class="p">[</span><span class="s2">&quot;&quot;</span><span class="p">,</span> <span class="s2">&quot;&quot;</span><span class="p">],</span>
            <span class="p">[</span><span class="s2">&quot;Abridged Mode&quot;</span><span class="p">,</span> <span class="s2">&quot;&quot;</span><span class="p">],</span>
            <span class="p">[</span><span class="s2">&quot;P&quot;</span><span class="p">,</span> <span class="s2">&quot;Pause/Resume game&quot;</span><span class="p">],</span>
            <span class="p">[</span><span class="s2">&quot;T&quot;</span><span class="p">,</span> <span class="s2">&quot;Show time statistics&quot;</span><span class="p">],</span>
        <span class="p">]</span>

<div class="viewcode-block" id="KeyboardShortcutsPage.draw">
<a class="viewcode-back" href="../../modules/ui.html#src.UI.KeyboardShortcutsPage.draw">[docs]</a>
    <span class="k">def</span><span class="w"> </span><span class="nf">draw</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">draw_background</span><span class="p">()</span>

        <span class="n">title</span> <span class="o">=</span> <span class="s2">&quot;Keyboard Shortcuts&quot;</span>
        <span class="n">title_surface</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">title_font</span><span class="o">.</span><span class="n">render</span><span class="p">(</span><span class="n">title</span><span class="p">,</span> <span class="kc">True</span><span class="p">,</span> <span class="n">DARK_RED</span><span class="p">)</span>
        <span class="n">title_rect</span> <span class="o">=</span> <span class="n">title_surface</span><span class="o">.</span><span class="n">get_rect</span><span class="p">(</span><span class="n">centerx</span><span class="o">=</span><span class="n">get_window_size</span><span class="p">()[</span><span class="mi">0</span><span class="p">]</span> <span class="o">//</span> <span class="mi">2</span><span class="p">,</span> <span class="n">y</span><span class="o">=</span><span class="mi">50</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">screen</span><span class="o">.</span><span class="n">blit</span><span class="p">(</span><span class="n">title_surface</span><span class="p">,</span> <span class="n">title_rect</span><span class="p">)</span>

        <span class="n">panel_width</span> <span class="o">=</span> <span class="mi">1000</span>
        <span class="n">panel_height</span> <span class="o">=</span> <span class="n">get_window_size</span><span class="p">()[</span><span class="mi">1</span><span class="p">]</span> <span class="o">-</span> <span class="mi">150</span>
        <span class="n">panel_x</span> <span class="o">=</span> <span class="p">(</span><span class="n">get_window_size</span><span class="p">()[</span><span class="mi">0</span><span class="p">]</span> <span class="o">-</span> <span class="n">panel_width</span><span class="p">)</span> <span class="o">//</span> <span class="mi">2</span>
        <span class="n">panel_y</span> <span class="o">=</span> <span class="mi">120</span>

        <span class="n">shadow_offset</span> <span class="o">=</span> <span class="mi">5</span>
        <span class="n">shadow</span> <span class="o">=</span> <span class="n">pygame</span><span class="o">.</span><span class="n">Surface</span><span class="p">(</span>
            <span class="p">(</span><span class="n">panel_width</span> <span class="o">+</span> <span class="n">shadow_offset</span> <span class="o">*</span> <span class="mi">2</span><span class="p">,</span> <span class="n">panel_height</span> <span class="o">+</span> <span class="n">shadow_offset</span> <span class="o">*</span> <span class="mi">2</span><span class="p">),</span>
            <span class="n">pygame</span><span class="o">.</span><span class="n">SRCALPHA</span><span class="p">,</span>
        <span class="p">)</span>
        <span class="n">pygame</span><span class="o">.</span><span class="n">draw</span><span class="o">.</span><span class="n">rect</span><span class="p">(</span><span class="n">shadow</span><span class="p">,</span> <span class="p">(</span><span class="o">*</span><span class="n">BLACK</span><span class="p">,</span> <span class="mi">128</span><span class="p">),</span> <span class="n">shadow</span><span class="o">.</span><span class="n">get_rect</span><span class="p">(),</span> <span class="n">border_radius</span><span class="o">=</span><span class="mi">15</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">screen</span><span class="o">.</span><span class="n">blit</span><span class="p">(</span><span class="n">shadow</span><span class="p">,</span> <span class="p">(</span><span class="n">panel_x</span> <span class="o">-</span> <span class="n">shadow_offset</span><span class="p">,</span> <span class="n">panel_y</span> <span class="o">-</span> <span class="n">shadow_offset</span><span class="p">))</span>

        <span class="n">pygame</span><span class="o">.</span><span class="n">draw</span><span class="o">.</span><span class="n">rect</span><span class="p">(</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">screen</span><span class="p">,</span>
            <span class="n">WHITE</span><span class="p">,</span>
            <span class="n">pygame</span><span class="o">.</span><span class="n">Rect</span><span class="p">(</span><span class="n">panel_x</span><span class="p">,</span> <span class="n">panel_y</span><span class="p">,</span> <span class="n">panel_width</span><span class="p">,</span> <span class="n">panel_height</span><span class="p">),</span>
            <span class="n">border_radius</span><span class="o">=</span><span class="mi">15</span><span class="p">,</span>
        <span class="p">)</span>

        <span class="n">left_column</span> <span class="o">=</span> <span class="p">[]</span>
        <span class="n">right_column</span> <span class="o">=</span> <span class="p">[]</span>

        <span class="n">current_category</span> <span class="o">=</span> <span class="kc">None</span>
        <span class="k">for</span> <span class="n">shortcut</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">shortcuts</span><span class="p">:</span>
            <span class="n">key</span><span class="p">,</span> <span class="n">description</span> <span class="o">=</span> <span class="n">shortcut</span>

            <span class="k">if</span> <span class="n">description</span> <span class="o">==</span> <span class="s2">&quot;&quot;</span> <span class="ow">and</span> <span class="n">key</span> <span class="o">!=</span> <span class="s2">&quot;&quot;</span><span class="p">:</span>
                <span class="n">current_category</span> <span class="o">=</span> <span class="n">key</span>

            <span class="k">if</span> <span class="n">current_category</span> <span class="ow">in</span> <span class="p">[</span><span class="s2">&quot;General&quot;</span><span class="p">,</span> <span class="s2">&quot;Property Buying&quot;</span><span class="p">,</span> <span class="s2">&quot;Auction&quot;</span><span class="p">]:</span>
                <span class="n">left_column</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">shortcut</span><span class="p">)</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="n">right_column</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">shortcut</span><span class="p">)</span>

        <span class="c1"># draw left column</span>
        <span class="n">y_offset</span> <span class="o">=</span> <span class="n">panel_y</span> <span class="o">+</span> <span class="mi">10</span>
        <span class="n">section_header_font</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">button_font</span>

        <span class="k">for</span> <span class="n">i</span><span class="p">,</span> <span class="p">(</span><span class="n">key</span><span class="p">,</span> <span class="n">description</span><span class="p">)</span> <span class="ow">in</span> <span class="nb">enumerate</span><span class="p">(</span><span class="n">left_column</span><span class="p">):</span>
            <span class="k">if</span> <span class="n">key</span> <span class="o">==</span> <span class="s2">&quot;&quot;</span> <span class="ow">and</span> <span class="n">description</span> <span class="o">==</span> <span class="s2">&quot;&quot;</span><span class="p">:</span>
                <span class="n">y_offset</span> <span class="o">+=</span> <span class="mi">15</span>
                <span class="k">continue</span>

            <span class="k">if</span> <span class="n">description</span> <span class="o">==</span> <span class="s2">&quot;&quot;</span><span class="p">:</span>
                <span class="n">text_surface</span> <span class="o">=</span> <span class="n">section_header_font</span><span class="o">.</span><span class="n">render</span><span class="p">(</span><span class="n">key</span><span class="p">,</span> <span class="kc">True</span><span class="p">,</span> <span class="n">ACCENT_COLOR</span><span class="p">)</span>
                <span class="n">text_rect</span> <span class="o">=</span> <span class="n">text_surface</span><span class="o">.</span><span class="n">get_rect</span><span class="p">(</span><span class="n">x</span><span class="o">=</span><span class="n">panel_x</span> <span class="o">+</span> <span class="mi">30</span><span class="p">,</span> <span class="n">y</span><span class="o">=</span><span class="n">y_offset</span><span class="p">)</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">screen</span><span class="o">.</span><span class="n">blit</span><span class="p">(</span><span class="n">text_surface</span><span class="p">,</span> <span class="n">text_rect</span><span class="p">)</span>
                <span class="n">y_offset</span> <span class="o">+=</span> <span class="mi">35</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="n">key_width</span> <span class="o">=</span> <span class="mi">200</span>
                <span class="n">key_surface</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">small_font</span><span class="o">.</span><span class="n">render</span><span class="p">(</span><span class="n">key</span><span class="p">,</span> <span class="kc">True</span><span class="p">,</span> <span class="n">BLACK</span><span class="p">)</span>
                <span class="n">key_rect</span> <span class="o">=</span> <span class="n">key_surface</span><span class="o">.</span><span class="n">get_rect</span><span class="p">(</span><span class="n">x</span><span class="o">=</span><span class="n">panel_x</span> <span class="o">+</span> <span class="mi">50</span><span class="p">,</span> <span class="n">y</span><span class="o">=</span><span class="n">y_offset</span><span class="p">)</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">screen</span><span class="o">.</span><span class="n">blit</span><span class="p">(</span><span class="n">key_surface</span><span class="p">,</span> <span class="n">key_rect</span><span class="p">)</span>

                <span class="n">desc_surface</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">small_font</span><span class="o">.</span><span class="n">render</span><span class="p">(</span><span class="n">description</span><span class="p">,</span> <span class="kc">True</span><span class="p">,</span> <span class="n">BLACK</span><span class="p">)</span>
                <span class="n">desc_rect</span> <span class="o">=</span> <span class="n">desc_surface</span><span class="o">.</span><span class="n">get_rect</span><span class="p">(</span>
                    <span class="n">x</span><span class="o">=</span><span class="n">panel_x</span> <span class="o">+</span> <span class="mi">50</span> <span class="o">+</span> <span class="n">key_width</span><span class="p">,</span> <span class="n">y</span><span class="o">=</span><span class="n">y_offset</span>
                <span class="p">)</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">screen</span><span class="o">.</span><span class="n">blit</span><span class="p">(</span><span class="n">desc_surface</span><span class="p">,</span> <span class="n">desc_rect</span><span class="p">)</span>

                <span class="n">y_offset</span> <span class="o">+=</span> <span class="mi">30</span>

        <span class="c1"># draw right column</span>
        <span class="n">y_offset</span> <span class="o">=</span> <span class="n">panel_y</span> <span class="o">+</span> <span class="mi">10</span>
        <span class="n">right_x</span> <span class="o">=</span> <span class="n">panel_x</span> <span class="o">+</span> <span class="n">panel_width</span> <span class="o">//</span> <span class="mi">2</span>

        <span class="k">for</span> <span class="n">i</span><span class="p">,</span> <span class="p">(</span><span class="n">key</span><span class="p">,</span> <span class="n">description</span><span class="p">)</span> <span class="ow">in</span> <span class="nb">enumerate</span><span class="p">(</span><span class="n">right_column</span><span class="p">):</span>
            <span class="k">if</span> <span class="n">key</span> <span class="o">==</span> <span class="s2">&quot;&quot;</span> <span class="ow">and</span> <span class="n">description</span> <span class="o">==</span> <span class="s2">&quot;&quot;</span><span class="p">:</span>
                <span class="n">y_offset</span> <span class="o">+=</span> <span class="mi">15</span>
                <span class="k">continue</span>

            <span class="k">if</span> <span class="n">description</span> <span class="o">==</span> <span class="s2">&quot;&quot;</span><span class="p">:</span>
                <span class="n">text_surface</span> <span class="o">=</span> <span class="n">section_header_font</span><span class="o">.</span><span class="n">render</span><span class="p">(</span><span class="n">key</span><span class="p">,</span> <span class="kc">True</span><span class="p">,</span> <span class="n">ACCENT_COLOR</span><span class="p">)</span>
                <span class="n">text_rect</span> <span class="o">=</span> <span class="n">text_surface</span><span class="o">.</span><span class="n">get_rect</span><span class="p">(</span><span class="n">x</span><span class="o">=</span><span class="n">right_x</span> <span class="o">+</span> <span class="mi">30</span><span class="p">,</span> <span class="n">y</span><span class="o">=</span><span class="n">y_offset</span><span class="p">)</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">screen</span><span class="o">.</span><span class="n">blit</span><span class="p">(</span><span class="n">text_surface</span><span class="p">,</span> <span class="n">text_rect</span><span class="p">)</span>
                <span class="n">y_offset</span> <span class="o">+=</span> <span class="mi">35</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="n">key_width</span> <span class="o">=</span> <span class="mi">200</span>
                <span class="n">key_surface</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">small_font</span><span class="o">.</span><span class="n">render</span><span class="p">(</span><span class="n">key</span><span class="p">,</span> <span class="kc">True</span><span class="p">,</span> <span class="n">BLACK</span><span class="p">)</span>
                <span class="n">key_rect</span> <span class="o">=</span> <span class="n">key_surface</span><span class="o">.</span><span class="n">get_rect</span><span class="p">(</span><span class="n">x</span><span class="o">=</span><span class="n">right_x</span> <span class="o">+</span> <span class="mi">50</span><span class="p">,</span> <span class="n">y</span><span class="o">=</span><span class="n">y_offset</span><span class="p">)</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">screen</span><span class="o">.</span><span class="n">blit</span><span class="p">(</span><span class="n">key_surface</span><span class="p">,</span> <span class="n">key_rect</span><span class="p">)</span>

                <span class="n">desc_surface</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">small_font</span><span class="o">.</span><span class="n">render</span><span class="p">(</span><span class="n">description</span><span class="p">,</span> <span class="kc">True</span><span class="p">,</span> <span class="n">BLACK</span><span class="p">)</span>
                <span class="n">desc_rect</span> <span class="o">=</span> <span class="n">desc_surface</span><span class="o">.</span><span class="n">get_rect</span><span class="p">(</span>
                    <span class="n">x</span><span class="o">=</span><span class="n">right_x</span> <span class="o">+</span> <span class="mi">50</span> <span class="o">+</span> <span class="n">key_width</span><span class="p">,</span> <span class="n">y</span><span class="o">=</span><span class="n">y_offset</span>
                <span class="p">)</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">screen</span><span class="o">.</span><span class="n">blit</span><span class="p">(</span><span class="n">desc_surface</span><span class="p">,</span> <span class="n">desc_rect</span><span class="p">)</span>

                <span class="n">y_offset</span> <span class="o">+=</span> <span class="mi">30</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">back_button</span><span class="o">.</span><span class="n">draw</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">screen</span><span class="p">)</span>

        <span class="n">hint_text</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">small_font</span><span class="o">.</span><span class="n">render</span><span class="p">(</span>
            <span class="s2">&quot;Press ESC or BACKSPACE to return&quot;</span><span class="p">,</span> <span class="kc">True</span><span class="p">,</span> <span class="n">LIGHT_GRAY</span>
        <span class="p">)</span>
        <span class="n">hint_rect</span> <span class="o">=</span> <span class="n">hint_text</span><span class="o">.</span><span class="n">get_rect</span><span class="p">(</span>
            <span class="n">right</span><span class="o">=</span><span class="n">get_window_size</span><span class="p">()[</span><span class="mi">0</span><span class="p">]</span> <span class="o">-</span> <span class="mi">20</span><span class="p">,</span> <span class="n">y</span><span class="o">=</span><span class="n">get_window_size</span><span class="p">()[</span><span class="mi">1</span><span class="p">]</span> <span class="o">-</span> <span class="mi">180</span>
        <span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">screen</span><span class="o">.</span><span class="n">blit</span><span class="p">(</span><span class="n">hint_text</span><span class="p">,</span> <span class="n">hint_rect</span><span class="p">)</span>

        <span class="n">pygame</span><span class="o">.</span><span class="n">display</span><span class="o">.</span><span class="n">flip</span><span class="p">()</span></div>


<div class="viewcode-block" id="KeyboardShortcutsPage.handle_click">
<a class="viewcode-back" href="../../modules/ui.html#src.UI.KeyboardShortcutsPage.handle_click">[docs]</a>
    <span class="k">def</span><span class="w"> </span><span class="nf">handle_click</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">pos</span><span class="p">):</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">back_button</span><span class="o">.</span><span class="n">check_hover</span><span class="p">(</span><span class="n">pos</span><span class="p">):</span>
            <span class="k">return</span> <span class="kc">True</span>
        <span class="k">return</span> <span class="kc">None</span></div>


<div class="viewcode-block" id="KeyboardShortcutsPage.handle_motion">
<a class="viewcode-back" href="../../modules/ui.html#src.UI.KeyboardShortcutsPage.handle_motion">[docs]</a>
    <span class="k">def</span><span class="w"> </span><span class="nf">handle_motion</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">pos</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">back_button</span><span class="o">.</span><span class="n">check_hover</span><span class="p">(</span><span class="n">pos</span><span class="p">)</span></div>


<div class="viewcode-block" id="KeyboardShortcutsPage.handle_key">
<a class="viewcode-back" href="../../modules/ui.html#src.UI.KeyboardShortcutsPage.handle_key">[docs]</a>
    <span class="k">def</span><span class="w"> </span><span class="nf">handle_key</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">event</span><span class="p">):</span>
        <span class="k">if</span> <span class="n">event</span><span class="o">.</span><span class="n">key</span> <span class="ow">in</span> <span class="p">[</span><span class="n">pygame</span><span class="o">.</span><span class="n">K_ESCAPE</span><span class="p">,</span> <span class="n">pygame</span><span class="o">.</span><span class="n">K_BACKSPACE</span><span class="p">]:</span>
            <span class="k">return</span> <span class="kc">True</span>
        <span class="k">return</span> <span class="kc">None</span></div>
</div>



<span class="c1"># page for selecting game mode (full/abridged) and time limit</span>
<div class="viewcode-block" id="GameModePage">
<a class="viewcode-back" href="../../modules/ui.html#src.UI.GameModePage">[docs]</a>
<span class="k">class</span><span class="w"> </span><span class="nc">GameModePage</span><span class="p">(</span><span class="n">BasePage</span><span class="p">):</span>
    <span class="k">def</span><span class="w"> </span><span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">instructions</span><span class="o">=</span><span class="kc">None</span><span class="p">):</span>
        <span class="nb">super</span><span class="p">()</span><span class="o">.</span><span class="fm">__init__</span><span class="p">(</span><span class="n">instructions</span><span class="o">=</span><span class="n">instructions</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">small_font</span> <span class="o">=</span> <span class="n">font_manager</span><span class="o">.</span><span class="n">get_font</span><span class="p">(</span><span class="mi">24</span><span class="p">)</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">game_mode</span> <span class="o">=</span> <span class="s2">&quot;full&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">time_limit</span> <span class="o">=</span> <span class="kc">None</span>

        <span class="c1"># input field for custom time limit</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">custom_time_input</span> <span class="o">=</span> <span class="n">UIInput</span><span class="p">(</span>
            <span class="n">pygame</span><span class="o">.</span><span class="n">Rect</span><span class="p">(</span>
                <span class="p">(</span><span class="n">get_window_size</span><span class="p">()[</span><span class="mi">0</span><span class="p">]</span> <span class="o">-</span> <span class="mi">300</span><span class="p">)</span> <span class="o">//</span> <span class="mi">2</span><span class="p">,</span>
                <span class="n">get_window_size</span><span class="p">()[</span><span class="mi">1</span><span class="p">]</span> <span class="o">//</span> <span class="mi">2</span> <span class="o">+</span> <span class="mi">50</span><span class="p">,</span>
                <span class="mi">300</span><span class="p">,</span>
                <span class="mi">60</span><span class="p">,</span>
            <span class="p">),</span>
            <span class="s2">&quot;30&quot;</span><span class="p">,</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">button_font</span><span class="p">,</span>
            <span class="n">active_color</span><span class="o">=</span><span class="n">TIME_COLOR</span><span class="p">,</span>
        <span class="p">)</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">custom_time_input</span><span class="o">.</span><span class="n">placeholder</span> <span class="o">=</span> <span class="s2">&quot;Enter time...&quot;</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">last_time_input</span> <span class="o">=</span> <span class="s2">&quot;30&quot;</span>

        <span class="n">mode_button_width</span> <span class="o">=</span> <span class="mi">400</span>
        <span class="n">button_height</span> <span class="o">=</span> <span class="mi">60</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">mode_button</span> <span class="o">=</span> <span class="n">UIButton</span><span class="p">(</span>
            <span class="n">pygame</span><span class="o">.</span><span class="n">Rect</span><span class="p">(</span>
                <span class="p">(</span><span class="n">get_window_size</span><span class="p">()[</span><span class="mi">0</span><span class="p">]</span> <span class="o">-</span> <span class="n">mode_button_width</span><span class="p">)</span> <span class="o">//</span> <span class="mi">2</span><span class="p">,</span>
                <span class="n">get_window_size</span><span class="p">()[</span><span class="mi">1</span><span class="p">]</span> <span class="o">//</span> <span class="mi">2</span> <span class="o">-</span> <span class="mi">120</span><span class="p">,</span>
                <span class="n">mode_button_width</span><span class="p">,</span>
                <span class="n">button_height</span><span class="p">,</span>
            <span class="p">),</span>
            <span class="s2">&quot;Game Mode: Full Game&quot;</span><span class="p">,</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">button_font</span><span class="p">,</span>
            <span class="n">color</span><span class="o">=</span><span class="n">MODE_COLOR</span><span class="p">,</span>
        <span class="p">)</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">time_label</span> <span class="o">=</span> <span class="s2">&quot;Time Limit (minutes, max 180):&quot;</span>

        <span class="n">button_width</span> <span class="o">=</span> <span class="mi">300</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">start_button</span> <span class="o">=</span> <span class="n">UIButton</span><span class="p">(</span>
            <span class="n">pygame</span><span class="o">.</span><span class="n">Rect</span><span class="p">(</span>
                <span class="p">(</span><span class="n">get_window_size</span><span class="p">()[</span><span class="mi">0</span><span class="p">]</span> <span class="o">-</span> <span class="n">button_width</span><span class="p">)</span> <span class="o">//</span> <span class="mi">2</span><span class="p">,</span>
                <span class="n">get_window_size</span><span class="p">()[</span><span class="mi">1</span><span class="p">]</span> <span class="o">-</span> <span class="mi">120</span><span class="p">,</span>
                <span class="n">button_width</span><span class="p">,</span>
                <span class="n">button_height</span><span class="p">,</span>
            <span class="p">),</span>
            <span class="s2">&quot;Start Game&quot;</span><span class="p">,</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">button_font</span><span class="p">,</span>
        <span class="p">)</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">back_button</span> <span class="o">=</span> <span class="n">UIButton</span><span class="p">(</span>
            <span class="n">pygame</span><span class="o">.</span><span class="n">Rect</span><span class="p">(</span><span class="mi">20</span><span class="p">,</span> <span class="n">get_window_size</span><span class="p">()[</span><span class="mi">1</span><span class="p">]</span> <span class="o">-</span> <span class="mi">80</span><span class="p">,</span> <span class="mi">200</span><span class="p">,</span> <span class="n">button_height</span><span class="p">),</span>
            <span class="s2">&quot;Back&quot;</span><span class="p">,</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">button_font</span><span class="p">,</span>
        <span class="p">)</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">full_game_text</span> <span class="o">=</span> <span class="s2">&quot;Full Game: Last player standing wins&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">abridged_text</span> <span class="o">=</span> <span class="s2">&quot;Abridged Game: Highest value after time limit wins&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">input_error</span> <span class="o">=</span> <span class="kc">None</span>

<div class="viewcode-block" id="GameModePage.draw">
<a class="viewcode-back" href="../../modules/ui.html#src.UI.GameModePage.draw">[docs]</a>
    <span class="k">def</span><span class="w"> </span><span class="nf">draw</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">draw_background</span><span class="p">()</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">draw_title</span><span class="p">()</span>

        <span class="n">mode_title</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">button_font</span><span class="o">.</span><span class="n">render</span><span class="p">(</span><span class="s2">&quot;Select Game Mode&quot;</span><span class="p">,</span> <span class="kc">True</span><span class="p">,</span> <span class="n">WHITE</span><span class="p">)</span>
        <span class="n">mode_title_rect</span> <span class="o">=</span> <span class="n">mode_title</span><span class="o">.</span><span class="n">get_rect</span><span class="p">(</span><span class="n">centerx</span><span class="o">=</span><span class="n">get_window_size</span><span class="p">()[</span><span class="mi">0</span><span class="p">]</span> <span class="o">//</span> <span class="mi">2</span><span class="p">,</span> <span class="n">y</span><span class="o">=</span><span class="mi">100</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">screen</span><span class="o">.</span><span class="n">blit</span><span class="p">(</span><span class="n">mode_title</span><span class="p">,</span> <span class="n">mode_title_rect</span><span class="p">)</span>

        <span class="c1"># draw mode button</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">mode_button</span><span class="o">.</span><span class="n">rect</span><span class="o">.</span><span class="n">y</span> <span class="o">=</span> <span class="n">get_window_size</span><span class="p">()[</span><span class="mi">1</span><span class="p">]</span> <span class="o">//</span> <span class="mi">2</span> <span class="o">-</span> <span class="mi">120</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">mode_button</span><span class="o">.</span><span class="n">text</span> <span class="o">=</span> <span class="p">(</span>
            <span class="sa">f</span><span class="s2">&quot;Game Mode: </span><span class="si">{</span><span class="s1">&#39;Abridged&#39;</span><span class="w"> </span><span class="k">if</span><span class="w"> </span><span class="bp">self</span><span class="o">.</span><span class="n">game_mode</span><span class="w"> </span><span class="o">==</span><span class="w"> </span><span class="s1">&#39;abridged&#39;</span><span class="w"> </span><span class="k">else</span><span class="w"> </span><span class="s1">&#39;Full Game&#39;</span><span class="si">}</span><span class="s2">&quot;</span>
        <span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">mode_button</span><span class="o">.</span><span class="n">draw</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">screen</span><span class="p">)</span>

        <span class="n">mode_info</span> <span class="o">=</span> <span class="p">(</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">abridged_text</span> <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">game_mode</span> <span class="o">==</span> <span class="s2">&quot;abridged&quot;</span> <span class="k">else</span> <span class="bp">self</span><span class="o">.</span><span class="n">full_game_text</span>
        <span class="p">)</span>
        <span class="n">info_text</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">small_font</span><span class="o">.</span><span class="n">render</span><span class="p">(</span><span class="n">mode_info</span><span class="p">,</span> <span class="kc">True</span><span class="p">,</span> <span class="n">LIGHT_GRAY</span><span class="p">)</span>
        <span class="n">info_rect</span> <span class="o">=</span> <span class="n">info_text</span><span class="o">.</span><span class="n">get_rect</span><span class="p">(</span>
            <span class="n">centerx</span><span class="o">=</span><span class="n">get_window_size</span><span class="p">()[</span><span class="mi">0</span><span class="p">]</span> <span class="o">//</span> <span class="mi">2</span><span class="p">,</span> <span class="n">top</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">mode_button</span><span class="o">.</span><span class="n">rect</span><span class="o">.</span><span class="n">bottom</span> <span class="o">+</span> <span class="mi">10</span>
        <span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">screen</span><span class="o">.</span><span class="n">blit</span><span class="p">(</span><span class="n">info_text</span><span class="p">,</span> <span class="n">info_rect</span><span class="p">)</span>

        <span class="c1"># draw time limit input if abridged mode</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">game_mode</span> <span class="o">==</span> <span class="s2">&quot;abridged&quot;</span><span class="p">:</span>
            <span class="n">label_text</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">small_font</span><span class="o">.</span><span class="n">render</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">time_label</span><span class="p">,</span> <span class="kc">True</span><span class="p">,</span> <span class="n">LIGHT_GRAY</span><span class="p">)</span>
            <span class="n">label_rect</span> <span class="o">=</span> <span class="n">label_text</span><span class="o">.</span><span class="n">get_rect</span><span class="p">(</span>
                <span class="n">centerx</span><span class="o">=</span><span class="n">get_window_size</span><span class="p">()[</span><span class="mi">0</span><span class="p">]</span> <span class="o">//</span> <span class="mi">2</span><span class="p">,</span>
                <span class="n">bottom</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">custom_time_input</span><span class="o">.</span><span class="n">rect</span><span class="o">.</span><span class="n">top</span> <span class="o">-</span> <span class="mi">15</span><span class="p">,</span>
            <span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">screen</span><span class="o">.</span><span class="n">blit</span><span class="p">(</span><span class="n">label_text</span><span class="p">,</span> <span class="n">label_rect</span><span class="p">)</span>

            <span class="bp">self</span><span class="o">.</span><span class="n">custom_time_input</span><span class="o">.</span><span class="n">draw</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">screen</span><span class="p">)</span>

            <span class="c1"># show error message if input is bad</span>
            <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">input_error</span><span class="p">:</span>
                <span class="n">error_text</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">small_font</span><span class="o">.</span><span class="n">render</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">input_error</span><span class="p">,</span> <span class="kc">True</span><span class="p">,</span> <span class="n">ERROR_COLOR</span><span class="p">)</span>
                <span class="n">error_rect</span> <span class="o">=</span> <span class="n">error_text</span><span class="o">.</span><span class="n">get_rect</span><span class="p">(</span>
                    <span class="n">centerx</span><span class="o">=</span><span class="n">get_window_size</span><span class="p">()[</span><span class="mi">0</span><span class="p">]</span> <span class="o">//</span> <span class="mi">2</span><span class="p">,</span>
                    <span class="n">top</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">custom_time_input</span><span class="o">.</span><span class="n">rect</span><span class="o">.</span><span class="n">bottom</span> <span class="o">+</span> <span class="mi">5</span><span class="p">,</span>
                <span class="p">)</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">screen</span><span class="o">.</span><span class="n">blit</span><span class="p">(</span><span class="n">error_text</span><span class="p">,</span> <span class="n">error_rect</span><span class="p">)</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="c1"># show info about the time limit</span>
                <span class="k">try</span><span class="p">:</span>
                    <span class="n">minutes</span> <span class="o">=</span> <span class="nb">int</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">custom_time_input</span><span class="o">.</span><span class="n">text</span><span class="p">)</span>
                    <span class="n">time_info</span> <span class="o">=</span> <span class="sa">f</span><span class="s2">&quot;Game will end after </span><span class="si">{</span><span class="n">minutes</span><span class="si">}</span><span class="s2"> minutes&quot;</span>
                    <span class="n">time_text</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">small_font</span><span class="o">.</span><span class="n">render</span><span class="p">(</span><span class="n">time_info</span><span class="p">,</span> <span class="kc">True</span><span class="p">,</span> <span class="n">LIGHT_GRAY</span><span class="p">)</span>
                    <span class="n">time_rect</span> <span class="o">=</span> <span class="n">time_text</span><span class="o">.</span><span class="n">get_rect</span><span class="p">(</span>
                        <span class="n">centerx</span><span class="o">=</span><span class="n">get_window_size</span><span class="p">()[</span><span class="mi">0</span><span class="p">]</span> <span class="o">//</span> <span class="mi">2</span><span class="p">,</span>
                        <span class="n">top</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">custom_time_input</span><span class="o">.</span><span class="n">rect</span><span class="o">.</span><span class="n">bottom</span> <span class="o">+</span> <span class="mi">5</span><span class="p">,</span>
                    <span class="p">)</span>
                    <span class="bp">self</span><span class="o">.</span><span class="n">screen</span><span class="o">.</span><span class="n">blit</span><span class="p">(</span><span class="n">time_text</span><span class="p">,</span> <span class="n">time_rect</span><span class="p">)</span>
                <span class="k">except</span> <span class="ne">ValueError</span><span class="p">:</span>
                    <span class="k">pass</span>  <span class="c1"># ignore if text isn&#39;t a number yet</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">start_button</span><span class="o">.</span><span class="n">draw</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">screen</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">back_button</span><span class="o">.</span><span class="n">draw</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">screen</span><span class="p">)</span>

        <span class="n">controls</span> <span class="o">=</span> <span class="p">[</span>
            <span class="s2">&quot;Controls: / to navigate&quot;</span><span class="p">,</span>
            <span class="s2">&quot;M - Change game mode&quot;</span><span class="p">,</span>
        <span class="p">]</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">game_mode</span> <span class="o">==</span> <span class="s2">&quot;abridged&quot;</span><span class="p">:</span>
            <span class="n">controls</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="s2">&quot;Click on time input to enter custom time&quot;</span><span class="p">)</span>

        <span class="n">y_offset</span> <span class="o">=</span> <span class="n">get_window_size</span><span class="p">()[</span><span class="mi">1</span><span class="p">]</span> <span class="o">-</span> <span class="mi">180</span>
        <span class="k">for</span> <span class="n">hint</span> <span class="ow">in</span> <span class="n">controls</span><span class="p">:</span>
            <span class="n">hint_text</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">small_font</span><span class="o">.</span><span class="n">render</span><span class="p">(</span><span class="n">hint</span><span class="p">,</span> <span class="kc">True</span><span class="p">,</span> <span class="n">LIGHT_GRAY</span><span class="p">)</span>
            <span class="n">hint_rect</span> <span class="o">=</span> <span class="n">hint_text</span><span class="o">.</span><span class="n">get_rect</span><span class="p">(</span><span class="n">right</span><span class="o">=</span><span class="n">get_window_size</span><span class="p">()[</span><span class="mi">0</span><span class="p">]</span> <span class="o">-</span> <span class="mi">20</span><span class="p">,</span> <span class="n">y</span><span class="o">=</span><span class="n">y_offset</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">screen</span><span class="o">.</span><span class="n">blit</span><span class="p">(</span><span class="n">hint_text</span><span class="p">,</span> <span class="n">hint_rect</span><span class="p">)</span>
            <span class="n">y_offset</span> <span class="o">+=</span> <span class="mi">25</span>

        <span class="n">pygame</span><span class="o">.</span><span class="n">display</span><span class="o">.</span><span class="n">flip</span><span class="p">()</span></div>


<div class="viewcode-block" id="GameModePage.handle_click">
<a class="viewcode-back" href="../../modules/ui.html#src.UI.GameModePage.handle_click">[docs]</a>
    <span class="k">def</span><span class="w"> </span><span class="nf">handle_click</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">pos</span><span class="p">):</span>
        <span class="c1"># handle clicks on mode button, time input, start, back</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">mode_button</span><span class="o">.</span><span class="n">check_hover</span><span class="p">(</span><span class="n">pos</span><span class="p">):</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">game_mode</span> <span class="o">=</span> <span class="s2">&quot;abridged&quot;</span> <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">game_mode</span> <span class="o">==</span> <span class="s2">&quot;full&quot;</span> <span class="k">else</span> <span class="s2">&quot;full&quot;</span>
            <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">game_mode</span> <span class="o">==</span> <span class="s2">&quot;abridged&quot;</span><span class="p">:</span>
                <span class="k">try</span><span class="p">:</span>
                    <span class="n">minutes</span> <span class="o">=</span> <span class="nb">int</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">custom_time_input</span><span class="o">.</span><span class="n">text</span><span class="p">)</span>
                    <span class="k">if</span> <span class="n">minutes</span> <span class="o">&gt;</span> <span class="mi">180</span><span class="p">:</span>
                        <span class="n">minutes</span> <span class="o">=</span> <span class="mi">180</span>
                        <span class="bp">self</span><span class="o">.</span><span class="n">custom_time_input</span><span class="o">.</span><span class="n">text</span> <span class="o">=</span> <span class="s2">&quot;180&quot;</span>
                    <span class="bp">self</span><span class="o">.</span><span class="n">time_limit</span> <span class="o">=</span> <span class="n">minutes</span> <span class="o">*</span> <span class="mi">60</span>
                    <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Custom time limit set: </span><span class="si">{</span><span class="n">minutes</span><span class="si">}</span><span class="s2"> minutes&quot;</span><span class="p">)</span>
                <span class="k">except</span> <span class="ne">ValueError</span><span class="p">:</span>
                    <span class="bp">self</span><span class="o">.</span><span class="n">time_limit</span> <span class="o">=</span> <span class="mi">30</span> <span class="o">*</span> <span class="mi">60</span>
                    <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;Default time limit set: 30 minutes&quot;</span><span class="p">)</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">time_limit</span> <span class="o">=</span> <span class="kc">None</span>
                <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;Game mode changed to Full Game (no time limit)&quot;</span><span class="p">)</span>
            <span class="k">return</span> <span class="kc">False</span>

        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">game_mode</span> <span class="o">==</span> <span class="s2">&quot;abridged&quot;</span> <span class="ow">and</span> <span class="bp">self</span><span class="o">.</span><span class="n">custom_time_input</span><span class="o">.</span><span class="n">rect</span><span class="o">.</span><span class="n">collidepoint</span><span class="p">(</span>
            <span class="n">pos</span>
        <span class="p">):</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">custom_time_input</span><span class="o">.</span><span class="n">active</span> <span class="o">=</span> <span class="kc">True</span>
            <span class="k">return</span> <span class="kc">False</span>

        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">start_button</span><span class="o">.</span><span class="n">check_hover</span><span class="p">(</span><span class="n">pos</span><span class="p">):</span>
            <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">game_mode</span> <span class="o">==</span> <span class="s2">&quot;abridged&quot;</span><span class="p">:</span>
                <span class="k">try</span><span class="p">:</span>
                    <span class="n">minutes</span> <span class="o">=</span> <span class="nb">int</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">custom_time_input</span><span class="o">.</span><span class="n">text</span><span class="p">)</span>
                    <span class="k">if</span> <span class="n">minutes</span> <span class="o">&lt;=</span> <span class="mi">0</span><span class="p">:</span>
                        <span class="bp">self</span><span class="o">.</span><span class="n">input_error</span> <span class="o">=</span> <span class="s2">&quot;Time must be greater than 0&quot;</span>
                        <span class="k">return</span> <span class="kc">False</span>
                    <span class="k">if</span> <span class="n">minutes</span> <span class="o">&gt;</span> <span class="mi">180</span><span class="p">:</span>
                        <span class="bp">self</span><span class="o">.</span><span class="n">input_error</span> <span class="o">=</span> <span class="s2">&quot;Time cannot exceed 180 minutes&quot;</span>
                        <span class="bp">self</span><span class="o">.</span><span class="n">custom_time_input</span><span class="o">.</span><span class="n">text</span> <span class="o">=</span> <span class="s2">&quot;180&quot;</span>
                        <span class="n">minutes</span> <span class="o">=</span> <span class="mi">180</span>
                    <span class="bp">self</span><span class="o">.</span><span class="n">time_limit</span> <span class="o">=</span> <span class="n">minutes</span> <span class="o">*</span> <span class="mi">60</span>
                    <span class="bp">self</span><span class="o">.</span><span class="n">input_error</span> <span class="o">=</span> <span class="kc">None</span>
                    <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Starting abridged game with time limit: </span><span class="si">{</span><span class="n">minutes</span><span class="si">}</span><span class="s2"> minutes&quot;</span><span class="p">)</span>
                <span class="k">except</span> <span class="ne">ValueError</span><span class="p">:</span>
                    <span class="bp">self</span><span class="o">.</span><span class="n">input_error</span> <span class="o">=</span> <span class="s2">&quot;Please enter a valid number&quot;</span>
                    <span class="k">return</span> <span class="kc">False</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;Starting full game (no time limit)&quot;</span><span class="p">)</span>
            <span class="k">return</span> <span class="kc">True</span>

        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">back_button</span><span class="o">.</span><span class="n">check_hover</span><span class="p">(</span><span class="n">pos</span><span class="p">):</span>
            <span class="k">return</span> <span class="s2">&quot;back&quot;</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">custom_time_input</span><span class="o">.</span><span class="n">active</span> <span class="o">=</span> <span class="kc">False</span>
        <span class="k">return</span> <span class="kc">False</span></div>


<div class="viewcode-block" id="GameModePage.handle_motion">
<a class="viewcode-back" href="../../modules/ui.html#src.UI.GameModePage.handle_motion">[docs]</a>
    <span class="k">def</span><span class="w"> </span><span class="nf">handle_motion</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">pos</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">mode_button</span><span class="o">.</span><span class="n">check_hover</span><span class="p">(</span><span class="n">pos</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">start_button</span><span class="o">.</span><span class="n">check_hover</span><span class="p">(</span><span class="n">pos</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">back_button</span><span class="o">.</span><span class="n">check_hover</span><span class="p">(</span><span class="n">pos</span><span class="p">)</span></div>


<div class="viewcode-block" id="GameModePage.handle_key">
<a class="viewcode-back" href="../../modules/ui.html#src.UI.GameModePage.handle_key">[docs]</a>
    <span class="k">def</span><span class="w"> </span><span class="nf">handle_key</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">event</span><span class="p">):</span>
        <span class="c1"># handle keyboard input for time entry and navigation</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">custom_time_input</span><span class="o">.</span><span class="n">active</span> <span class="ow">and</span> <span class="bp">self</span><span class="o">.</span><span class="n">game_mode</span> <span class="o">==</span> <span class="s2">&quot;abridged&quot;</span><span class="p">:</span>
            <span class="c1"># handle typing in time input field</span>
            <span class="k">if</span> <span class="n">event</span><span class="o">.</span><span class="n">key</span> <span class="o">==</span> <span class="n">pygame</span><span class="o">.</span><span class="n">K_RETURN</span><span class="p">:</span>
                <span class="k">try</span><span class="p">:</span>
                    <span class="n">minutes</span> <span class="o">=</span> <span class="nb">int</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">custom_time_input</span><span class="o">.</span><span class="n">text</span><span class="p">)</span>
                    <span class="k">if</span> <span class="n">minutes</span> <span class="o">&lt;=</span> <span class="mi">0</span><span class="p">:</span>
                        <span class="bp">self</span><span class="o">.</span><span class="n">input_error</span> <span class="o">=</span> <span class="s2">&quot;Time must be greater than 0&quot;</span>
                        <span class="k">return</span> <span class="kc">False</span>
                    <span class="k">if</span> <span class="n">minutes</span> <span class="o">&gt;</span> <span class="mi">180</span><span class="p">:</span>
                        <span class="bp">self</span><span class="o">.</span><span class="n">input_error</span> <span class="o">=</span> <span class="s2">&quot;Time cannot exceed 180 minutes&quot;</span>
                        <span class="bp">self</span><span class="o">.</span><span class="n">custom_time_input</span><span class="o">.</span><span class="n">text</span> <span class="o">=</span> <span class="s2">&quot;180&quot;</span>
                        <span class="n">minutes</span> <span class="o">=</span> <span class="mi">180</span>
                    <span class="bp">self</span><span class="o">.</span><span class="n">time_limit</span> <span class="o">=</span> <span class="n">minutes</span> <span class="o">*</span> <span class="mi">60</span>
                    <span class="bp">self</span><span class="o">.</span><span class="n">input_error</span> <span class="o">=</span> <span class="kc">None</span>
                    <span class="bp">self</span><span class="o">.</span><span class="n">custom_time_input</span><span class="o">.</span><span class="n">active</span> <span class="o">=</span> <span class="kc">False</span>
                    <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Custom time limit set: </span><span class="si">{</span><span class="n">minutes</span><span class="si">}</span><span class="s2"> minutes&quot;</span><span class="p">)</span>
                <span class="k">except</span> <span class="ne">ValueError</span><span class="p">:</span>
                    <span class="bp">self</span><span class="o">.</span><span class="n">input_error</span> <span class="o">=</span> <span class="s2">&quot;Please enter a valid number&quot;</span>
                <span class="k">return</span> <span class="kc">False</span>
            <span class="k">elif</span> <span class="n">event</span><span class="o">.</span><span class="n">key</span> <span class="o">==</span> <span class="n">pygame</span><span class="o">.</span><span class="n">K_ESCAPE</span> <span class="ow">or</span> <span class="n">event</span><span class="o">.</span><span class="n">key</span> <span class="o">==</span> <span class="n">pygame</span><span class="o">.</span><span class="n">K_TAB</span><span class="p">:</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">custom_time_input</span><span class="o">.</span><span class="n">active</span> <span class="o">=</span> <span class="kc">False</span>
                <span class="k">return</span> <span class="kc">False</span>
            <span class="k">elif</span> <span class="n">event</span><span class="o">.</span><span class="n">key</span> <span class="o">==</span> <span class="n">pygame</span><span class="o">.</span><span class="n">K_BACKSPACE</span><span class="p">:</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">custom_time_input</span><span class="o">.</span><span class="n">text</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">custom_time_input</span><span class="o">.</span><span class="n">text</span><span class="p">[:</span><span class="o">-</span><span class="mi">1</span><span class="p">]</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">input_error</span> <span class="o">=</span> <span class="kc">None</span>
                <span class="k">return</span> <span class="kc">False</span>
            <span class="k">elif</span> <span class="n">event</span><span class="o">.</span><span class="n">unicode</span><span class="o">.</span><span class="n">isdigit</span><span class="p">()</span> <span class="ow">and</span> <span class="nb">len</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">custom_time_input</span><span class="o">.</span><span class="n">text</span><span class="p">)</span> <span class="o">&lt;</span> <span class="mi">4</span><span class="p">:</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">custom_time_input</span><span class="o">.</span><span class="n">text</span> <span class="o">+=</span> <span class="n">event</span><span class="o">.</span><span class="n">unicode</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">input_error</span> <span class="o">=</span> <span class="kc">None</span>
                <span class="k">return</span> <span class="kc">False</span>
            <span class="k">return</span> <span class="kc">False</span>

        <span class="c1"># handle other keys like mode change, start, back</span>
        <span class="k">if</span> <span class="n">event</span><span class="o">.</span><span class="n">key</span> <span class="o">==</span> <span class="n">pygame</span><span class="o">.</span><span class="n">K_m</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">game_mode</span> <span class="o">=</span> <span class="s2">&quot;abridged&quot;</span> <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">game_mode</span> <span class="o">==</span> <span class="s2">&quot;full&quot;</span> <span class="k">else</span> <span class="s2">&quot;full&quot;</span>
            <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">game_mode</span> <span class="o">==</span> <span class="s2">&quot;abridged&quot;</span><span class="p">:</span>
                <span class="k">try</span><span class="p">:</span>
                    <span class="n">minutes</span> <span class="o">=</span> <span class="nb">int</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">custom_time_input</span><span class="o">.</span><span class="n">text</span><span class="p">)</span>
                    <span class="k">if</span> <span class="n">minutes</span> <span class="o">&gt;</span> <span class="mi">180</span><span class="p">:</span>
                        <span class="n">minutes</span> <span class="o">=</span> <span class="mi">180</span>
                        <span class="bp">self</span><span class="o">.</span><span class="n">custom_time_input</span><span class="o">.</span><span class="n">text</span> <span class="o">=</span> <span class="s2">&quot;180&quot;</span>
                    <span class="bp">self</span><span class="o">.</span><span class="n">time_limit</span> <span class="o">=</span> <span class="n">minutes</span> <span class="o">*</span> <span class="mi">60</span>
                    <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Custom time limit set: </span><span class="si">{</span><span class="n">minutes</span><span class="si">}</span><span class="s2"> minutes&quot;</span><span class="p">)</span>
                <span class="k">except</span> <span class="ne">ValueError</span><span class="p">:</span>
                    <span class="bp">self</span><span class="o">.</span><span class="n">time_limit</span> <span class="o">=</span> <span class="mi">30</span> <span class="o">*</span> <span class="mi">60</span>
                    <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;Default time limit set: 30 minutes&quot;</span><span class="p">)</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">time_limit</span> <span class="o">=</span> <span class="kc">None</span>
                <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;Game mode changed to Full Game (no time limit)&quot;</span><span class="p">)</span>
        <span class="k">elif</span> <span class="n">event</span><span class="o">.</span><span class="n">key</span> <span class="o">==</span> <span class="n">pygame</span><span class="o">.</span><span class="n">K_t</span> <span class="ow">and</span> <span class="bp">self</span><span class="o">.</span><span class="n">game_mode</span> <span class="o">==</span> <span class="s2">&quot;abridged&quot;</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">custom_time_input</span><span class="o">.</span><span class="n">active</span> <span class="o">=</span> <span class="kc">True</span>
        <span class="k">elif</span> <span class="n">event</span><span class="o">.</span><span class="n">key</span> <span class="o">==</span> <span class="n">pygame</span><span class="o">.</span><span class="n">K_SPACE</span> <span class="ow">or</span> <span class="n">event</span><span class="o">.</span><span class="n">key</span> <span class="o">==</span> <span class="n">pygame</span><span class="o">.</span><span class="n">K_RETURN</span><span class="p">:</span>
            <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">game_mode</span> <span class="o">==</span> <span class="s2">&quot;abridged&quot;</span><span class="p">:</span>
                <span class="k">try</span><span class="p">:</span>
                    <span class="n">minutes</span> <span class="o">=</span> <span class="nb">int</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">custom_time_input</span><span class="o">.</span><span class="n">text</span><span class="p">)</span>
                    <span class="k">if</span> <span class="n">minutes</span> <span class="o">&lt;=</span> <span class="mi">0</span><span class="p">:</span>
                        <span class="bp">self</span><span class="o">.</span><span class="n">input_error</span> <span class="o">=</span> <span class="s2">&quot;Time must be greater than 0&quot;</span>
                        <span class="k">return</span> <span class="kc">False</span>
                    <span class="k">if</span> <span class="n">minutes</span> <span class="o">&gt;</span> <span class="mi">180</span><span class="p">:</span>
                        <span class="bp">self</span><span class="o">.</span><span class="n">input_error</span> <span class="o">=</span> <span class="s2">&quot;Time cannot exceed 180 minutes&quot;</span>
                        <span class="bp">self</span><span class="o">.</span><span class="n">custom_time_input</span><span class="o">.</span><span class="n">text</span> <span class="o">=</span> <span class="s2">&quot;180&quot;</span>
                        <span class="n">minutes</span> <span class="o">=</span> <span class="mi">180</span>
                    <span class="bp">self</span><span class="o">.</span><span class="n">time_limit</span> <span class="o">=</span> <span class="n">minutes</span> <span class="o">*</span> <span class="mi">60</span>
                    <span class="bp">self</span><span class="o">.</span><span class="n">input_error</span> <span class="o">=</span> <span class="kc">None</span>
                    <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Starting abridged game with time limit: </span><span class="si">{</span><span class="n">minutes</span><span class="si">}</span><span class="s2"> minutes&quot;</span><span class="p">)</span>
                <span class="k">except</span> <span class="ne">ValueError</span><span class="p">:</span>
                    <span class="bp">self</span><span class="o">.</span><span class="n">input_error</span> <span class="o">=</span> <span class="s2">&quot;Please enter a valid number&quot;</span>
                    <span class="k">return</span> <span class="kc">False</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;Starting full game (no time limit)&quot;</span><span class="p">)</span>
            <span class="k">return</span> <span class="kc">True</span>
        <span class="k">elif</span> <span class="n">event</span><span class="o">.</span><span class="n">key</span> <span class="o">==</span> <span class="n">pygame</span><span class="o">.</span><span class="n">K_ESCAPE</span><span class="p">:</span>
            <span class="k">return</span> <span class="s2">&quot;back&quot;</span>
        <span class="k">return</span> <span class="kc">False</span></div>


<div class="viewcode-block" id="GameModePage.get_game_settings">
<a class="viewcode-back" href="../../modules/ui.html#src.UI.GameModePage.get_game_settings">[docs]</a>
    <span class="k">def</span><span class="w"> </span><span class="nf">get_game_settings</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="c1"># return the selected game mode and time limit</span>
        <span class="n">settings</span> <span class="o">=</span> <span class="p">{</span><span class="s2">&quot;mode&quot;</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">game_mode</span><span class="p">,</span> <span class="s2">&quot;time_limit&quot;</span><span class="p">:</span> <span class="kc">None</span><span class="p">}</span>

        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">game_mode</span> <span class="o">==</span> <span class="s2">&quot;abridged&quot;</span><span class="p">:</span>
            <span class="k">try</span><span class="p">:</span>
                <span class="n">minutes</span> <span class="o">=</span> <span class="nb">int</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">custom_time_input</span><span class="o">.</span><span class="n">text</span><span class="p">)</span>
                <span class="k">if</span> <span class="n">minutes</span> <span class="o">&gt;</span> <span class="mi">0</span><span class="p">:</span>
                    <span class="k">if</span> <span class="n">minutes</span> <span class="o">&gt;</span> <span class="mi">180</span><span class="p">:</span>
                        <span class="n">minutes</span> <span class="o">=</span> <span class="mi">180</span>
                    <span class="n">settings</span><span class="p">[</span><span class="s2">&quot;time_limit&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="n">minutes</span> <span class="o">*</span> <span class="mi">60</span>
                    <span class="nb">print</span><span class="p">(</span>
                        <span class="sa">f</span><span class="s2">&quot;Game settings: Abridged mode with </span><span class="si">{</span><span class="n">minutes</span><span class="si">}</span><span class="s2"> minutes time limit&quot;</span>
                    <span class="p">)</span>
                <span class="k">else</span><span class="p">:</span>
                    <span class="n">settings</span><span class="p">[</span><span class="s2">&quot;time_limit&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="mi">30</span> <span class="o">*</span> <span class="mi">60</span>
                    <span class="nb">print</span><span class="p">(</span>
                        <span class="s2">&quot;Game settings: Abridged mode with default 30 minutes time limit (invalid input)&quot;</span>
                    <span class="p">)</span>
            <span class="k">except</span> <span class="ne">ValueError</span><span class="p">:</span>
                <span class="n">settings</span><span class="p">[</span><span class="s2">&quot;time_limit&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="mi">30</span> <span class="o">*</span> <span class="mi">60</span>
                <span class="nb">print</span><span class="p">(</span>
                    <span class="s2">&quot;Game settings: Abridged mode with default 30 minutes time limit (invalid input)&quot;</span>
                <span class="p">)</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;Game settings: Full game mode (no time limit)&quot;</span><span class="p">)</span>

        <span class="k">return</span> <span class="n">settings</span></div>
</div>



<span class="c1"># page shown when the game ends</span>
<div class="viewcode-block" id="EndGamePage">
<a class="viewcode-back" href="../../modules/ui.html#src.UI.EndGamePage">[docs]</a>
<span class="k">class</span><span class="w"> </span><span class="nc">EndGamePage</span><span class="p">(</span><span class="n">BasePage</span><span class="p">):</span>
    <span class="k">def</span><span class="w"> </span><span class="fm">__init__</span><span class="p">(</span>
        <span class="bp">self</span><span class="p">,</span>
        <span class="n">winner_name</span><span class="p">,</span>
        <span class="n">final_assets</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
        <span class="n">bankrupted_players</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
        <span class="n">voluntary_exits</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
        <span class="n">tied_winners</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
        <span class="n">lap_count</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
    <span class="p">):</span>
        <span class="nb">super</span><span class="p">()</span><span class="o">.</span><span class="fm">__init__</span><span class="p">()</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">small_font</span> <span class="o">=</span> <span class="n">font_manager</span><span class="o">.</span><span class="n">get_font</span><span class="p">(</span><span class="mi">24</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">winner_name</span> <span class="o">=</span> <span class="n">winner_name</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">final_assets</span> <span class="o">=</span> <span class="n">final_assets</span> <span class="ow">or</span> <span class="p">{}</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">bankrupted_players</span> <span class="o">=</span> <span class="n">bankrupted_players</span> <span class="ow">or</span> <span class="p">[]</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">voluntary_exits</span> <span class="o">=</span> <span class="n">voluntary_exits</span> <span class="ow">or</span> <span class="p">[]</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">tied_winners</span> <span class="o">=</span> <span class="n">tied_winners</span> <span class="ow">or</span> <span class="p">[]</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">lap_count</span> <span class="o">=</span> <span class="n">lap_count</span> <span class="ow">or</span> <span class="p">{}</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">screen</span> <span class="o">=</span> <span class="n">pygame</span><span class="o">.</span><span class="n">display</span><span class="o">.</span><span class="n">get_surface</span><span class="p">()</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="bp">self</span><span class="o">.</span><span class="n">screen</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">screen</span> <span class="o">=</span> <span class="n">pygame</span><span class="o">.</span><span class="n">display</span><span class="o">.</span><span class="n">set_mode</span><span class="p">(</span><span class="n">get_window_size</span><span class="p">())</span>
            <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;Created new surface for EndGamePage&quot;</span><span class="p">)</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;Using existing surface for EndGamePage&quot;</span><span class="p">)</span>

        <span class="c1"># load end game background image</span>
        <span class="k">try</span><span class="p">:</span>
            <span class="n">endgame_bg_path</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">base_path</span><span class="p">,</span> <span class="s2">&quot;assets/image/EndgamePageBG.jpg&quot;</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">original_endgame_bg</span> <span class="o">=</span> <span class="n">pygame</span><span class="o">.</span><span class="n">image</span><span class="o">.</span><span class="n">load</span><span class="p">(</span><span class="n">endgame_bg_path</span><span class="p">)</span>
            <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;Loaded EndgamePageBG.jpg successfully&quot;</span><span class="p">)</span>
        <span class="k">except</span> <span class="p">(</span><span class="n">pygame</span><span class="o">.</span><span class="n">error</span><span class="p">,</span> <span class="ne">FileNotFoundError</span><span class="p">)</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
            <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Could not load end game background: </span><span class="si">{</span><span class="n">e</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">original_endgame_bg</span> <span class="o">=</span> <span class="kc">None</span>

        <span class="c1"># buttons for play again, quit, credits</span>
        <span class="n">button_height</span> <span class="o">=</span> <span class="mi">60</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">play_again_button</span> <span class="o">=</span> <span class="n">UIButton</span><span class="p">(</span>
            <span class="n">pygame</span><span class="o">.</span><span class="n">Rect</span><span class="p">(</span>
                <span class="p">(</span><span class="n">get_window_size</span><span class="p">()[</span><span class="mi">0</span><span class="p">]</span> <span class="o">-</span> <span class="mi">300</span><span class="p">)</span> <span class="o">//</span> <span class="mi">2</span><span class="p">,</span>
                <span class="n">get_window_size</span><span class="p">()[</span><span class="mi">1</span><span class="p">]</span> <span class="o">-</span> <span class="mi">100</span><span class="p">,</span>
                <span class="mi">300</span><span class="p">,</span>
                <span class="n">button_height</span><span class="p">,</span>
            <span class="p">),</span>
            <span class="s2">&quot;Play Again&quot;</span><span class="p">,</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">button_font</span><span class="p">,</span>
            <span class="n">color</span><span class="o">=</span><span class="n">SUCCESS_COLOR</span><span class="p">,</span>
        <span class="p">)</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">quit_button</span> <span class="o">=</span> <span class="n">UIButton</span><span class="p">(</span>
            <span class="n">pygame</span><span class="o">.</span><span class="n">Rect</span><span class="p">(</span>
                <span class="p">(</span><span class="n">get_window_size</span><span class="p">()[</span><span class="mi">0</span><span class="p">]</span> <span class="o">-</span> <span class="mi">300</span><span class="p">)</span> <span class="o">//</span> <span class="mi">2</span><span class="p">,</span>
                <span class="n">get_window_size</span><span class="p">()[</span><span class="mi">1</span><span class="p">]</span> <span class="o">-</span> <span class="mi">180</span><span class="p">,</span>
                <span class="mi">300</span><span class="p">,</span>
                <span class="n">button_height</span><span class="p">,</span>
            <span class="p">),</span>
            <span class="s2">&quot;Quit Game&quot;</span><span class="p">,</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">button_font</span><span class="p">,</span>
            <span class="n">color</span><span class="o">=</span><span class="n">ERROR_COLOR</span><span class="p">,</span>
        <span class="p">)</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">credits_button</span> <span class="o">=</span> <span class="n">UIButton</span><span class="p">(</span>
            <span class="n">pygame</span><span class="o">.</span><span class="n">Rect</span><span class="p">(</span><span class="mi">20</span><span class="p">,</span> <span class="n">get_window_size</span><span class="p">()[</span><span class="mi">1</span><span class="p">]</span> <span class="o">-</span> <span class="mi">100</span><span class="p">,</span> <span class="mi">200</span><span class="p">,</span> <span class="n">button_height</span><span class="p">),</span>
            <span class="s2">&quot;Credits&quot;</span><span class="p">,</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">button_font</span><span class="p">,</span>
            <span class="n">color</span><span class="o">=</span><span class="n">MODE_COLOR</span><span class="p">,</span>
        <span class="p">)</span>

        <span class="c1"># confetti effect</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">confetti</span> <span class="o">=</span> <span class="p">[]</span>
        <span class="k">for</span> <span class="n">_</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">100</span><span class="p">):</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">confetti</span><span class="o">.</span><span class="n">append</span><span class="p">(</span>
                <span class="p">{</span>
                    <span class="s2">&quot;x&quot;</span><span class="p">:</span> <span class="n">random</span><span class="o">.</span><span class="n">randint</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="n">get_window_size</span><span class="p">()[</span><span class="mi">0</span><span class="p">]),</span>
                    <span class="s2">&quot;y&quot;</span><span class="p">:</span> <span class="n">random</span><span class="o">.</span><span class="n">randint</span><span class="p">(</span><span class="o">-</span><span class="mi">100</span><span class="p">,</span> <span class="mi">0</span><span class="p">),</span>
                    <span class="s2">&quot;speed&quot;</span><span class="p">:</span> <span class="n">random</span><span class="o">.</span><span class="n">uniform</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="mi">3</span><span class="p">),</span>
                    <span class="s2">&quot;size&quot;</span><span class="p">:</span> <span class="n">random</span><span class="o">.</span><span class="n">randint</span><span class="p">(</span><span class="mi">5</span><span class="p">,</span> <span class="mi">15</span><span class="p">),</span>
                    <span class="s2">&quot;color&quot;</span><span class="p">:</span> <span class="n">random</span><span class="o">.</span><span class="n">choice</span><span class="p">(</span>
                        <span class="p">[</span>
                            <span class="p">(</span><span class="mi">255</span><span class="p">,</span> <span class="mi">223</span><span class="p">,</span> <span class="mi">0</span><span class="p">),</span>
                            <span class="p">(</span><span class="mi">255</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">),</span>
                            <span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">255</span><span class="p">,</span> <span class="mi">0</span><span class="p">),</span>
                            <span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">255</span><span class="p">),</span>
                            <span class="p">(</span><span class="mi">255</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">255</span><span class="p">),</span>
                            <span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">255</span><span class="p">,</span> <span class="mi">255</span><span class="p">),</span>
                        <span class="p">]</span>
                    <span class="p">),</span>
                <span class="p">}</span>
            <span class="p">)</span>

<div class="viewcode-block" id="EndGamePage.draw">
<a class="viewcode-back" href="../../modules/ui.html#src.UI.EndGamePage.draw">[docs]</a>
    <span class="k">def</span><span class="w"> </span><span class="nf">draw</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="c1"># draw background</span>
        <span class="n">window_size</span> <span class="o">=</span> <span class="n">get_window_size</span><span class="p">()</span>

        <span class="k">if</span> <span class="nb">hasattr</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="s2">&quot;original_endgame_bg&quot;</span><span class="p">)</span> <span class="ow">and</span> <span class="bp">self</span><span class="o">.</span><span class="n">original_endgame_bg</span><span class="p">:</span>
            <span class="n">bg_width</span><span class="p">,</span> <span class="n">bg_height</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">original_endgame_bg</span><span class="o">.</span><span class="n">get_size</span><span class="p">()</span>
            <span class="n">window_width</span><span class="p">,</span> <span class="n">window_height</span> <span class="o">=</span> <span class="n">window_size</span>

            <span class="n">bg_aspect</span> <span class="o">=</span> <span class="n">bg_width</span> <span class="o">/</span> <span class="n">bg_height</span>
            <span class="n">window_aspect</span> <span class="o">=</span> <span class="n">window_width</span> <span class="o">/</span> <span class="n">window_height</span>

            <span class="k">if</span> <span class="n">window_aspect</span> <span class="o">&gt;</span> <span class="n">bg_aspect</span><span class="p">:</span>
                <span class="n">scaled_width</span> <span class="o">=</span> <span class="n">window_width</span>
                <span class="n">scaled_height</span> <span class="o">=</span> <span class="nb">int</span><span class="p">(</span><span class="n">scaled_width</span> <span class="o">/</span> <span class="n">bg_aspect</span><span class="p">)</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="n">scaled_height</span> <span class="o">=</span> <span class="n">window_height</span>
                <span class="n">scaled_width</span> <span class="o">=</span> <span class="nb">int</span><span class="p">(</span><span class="n">scaled_height</span> <span class="o">*</span> <span class="n">bg_aspect</span><span class="p">)</span>

            <span class="n">pos_x</span> <span class="o">=</span> <span class="p">(</span><span class="n">window_width</span> <span class="o">-</span> <span class="n">scaled_width</span><span class="p">)</span> <span class="o">//</span> <span class="mi">2</span>
            <span class="n">pos_y</span> <span class="o">=</span> <span class="p">(</span><span class="n">window_height</span> <span class="o">-</span> <span class="n">scaled_height</span><span class="p">)</span> <span class="o">//</span> <span class="mi">2</span>

            <span class="n">scaled_bg</span> <span class="o">=</span> <span class="n">pygame</span><span class="o">.</span><span class="n">transform</span><span class="o">.</span><span class="n">scale</span><span class="p">(</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">original_endgame_bg</span><span class="p">,</span> <span class="p">(</span><span class="n">scaled_width</span><span class="p">,</span> <span class="n">scaled_height</span><span class="p">)</span>
            <span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">screen</span><span class="o">.</span><span class="n">blit</span><span class="p">(</span><span class="n">scaled_bg</span><span class="p">,</span> <span class="p">(</span><span class="n">pos_x</span><span class="p">,</span> <span class="n">pos_y</span><span class="p">))</span>

            <span class="n">overlay</span> <span class="o">=</span> <span class="n">pygame</span><span class="o">.</span><span class="n">Surface</span><span class="p">(</span><span class="n">window_size</span><span class="p">,</span> <span class="n">pygame</span><span class="o">.</span><span class="n">SRCALPHA</span><span class="p">)</span>
            <span class="n">overlay</span><span class="o">.</span><span class="n">fill</span><span class="p">((</span><span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">100</span><span class="p">))</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">screen</span><span class="o">.</span><span class="n">blit</span><span class="p">(</span><span class="n">overlay</span><span class="p">,</span> <span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">))</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">draw_background</span><span class="p">()</span>

        <span class="c1"># draw falling confetti</span>
        <span class="k">for</span> <span class="n">particle</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">confetti</span><span class="p">:</span>
            <span class="n">particle</span><span class="p">[</span><span class="s2">&quot;y&quot;</span><span class="p">]</span> <span class="o">+=</span> <span class="n">particle</span><span class="p">[</span><span class="s2">&quot;speed&quot;</span><span class="p">]</span>
            <span class="k">if</span> <span class="n">particle</span><span class="p">[</span><span class="s2">&quot;y&quot;</span><span class="p">]</span> <span class="o">&gt;</span> <span class="n">get_window_size</span><span class="p">()[</span><span class="mi">1</span><span class="p">]:</span>
                <span class="n">particle</span><span class="p">[</span><span class="s2">&quot;y&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="n">random</span><span class="o">.</span><span class="n">randint</span><span class="p">(</span><span class="o">-</span><span class="mi">100</span><span class="p">,</span> <span class="mi">0</span><span class="p">)</span>
                <span class="n">particle</span><span class="p">[</span><span class="s2">&quot;x&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="n">random</span><span class="o">.</span><span class="n">randint</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="n">get_window_size</span><span class="p">()[</span><span class="mi">0</span><span class="p">])</span>

            <span class="n">pygame</span><span class="o">.</span><span class="n">draw</span><span class="o">.</span><span class="n">rect</span><span class="p">(</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">screen</span><span class="p">,</span>
                <span class="n">particle</span><span class="p">[</span><span class="s2">&quot;color&quot;</span><span class="p">],</span>
                <span class="p">(</span><span class="n">particle</span><span class="p">[</span><span class="s2">&quot;x&quot;</span><span class="p">],</span> <span class="n">particle</span><span class="p">[</span><span class="s2">&quot;y&quot;</span><span class="p">],</span> <span class="n">particle</span><span class="p">[</span><span class="s2">&quot;size&quot;</span><span class="p">],</span> <span class="n">particle</span><span class="p">[</span><span class="s2">&quot;size&quot;</span><span class="p">]),</span>
            <span class="p">)</span>

        <span class="c1"># draw the main results card</span>
        <span class="n">card_width</span> <span class="o">=</span> <span class="mi">900</span>
        <span class="n">card_height</span> <span class="o">=</span> <span class="mi">600</span>
        <span class="n">card_x</span> <span class="o">=</span> <span class="p">(</span><span class="n">get_window_size</span><span class="p">()[</span><span class="mi">0</span><span class="p">]</span> <span class="o">-</span> <span class="n">card_width</span><span class="p">)</span> <span class="o">//</span> <span class="mi">2</span>
        <span class="n">card_y</span> <span class="o">=</span> <span class="p">(</span><span class="n">get_window_size</span><span class="p">()[</span><span class="mi">1</span><span class="p">]</span> <span class="o">-</span> <span class="n">card_height</span><span class="p">)</span> <span class="o">//</span> <span class="mi">2</span> <span class="o">-</span> <span class="mi">30</span>

        <span class="n">shadow</span> <span class="o">=</span> <span class="n">pygame</span><span class="o">.</span><span class="n">Surface</span><span class="p">((</span><span class="n">card_width</span> <span class="o">+</span> <span class="mi">8</span><span class="p">,</span> <span class="n">card_height</span> <span class="o">+</span> <span class="mi">8</span><span class="p">),</span> <span class="n">pygame</span><span class="o">.</span><span class="n">SRCALPHA</span><span class="p">)</span>
        <span class="n">pygame</span><span class="o">.</span><span class="n">draw</span><span class="o">.</span><span class="n">rect</span><span class="p">(</span><span class="n">shadow</span><span class="p">,</span> <span class="p">(</span><span class="o">*</span><span class="n">BLACK</span><span class="p">,</span> <span class="mi">128</span><span class="p">),</span> <span class="n">shadow</span><span class="o">.</span><span class="n">get_rect</span><span class="p">(),</span> <span class="n">border_radius</span><span class="o">=</span><span class="mi">15</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">screen</span><span class="o">.</span><span class="n">blit</span><span class="p">(</span><span class="n">shadow</span><span class="p">,</span> <span class="p">(</span><span class="n">card_x</span> <span class="o">+</span> <span class="mi">4</span><span class="p">,</span> <span class="n">card_y</span> <span class="o">+</span> <span class="mi">4</span><span class="p">))</span>

        <span class="n">pygame</span><span class="o">.</span><span class="n">draw</span><span class="o">.</span><span class="n">rect</span><span class="p">(</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">screen</span><span class="p">,</span>
            <span class="n">WHITE</span><span class="p">,</span>
            <span class="n">pygame</span><span class="o">.</span><span class="n">Rect</span><span class="p">(</span><span class="n">card_x</span><span class="p">,</span> <span class="n">card_y</span><span class="p">,</span> <span class="n">card_width</span><span class="p">,</span> <span class="n">card_height</span><span class="p">),</span>
            <span class="n">border_radius</span><span class="o">=</span><span class="mi">15</span><span class="p">,</span>
        <span class="p">)</span>

        <span class="c1"># draw winner text and trophy icon</span>
        <span class="n">winner_text</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">title_font</span><span class="o">.</span><span class="n">render</span><span class="p">(</span><span class="s2">&quot;Game Over!&quot;</span><span class="p">,</span> <span class="kc">True</span><span class="p">,</span> <span class="n">ACCENT_COLOR</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">screen</span><span class="o">.</span><span class="n">blit</span><span class="p">(</span>
            <span class="n">winner_text</span><span class="p">,</span>
            <span class="p">(</span><span class="n">card_x</span> <span class="o">+</span> <span class="p">(</span><span class="n">card_width</span> <span class="o">-</span> <span class="n">winner_text</span><span class="o">.</span><span class="n">get_width</span><span class="p">())</span> <span class="o">//</span> <span class="mi">2</span><span class="p">,</span> <span class="n">card_y</span> <span class="o">+</span> <span class="mi">40</span><span class="p">),</span>
        <span class="p">)</span>

        <span class="c1"># draw trophy</span>
        <span class="n">trophy_size</span> <span class="o">=</span> <span class="mi">60</span>
        <span class="n">trophy_x</span> <span class="o">=</span> <span class="n">card_x</span> <span class="o">+</span> <span class="p">(</span><span class="n">card_width</span> <span class="o">-</span> <span class="n">trophy_size</span><span class="p">)</span> <span class="o">//</span> <span class="mi">2</span>
        <span class="n">trophy_y</span> <span class="o">=</span> <span class="n">card_y</span> <span class="o">+</span> <span class="mi">100</span>

        <span class="n">gold_color</span> <span class="o">=</span> <span class="p">(</span><span class="mi">255</span><span class="p">,</span> <span class="mi">215</span><span class="p">,</span> <span class="mi">0</span><span class="p">)</span>

        <span class="n">pygame</span><span class="o">.</span><span class="n">draw</span><span class="o">.</span><span class="n">rect</span><span class="p">(</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">screen</span><span class="p">,</span>
            <span class="n">gold_color</span><span class="p">,</span>
            <span class="p">(</span><span class="n">trophy_x</span> <span class="o">+</span> <span class="mi">15</span><span class="p">,</span> <span class="n">trophy_y</span> <span class="o">+</span> <span class="mi">45</span><span class="p">,</span> <span class="mi">30</span><span class="p">,</span> <span class="mi">15</span><span class="p">),</span>
            <span class="n">border_radius</span><span class="o">=</span><span class="mi">5</span><span class="p">,</span>
        <span class="p">)</span>

        <span class="n">pygame</span><span class="o">.</span><span class="n">draw</span><span class="o">.</span><span class="n">rect</span><span class="p">(</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">screen</span><span class="p">,</span> <span class="n">gold_color</span><span class="p">,</span> <span class="p">(</span><span class="n">trophy_x</span> <span class="o">+</span> <span class="mi">25</span><span class="p">,</span> <span class="n">trophy_y</span> <span class="o">+</span> <span class="mi">25</span><span class="p">,</span> <span class="mi">10</span><span class="p">,</span> <span class="mi">25</span><span class="p">)</span>
        <span class="p">)</span>

        <span class="n">pygame</span><span class="o">.</span><span class="n">draw</span><span class="o">.</span><span class="n">ellipse</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">screen</span><span class="p">,</span> <span class="n">gold_color</span><span class="p">,</span> <span class="p">(</span><span class="n">trophy_x</span> <span class="o">+</span> <span class="mi">10</span><span class="p">,</span> <span class="n">trophy_y</span><span class="p">,</span> <span class="mi">40</span><span class="p">,</span> <span class="mi">30</span><span class="p">))</span>

        <span class="n">pygame</span><span class="o">.</span><span class="n">draw</span><span class="o">.</span><span class="n">ellipse</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">screen</span><span class="p">,</span> <span class="n">gold_color</span><span class="p">,</span> <span class="p">(</span><span class="n">trophy_x</span><span class="p">,</span> <span class="n">trophy_y</span> <span class="o">+</span> <span class="mi">10</span><span class="p">,</span> <span class="mi">15</span><span class="p">,</span> <span class="mi">20</span><span class="p">))</span>
        <span class="n">pygame</span><span class="o">.</span><span class="n">draw</span><span class="o">.</span><span class="n">ellipse</span><span class="p">(</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">screen</span><span class="p">,</span> <span class="n">gold_color</span><span class="p">,</span> <span class="p">(</span><span class="n">trophy_x</span> <span class="o">+</span> <span class="mi">45</span><span class="p">,</span> <span class="n">trophy_y</span> <span class="o">+</span> <span class="mi">10</span><span class="p">,</span> <span class="mi">15</span><span class="p">,</span> <span class="mi">20</span><span class="p">)</span>
        <span class="p">)</span>

        <span class="c1"># display winner name(s)</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">winner_name</span> <span class="o">==</span> <span class="s2">&quot;Tie&quot;</span> <span class="ow">and</span> <span class="bp">self</span><span class="o">.</span><span class="n">tied_winners</span><span class="p">:</span>
            <span class="n">winner_text</span> <span class="o">=</span> <span class="s2">&quot;It&#39;s a Tie!&quot;</span>
            <span class="n">winner_name</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">button_font</span><span class="o">.</span><span class="n">render</span><span class="p">(</span><span class="n">winner_text</span><span class="p">,</span> <span class="kc">True</span><span class="p">,</span> <span class="n">SUCCESS_COLOR</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">screen</span><span class="o">.</span><span class="n">blit</span><span class="p">(</span>
                <span class="n">winner_name</span><span class="p">,</span>
                <span class="p">(</span><span class="n">card_x</span> <span class="o">+</span> <span class="p">(</span><span class="n">card_width</span> <span class="o">-</span> <span class="n">winner_name</span><span class="o">.</span><span class="n">get_width</span><span class="p">())</span> <span class="o">//</span> <span class="mi">2</span><span class="p">,</span> <span class="n">card_y</span> <span class="o">+</span> <span class="mi">180</span><span class="p">),</span>
            <span class="p">)</span>

            <span class="n">tied_text</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">small_font</span><span class="o">.</span><span class="n">render</span><span class="p">(</span>
                <span class="sa">f</span><span class="s2">&quot;Tied players: </span><span class="si">{</span><span class="s1">&#39;, &#39;</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">tied_winners</span><span class="p">)</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">,</span> <span class="kc">True</span><span class="p">,</span> <span class="n">ACCENT_COLOR</span>
            <span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">screen</span><span class="o">.</span><span class="n">blit</span><span class="p">(</span>
                <span class="n">tied_text</span><span class="p">,</span>
                <span class="p">(</span><span class="n">card_x</span> <span class="o">+</span> <span class="p">(</span><span class="n">card_width</span> <span class="o">-</span> <span class="n">tied_text</span><span class="o">.</span><span class="n">get_width</span><span class="p">())</span> <span class="o">//</span> <span class="mi">2</span><span class="p">,</span> <span class="n">card_y</span> <span class="o">+</span> <span class="mi">220</span><span class="p">),</span>
            <span class="p">)</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">winner_name</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">button_font</span><span class="o">.</span><span class="n">render</span><span class="p">(</span>
                <span class="sa">f</span><span class="s2">&quot;Winner: </span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">winner_name</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">,</span> <span class="kc">True</span><span class="p">,</span> <span class="n">SUCCESS_COLOR</span>
            <span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">screen</span><span class="o">.</span><span class="n">blit</span><span class="p">(</span>
                <span class="n">winner_name</span><span class="p">,</span>
                <span class="p">(</span><span class="n">card_x</span> <span class="o">+</span> <span class="p">(</span><span class="n">card_width</span> <span class="o">-</span> <span class="n">winner_name</span><span class="o">.</span><span class="n">get_width</span><span class="p">())</span> <span class="o">//</span> <span class="mi">2</span><span class="p">,</span> <span class="n">card_y</span> <span class="o">+</span> <span class="mi">180</span><span class="p">),</span>
            <span class="p">)</span>

        <span class="c1"># draw separator line</span>
        <span class="n">pygame</span><span class="o">.</span><span class="n">draw</span><span class="o">.</span><span class="n">line</span><span class="p">(</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">screen</span><span class="p">,</span>
            <span class="n">LIGHT_GRAY</span><span class="p">,</span>
            <span class="p">(</span><span class="n">card_x</span> <span class="o">+</span> <span class="mi">70</span><span class="p">,</span> <span class="n">card_y</span> <span class="o">+</span> <span class="mi">230</span><span class="p">),</span>
            <span class="p">(</span><span class="n">card_x</span> <span class="o">+</span> <span class="n">card_width</span> <span class="o">-</span> <span class="mi">70</span><span class="p">,</span> <span class="n">card_y</span> <span class="o">+</span> <span class="mi">230</span><span class="p">),</span>
            <span class="mi">2</span><span class="p">,</span>
        <span class="p">)</span>

        <span class="c1"># display final asset values</span>
        <span class="n">y_offset</span> <span class="o">=</span> <span class="n">card_y</span> <span class="o">+</span> <span class="mi">260</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">final_assets</span><span class="p">:</span>
            <span class="n">assets_title</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">button_font</span><span class="o">.</span><span class="n">render</span><span class="p">(</span><span class="s2">&quot;Final Assets&quot;</span><span class="p">,</span> <span class="kc">True</span><span class="p">,</span> <span class="n">BLACK</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">screen</span><span class="o">.</span><span class="n">blit</span><span class="p">(</span>
                <span class="n">assets_title</span><span class="p">,</span>
                <span class="p">(</span><span class="n">card_x</span> <span class="o">+</span> <span class="p">(</span><span class="n">card_width</span> <span class="o">-</span> <span class="n">assets_title</span><span class="o">.</span><span class="n">get_width</span><span class="p">())</span> <span class="o">//</span> <span class="mi">2</span><span class="p">,</span> <span class="n">y_offset</span><span class="p">),</span>
            <span class="p">)</span>
            <span class="n">y_offset</span> <span class="o">+=</span> <span class="mi">40</span>

            <span class="n">sorted_assets</span> <span class="o">=</span> <span class="nb">sorted</span><span class="p">(</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">final_assets</span><span class="o">.</span><span class="n">items</span><span class="p">(),</span> <span class="n">key</span><span class="o">=</span><span class="k">lambda</span> <span class="n">x</span><span class="p">:</span> <span class="n">x</span><span class="p">[</span><span class="mi">1</span><span class="p">],</span> <span class="n">reverse</span><span class="o">=</span><span class="kc">True</span>
            <span class="p">)</span>
            <span class="n">col_width</span> <span class="o">=</span> <span class="p">(</span><span class="n">card_width</span> <span class="o">-</span> <span class="mi">100</span><span class="p">)</span> <span class="o">//</span> <span class="mi">2</span>

            <span class="k">for</span> <span class="n">i</span><span class="p">,</span> <span class="p">(</span><span class="n">name</span><span class="p">,</span> <span class="n">amount</span><span class="p">)</span> <span class="ow">in</span> <span class="nb">enumerate</span><span class="p">(</span><span class="n">sorted_assets</span><span class="p">):</span>
                <span class="n">col</span> <span class="o">=</span> <span class="n">i</span> <span class="o">%</span> <span class="mi">2</span>
                <span class="n">row</span> <span class="o">=</span> <span class="n">i</span> <span class="o">//</span> <span class="mi">2</span>

                <span class="n">x_pos</span> <span class="o">=</span> <span class="n">card_x</span> <span class="o">+</span> <span class="mi">50</span> <span class="o">+</span> <span class="n">col</span> <span class="o">*</span> <span class="n">col_width</span>
                <span class="n">y_pos</span> <span class="o">=</span> <span class="n">y_offset</span> <span class="o">+</span> <span class="n">row</span> <span class="o">*</span> <span class="mi">35</span>

                <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">tied_winners</span> <span class="ow">and</span> <span class="n">name</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">tied_winners</span><span class="p">:</span>
                    <span class="n">text_color</span> <span class="o">=</span> <span class="n">SUCCESS_COLOR</span>
                <span class="k">elif</span> <span class="n">name</span> <span class="o">==</span> <span class="bp">self</span><span class="o">.</span><span class="n">winner_name</span> <span class="ow">and</span> <span class="ow">not</span> <span class="bp">self</span><span class="o">.</span><span class="n">tied_winners</span><span class="p">:</span>
                    <span class="n">text_color</span> <span class="o">=</span> <span class="n">SUCCESS_COLOR</span>
                <span class="k">else</span><span class="p">:</span>
                    <span class="n">text_color</span> <span class="o">=</span> <span class="n">LIGHT_GRAY</span>

                <span class="n">player_text</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">small_font</span><span class="o">.</span><span class="n">render</span><span class="p">(</span>
                    <span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="n">name</span><span class="si">}</span><span class="s2">: </span><span class="si">{</span><span class="n">amount</span><span class="si">:</span><span class="s2">,</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">,</span> <span class="kc">True</span><span class="p">,</span> <span class="n">text_color</span>
                <span class="p">)</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">screen</span><span class="o">.</span><span class="n">blit</span><span class="p">(</span><span class="n">player_text</span><span class="p">,</span> <span class="p">(</span><span class="n">x_pos</span><span class="p">,</span> <span class="n">y_pos</span><span class="p">))</span>

        <span class="c1"># display bankrupted players</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">bankrupted_players</span><span class="p">:</span>
            <span class="n">y_offset</span> <span class="o">=</span> <span class="p">(</span>
                <span class="n">y_offset</span>
                <span class="o">+</span> <span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="n">sorted_assets</span><span class="p">)</span> <span class="o">//</span> <span class="mi">2</span> <span class="o">+</span> <span class="p">(</span><span class="mi">1</span> <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">sorted_assets</span><span class="p">)</span> <span class="o">%</span> <span class="mi">2</span> <span class="k">else</span> <span class="mi">0</span><span class="p">))</span> <span class="o">*</span> <span class="mi">35</span>
                <span class="o">+</span> <span class="mi">20</span>
            <span class="p">)</span>

            <span class="n">bankrupt_title</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">small_font</span><span class="o">.</span><span class="n">render</span><span class="p">(</span>
                <span class="s2">&quot;Bankrupted Players:&quot;</span><span class="p">,</span> <span class="kc">True</span><span class="p">,</span> <span class="n">ERROR_COLOR</span>
            <span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">screen</span><span class="o">.</span><span class="n">blit</span><span class="p">(</span><span class="n">bankrupt_title</span><span class="p">,</span> <span class="p">(</span><span class="n">card_x</span> <span class="o">+</span> <span class="mi">50</span><span class="p">,</span> <span class="n">y_offset</span><span class="p">))</span>
            <span class="n">y_offset</span> <span class="o">+=</span> <span class="mi">30</span>

            <span class="n">bankrupt_text</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">small_font</span><span class="o">.</span><span class="n">render</span><span class="p">(</span>
                <span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="s1">&#39;, &#39;</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">bankrupted_players</span><span class="p">)</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">,</span> <span class="kc">True</span><span class="p">,</span> <span class="n">ERROR_COLOR</span>
            <span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">screen</span><span class="o">.</span><span class="n">blit</span><span class="p">(</span><span class="n">bankrupt_text</span><span class="p">,</span> <span class="p">(</span><span class="n">card_x</span> <span class="o">+</span> <span class="mi">70</span><span class="p">,</span> <span class="n">y_offset</span><span class="p">))</span>
            <span class="n">y_offset</span> <span class="o">+=</span> <span class="mi">40</span>

        <span class="c1"># display players who quit</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">voluntary_exits</span><span class="p">:</span>
            <span class="n">y_offset</span> <span class="o">+=</span> <span class="mi">20</span>
            <span class="n">voluntary_title</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">small_font</span><span class="o">.</span><span class="n">render</span><span class="p">(</span>
                <span class="s2">&quot;Voluntary Exits:&quot;</span><span class="p">,</span> <span class="kc">True</span><span class="p">,</span> <span class="n">ACCENT_COLOR</span>
            <span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">screen</span><span class="o">.</span><span class="n">blit</span><span class="p">(</span><span class="n">voluntary_title</span><span class="p">,</span> <span class="p">(</span><span class="n">card_x</span> <span class="o">+</span> <span class="mi">50</span><span class="p">,</span> <span class="n">y_offset</span><span class="p">))</span>
            <span class="n">y_offset</span> <span class="o">+=</span> <span class="mi">30</span>

            <span class="n">voluntary_text</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">small_font</span><span class="o">.</span><span class="n">render</span><span class="p">(</span>
                <span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="s1">&#39;, &#39;</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">voluntary_exits</span><span class="p">)</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">,</span> <span class="kc">True</span><span class="p">,</span> <span class="n">ACCENT_COLOR</span>
            <span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">screen</span><span class="o">.</span><span class="n">blit</span><span class="p">(</span><span class="n">voluntary_text</span><span class="p">,</span> <span class="p">(</span><span class="n">card_x</span> <span class="o">+</span> <span class="mi">70</span><span class="p">,</span> <span class="n">y_offset</span><span class="p">))</span>
            <span class="n">y_offset</span> <span class="o">+=</span> <span class="mi">40</span>

        <span class="c1"># display lap counts</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">lap_count</span><span class="p">:</span>
            <span class="n">y_offset</span> <span class="o">+=</span> <span class="mi">50</span>

            <span class="n">lap_title</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">small_font</span><span class="o">.</span><span class="n">render</span><span class="p">(</span><span class="s2">&quot;Laps Completed:&quot;</span><span class="p">,</span> <span class="kc">True</span><span class="p">,</span> <span class="n">ACCENT_COLOR</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">screen</span><span class="o">.</span><span class="n">blit</span><span class="p">(</span><span class="n">lap_title</span><span class="p">,</span> <span class="p">(</span><span class="n">card_x</span> <span class="o">+</span> <span class="mi">50</span><span class="p">,</span> <span class="n">y_offset</span><span class="p">))</span>
            <span class="n">y_offset</span> <span class="o">+=</span> <span class="mi">30</span>

            <span class="n">sorted_laps</span> <span class="o">=</span> <span class="nb">sorted</span><span class="p">(</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">lap_count</span><span class="o">.</span><span class="n">items</span><span class="p">(),</span> <span class="n">key</span><span class="o">=</span><span class="k">lambda</span> <span class="n">x</span><span class="p">:</span> <span class="n">x</span><span class="p">[</span><span class="mi">1</span><span class="p">],</span> <span class="n">reverse</span><span class="o">=</span><span class="kc">True</span>
            <span class="p">)</span>

            <span class="n">lap_text_parts</span> <span class="o">=</span> <span class="p">[]</span>
            <span class="k">for</span> <span class="n">name</span><span class="p">,</span> <span class="n">laps</span> <span class="ow">in</span> <span class="n">sorted_laps</span><span class="p">:</span>
                <span class="k">if</span> <span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">tied_winners</span> <span class="ow">and</span> <span class="n">name</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">tied_winners</span><span class="p">)</span> <span class="ow">or</span> <span class="p">(</span>
                    <span class="n">name</span> <span class="o">==</span> <span class="bp">self</span><span class="o">.</span><span class="n">winner_name</span> <span class="ow">and</span> <span class="ow">not</span> <span class="bp">self</span><span class="o">.</span><span class="n">tied_winners</span>
                <span class="p">):</span>
                    <span class="n">lap_text_parts</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="n">name</span><span class="si">}</span><span class="s2">: </span><span class="si">{</span><span class="n">laps</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
                <span class="k">else</span><span class="p">:</span>
                    <span class="n">lap_text_parts</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="n">name</span><span class="si">}</span><span class="s2">: </span><span class="si">{</span><span class="n">laps</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>

            <span class="n">lap_text_combined</span> <span class="o">=</span> <span class="s2">&quot;, &quot;</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">lap_text_parts</span><span class="p">)</span>
            <span class="n">max_width</span> <span class="o">=</span> <span class="n">card_width</span> <span class="o">-</span> <span class="mi">140</span>

            <span class="n">test_text</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">small_font</span><span class="o">.</span><span class="n">render</span><span class="p">(</span><span class="n">lap_text_combined</span><span class="p">,</span> <span class="kc">True</span><span class="p">,</span> <span class="n">ACCENT_COLOR</span><span class="p">)</span>
            <span class="k">if</span> <span class="n">test_text</span><span class="o">.</span><span class="n">get_width</span><span class="p">()</span> <span class="o">&gt;</span> <span class="n">max_width</span><span class="p">:</span>
                <span class="n">current_line</span> <span class="o">=</span> <span class="s2">&quot;&quot;</span>
                <span class="n">current_y</span> <span class="o">=</span> <span class="n">y_offset</span>

                <span class="k">for</span> <span class="n">i</span><span class="p">,</span> <span class="n">part</span> <span class="ow">in</span> <span class="nb">enumerate</span><span class="p">(</span><span class="n">lap_text_parts</span><span class="p">):</span>
                    <span class="n">test_line</span> <span class="o">=</span> <span class="n">current_line</span> <span class="o">+</span> <span class="p">(</span><span class="s2">&quot;, &quot;</span> <span class="k">if</span> <span class="n">current_line</span> <span class="k">else</span> <span class="s2">&quot;&quot;</span><span class="p">)</span> <span class="o">+</span> <span class="n">part</span>
                    <span class="n">test_render</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">small_font</span><span class="o">.</span><span class="n">render</span><span class="p">(</span><span class="n">test_line</span><span class="p">,</span> <span class="kc">True</span><span class="p">,</span> <span class="n">ACCENT_COLOR</span><span class="p">)</span>

                    <span class="k">if</span> <span class="n">test_render</span><span class="o">.</span><span class="n">get_width</span><span class="p">()</span> <span class="o">&gt;</span> <span class="n">max_width</span> <span class="ow">and</span> <span class="n">current_line</span><span class="p">:</span>
                        <span class="n">line_text</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">small_font</span><span class="o">.</span><span class="n">render</span><span class="p">(</span>
                            <span class="n">current_line</span><span class="p">,</span> <span class="kc">True</span><span class="p">,</span> <span class="n">ACCENT_COLOR</span>
                        <span class="p">)</span>
                        <span class="bp">self</span><span class="o">.</span><span class="n">screen</span><span class="o">.</span><span class="n">blit</span><span class="p">(</span><span class="n">line_text</span><span class="p">,</span> <span class="p">(</span><span class="n">card_x</span> <span class="o">+</span> <span class="mi">70</span><span class="p">,</span> <span class="n">current_y</span><span class="p">))</span>
                        <span class="n">current_y</span> <span class="o">+=</span> <span class="mi">25</span>
                        <span class="n">current_line</span> <span class="o">=</span> <span class="n">part</span>
                    <span class="k">else</span><span class="p">:</span>
                        <span class="n">current_line</span> <span class="o">=</span> <span class="p">(</span>
                            <span class="n">test_line</span>
                            <span class="k">if</span> <span class="ow">not</span> <span class="n">current_line</span>
                            <span class="k">else</span> <span class="n">current_line</span> <span class="o">+</span> <span class="s2">&quot;, &quot;</span> <span class="o">+</span> <span class="n">part</span>
                        <span class="p">)</span>

                <span class="k">if</span> <span class="n">current_line</span><span class="p">:</span>
                    <span class="n">line_text</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">small_font</span><span class="o">.</span><span class="n">render</span><span class="p">(</span><span class="n">current_line</span><span class="p">,</span> <span class="kc">True</span><span class="p">,</span> <span class="n">ACCENT_COLOR</span><span class="p">)</span>
                    <span class="bp">self</span><span class="o">.</span><span class="n">screen</span><span class="o">.</span><span class="n">blit</span><span class="p">(</span><span class="n">line_text</span><span class="p">,</span> <span class="p">(</span><span class="n">card_x</span> <span class="o">+</span> <span class="mi">70</span><span class="p">,</span> <span class="n">current_y</span><span class="p">))</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="n">lap_text</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">small_font</span><span class="o">.</span><span class="n">render</span><span class="p">(</span><span class="n">lap_text_combined</span><span class="p">,</span> <span class="kc">True</span><span class="p">,</span> <span class="n">ACCENT_COLOR</span><span class="p">)</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">screen</span><span class="o">.</span><span class="n">blit</span><span class="p">(</span><span class="n">lap_text</span><span class="p">,</span> <span class="p">(</span><span class="n">card_x</span> <span class="o">+</span> <span class="mi">70</span><span class="p">,</span> <span class="n">y_offset</span><span class="p">))</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">play_again_button</span><span class="o">.</span><span class="n">draw</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">screen</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">quit_button</span><span class="o">.</span><span class="n">draw</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">screen</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">credits_button</span><span class="o">.</span><span class="n">draw</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">screen</span><span class="p">)</span></div>


<div class="viewcode-block" id="EndGamePage.handle_click">
<a class="viewcode-back" href="../../modules/ui.html#src.UI.EndGamePage.handle_click">[docs]</a>
    <span class="k">def</span><span class="w"> </span><span class="nf">handle_click</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">pos</span><span class="p">):</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">play_again_button</span><span class="o">.</span><span class="n">check_hover</span><span class="p">(</span><span class="n">pos</span><span class="p">):</span>
            <span class="k">return</span> <span class="s2">&quot;play_again&quot;</span>
        <span class="k">elif</span> <span class="bp">self</span><span class="o">.</span><span class="n">quit_button</span><span class="o">.</span><span class="n">check_hover</span><span class="p">(</span><span class="n">pos</span><span class="p">):</span>
            <span class="k">return</span> <span class="s2">&quot;quit&quot;</span>
        <span class="k">elif</span> <span class="bp">self</span><span class="o">.</span><span class="n">credits_button</span><span class="o">.</span><span class="n">check_hover</span><span class="p">(</span><span class="n">pos</span><span class="p">):</span>
            <span class="k">return</span> <span class="s2">&quot;credits&quot;</span>
        <span class="k">return</span> <span class="kc">None</span></div>


<div class="viewcode-block" id="EndGamePage.handle_motion">
<a class="viewcode-back" href="../../modules/ui.html#src.UI.EndGamePage.handle_motion">[docs]</a>
    <span class="k">def</span><span class="w"> </span><span class="nf">handle_motion</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">pos</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">play_again_button</span><span class="o">.</span><span class="n">check_hover</span><span class="p">(</span><span class="n">pos</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">quit_button</span><span class="o">.</span><span class="n">check_hover</span><span class="p">(</span><span class="n">pos</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">credits_button</span><span class="o">.</span><span class="n">check_hover</span><span class="p">(</span><span class="n">pos</span><span class="p">)</span></div>


<div class="viewcode-block" id="EndGamePage.handle_key">
<a class="viewcode-back" href="../../modules/ui.html#src.UI.EndGamePage.handle_key">[docs]</a>
    <span class="k">def</span><span class="w"> </span><span class="nf">handle_key</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">event</span><span class="p">):</span>
        <span class="k">if</span> <span class="n">event</span><span class="o">.</span><span class="n">key</span> <span class="o">==</span> <span class="n">pygame</span><span class="o">.</span><span class="n">K_SPACE</span><span class="p">:</span>
            <span class="k">return</span> <span class="s2">&quot;play_again&quot;</span>
        <span class="k">elif</span> <span class="n">event</span><span class="o">.</span><span class="n">key</span> <span class="o">==</span> <span class="n">pygame</span><span class="o">.</span><span class="n">K_ESCAPE</span><span class="p">:</span>
            <span class="k">return</span> <span class="s2">&quot;quit&quot;</span>
        <span class="k">elif</span> <span class="n">event</span><span class="o">.</span><span class="n">key</span> <span class="o">==</span> <span class="n">pygame</span><span class="o">.</span><span class="n">K_c</span><span class="p">:</span>
            <span class="k">return</span> <span class="s2">&quot;credits&quot;</span>
        <span class="k">return</span> <span class="kc">None</span></div>
</div>



<span class="c1"># page showing game credits</span>
<div class="viewcode-block" id="CreditsPage">
<a class="viewcode-back" href="../../modules/ui.html#src.UI.CreditsPage">[docs]</a>
<span class="k">class</span><span class="w"> </span><span class="nc">CreditsPage</span><span class="p">(</span><span class="n">BasePage</span><span class="p">):</span>
    <span class="k">def</span><span class="w"> </span><span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">instructions</span><span class="o">=</span><span class="kc">None</span><span class="p">):</span>
        <span class="nb">super</span><span class="p">()</span><span class="o">.</span><span class="fm">__init__</span><span class="p">(</span><span class="n">instructions</span><span class="o">=</span><span class="n">instructions</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">small_font</span> <span class="o">=</span> <span class="n">font_manager</span><span class="o">.</span><span class="n">get_font</span><span class="p">(</span><span class="mi">24</span><span class="p">)</span>
        <span class="n">button_height</span> <span class="o">=</span> <span class="mi">60</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">back_button</span> <span class="o">=</span> <span class="n">UIButton</span><span class="p">(</span>
            <span class="n">pygame</span><span class="o">.</span><span class="n">Rect</span><span class="p">(</span><span class="mi">20</span><span class="p">,</span> <span class="n">get_window_size</span><span class="p">()[</span><span class="mi">1</span><span class="p">]</span> <span class="o">-</span> <span class="mi">80</span><span class="p">,</span> <span class="mi">200</span><span class="p">,</span> <span class="n">button_height</span><span class="p">),</span>
            <span class="s2">&quot;Back&quot;</span><span class="p">,</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">button_font</span><span class="p">,</span>
        <span class="p">)</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">developers</span> <span class="o">=</span> <span class="p">[</span>
            <span class="s2">&quot;Eric Shi&quot;</span><span class="p">,</span>
            <span class="s2">&quot;Stuart Baker&quot;</span><span class="p">,</span>
            <span class="s2">&quot;Lin Moe Hein&quot;</span><span class="p">,</span>
            <span class="s2">&quot;Duncan Law&quot;</span><span class="p">,</span>
            <span class="s2">&quot;Owen Chen&quot;</span><span class="p">,</span>
        <span class="p">]</span>

        <span class="n">sound_manager</span><span class="o">.</span><span class="n">play_sound</span><span class="p">(</span><span class="s2">&quot;credits&quot;</span><span class="p">)</span>  <span class="c1"># play credits sound</span>

<div class="viewcode-block" id="CreditsPage.draw">
<a class="viewcode-back" href="../../modules/ui.html#src.UI.CreditsPage.draw">[docs]</a>
    <span class="k">def</span><span class="w"> </span><span class="nf">draw</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">draw_background</span><span class="p">()</span>

        <span class="n">title_text</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">title_font</span><span class="o">.</span><span class="n">render</span><span class="p">(</span><span class="s2">&quot;Property Tycoon&quot;</span><span class="p">,</span> <span class="kc">True</span><span class="p">,</span> <span class="n">ERROR_COLOR</span><span class="p">)</span>
        <span class="n">title_rect</span> <span class="o">=</span> <span class="n">title_text</span><span class="o">.</span><span class="n">get_rect</span><span class="p">(</span><span class="n">centerx</span><span class="o">=</span><span class="n">get_window_size</span><span class="p">()[</span><span class="mi">0</span><span class="p">]</span> <span class="o">//</span> <span class="mi">2</span><span class="p">,</span> <span class="n">y</span><span class="o">=</span><span class="mi">80</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">screen</span><span class="o">.</span><span class="n">blit</span><span class="p">(</span><span class="n">title_text</span><span class="p">,</span> <span class="n">title_rect</span><span class="p">)</span>

        <span class="n">panel_width</span> <span class="o">=</span> <span class="mi">700</span>
        <span class="n">panel_height</span> <span class="o">=</span> <span class="n">get_window_size</span><span class="p">()[</span><span class="mi">1</span><span class="p">]</span> <span class="o">-</span> <span class="mi">250</span>
        <span class="n">panel_x</span> <span class="o">=</span> <span class="p">(</span><span class="n">get_window_size</span><span class="p">()[</span><span class="mi">0</span><span class="p">]</span> <span class="o">-</span> <span class="n">panel_width</span><span class="p">)</span> <span class="o">//</span> <span class="mi">2</span>
        <span class="n">panel_y</span> <span class="o">=</span> <span class="mi">160</span>

        <span class="n">shadow_offset</span> <span class="o">=</span> <span class="mi">5</span>
        <span class="n">shadow</span> <span class="o">=</span> <span class="n">pygame</span><span class="o">.</span><span class="n">Surface</span><span class="p">(</span>
            <span class="p">(</span><span class="n">panel_width</span> <span class="o">+</span> <span class="n">shadow_offset</span> <span class="o">*</span> <span class="mi">2</span><span class="p">,</span> <span class="n">panel_height</span> <span class="o">+</span> <span class="n">shadow_offset</span> <span class="o">*</span> <span class="mi">2</span><span class="p">),</span>
            <span class="n">pygame</span><span class="o">.</span><span class="n">SRCALPHA</span><span class="p">,</span>
        <span class="p">)</span>
        <span class="n">pygame</span><span class="o">.</span><span class="n">draw</span><span class="o">.</span><span class="n">rect</span><span class="p">(</span><span class="n">shadow</span><span class="p">,</span> <span class="p">(</span><span class="o">*</span><span class="n">BLACK</span><span class="p">,</span> <span class="mi">128</span><span class="p">),</span> <span class="n">shadow</span><span class="o">.</span><span class="n">get_rect</span><span class="p">(),</span> <span class="n">border_radius</span><span class="o">=</span><span class="mi">15</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">screen</span><span class="o">.</span><span class="n">blit</span><span class="p">(</span><span class="n">shadow</span><span class="p">,</span> <span class="p">(</span><span class="n">panel_x</span> <span class="o">-</span> <span class="n">shadow_offset</span><span class="p">,</span> <span class="n">panel_y</span> <span class="o">-</span> <span class="n">shadow_offset</span><span class="p">))</span>

        <span class="n">pygame</span><span class="o">.</span><span class="n">draw</span><span class="o">.</span><span class="n">rect</span><span class="p">(</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">screen</span><span class="p">,</span>
            <span class="n">WHITE</span><span class="p">,</span>
            <span class="n">pygame</span><span class="o">.</span><span class="n">Rect</span><span class="p">(</span><span class="n">panel_x</span><span class="p">,</span> <span class="n">panel_y</span><span class="p">,</span> <span class="n">panel_width</span><span class="p">,</span> <span class="n">panel_height</span><span class="p">),</span>
            <span class="n">border_radius</span><span class="o">=</span><span class="mi">15</span><span class="p">,</span>
        <span class="p">)</span>

        <span class="n">credits_text</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">button_font</span><span class="o">.</span><span class="n">render</span><span class="p">(</span><span class="s2">&quot;Developers&quot;</span><span class="p">,</span> <span class="kc">True</span><span class="p">,</span> <span class="n">ACCENT_COLOR</span><span class="p">)</span>
        <span class="n">credits_rect</span> <span class="o">=</span> <span class="n">credits_text</span><span class="o">.</span><span class="n">get_rect</span><span class="p">(</span>
            <span class="n">centerx</span><span class="o">=</span><span class="n">get_window_size</span><span class="p">()[</span><span class="mi">0</span><span class="p">]</span> <span class="o">//</span> <span class="mi">2</span><span class="p">,</span> <span class="n">y</span><span class="o">=</span><span class="n">panel_y</span> <span class="o">+</span> <span class="mi">30</span>
        <span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">screen</span><span class="o">.</span><span class="n">blit</span><span class="p">(</span><span class="n">credits_text</span><span class="p">,</span> <span class="n">credits_rect</span><span class="p">)</span>

        <span class="n">pygame</span><span class="o">.</span><span class="n">draw</span><span class="o">.</span><span class="n">line</span><span class="p">(</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">screen</span><span class="p">,</span>
            <span class="n">LIGHT_GRAY</span><span class="p">,</span>
            <span class="p">(</span><span class="n">panel_x</span> <span class="o">+</span> <span class="mi">80</span><span class="p">,</span> <span class="n">credits_rect</span><span class="o">.</span><span class="n">bottom</span> <span class="o">+</span> <span class="mi">10</span><span class="p">),</span>
            <span class="p">(</span><span class="n">panel_x</span> <span class="o">+</span> <span class="n">panel_width</span> <span class="o">-</span> <span class="mi">80</span><span class="p">,</span> <span class="n">credits_rect</span><span class="o">.</span><span class="n">bottom</span> <span class="o">+</span> <span class="mi">10</span><span class="p">),</span>
            <span class="mi">2</span><span class="p">,</span>
        <span class="p">)</span>

        <span class="n">y_offset</span> <span class="o">=</span> <span class="n">credits_rect</span><span class="o">.</span><span class="n">bottom</span> <span class="o">+</span> <span class="mi">30</span>
        <span class="n">line_spacing</span> <span class="o">=</span> <span class="mi">35</span>

        <span class="k">for</span> <span class="n">dev</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">developers</span><span class="p">:</span>
            <span class="n">dev_text</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">button_font</span><span class="o">.</span><span class="n">render</span><span class="p">(</span><span class="n">dev</span><span class="p">,</span> <span class="kc">True</span><span class="p">,</span> <span class="n">BLACK</span><span class="p">)</span>
            <span class="n">dev_rect</span> <span class="o">=</span> <span class="n">dev_text</span><span class="o">.</span><span class="n">get_rect</span><span class="p">(</span><span class="n">centerx</span><span class="o">=</span><span class="n">get_window_size</span><span class="p">()[</span><span class="mi">0</span><span class="p">]</span> <span class="o">//</span> <span class="mi">2</span><span class="p">,</span> <span class="n">y</span><span class="o">=</span><span class="n">y_offset</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">screen</span><span class="o">.</span><span class="n">blit</span><span class="p">(</span><span class="n">dev_text</span><span class="p">,</span> <span class="n">dev_rect</span><span class="p">)</span>
            <span class="n">y_offset</span> <span class="o">+=</span> <span class="n">line_spacing</span>

        <span class="n">y_offset</span> <span class="o">=</span> <span class="n">panel_y</span> <span class="o">+</span> <span class="n">panel_height</span> <span class="o">-</span> <span class="mi">170</span>

        <span class="n">thanks_text</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">button_font</span><span class="o">.</span><span class="n">render</span><span class="p">(</span><span class="s2">&quot;Special Thanks&quot;</span><span class="p">,</span> <span class="kc">True</span><span class="p">,</span> <span class="n">ACCENT_COLOR</span><span class="p">)</span>
        <span class="n">thanks_rect</span> <span class="o">=</span> <span class="n">thanks_text</span><span class="o">.</span><span class="n">get_rect</span><span class="p">(</span>
            <span class="n">centerx</span><span class="o">=</span><span class="n">get_window_size</span><span class="p">()[</span><span class="mi">0</span><span class="p">]</span> <span class="o">//</span> <span class="mi">2</span><span class="p">,</span> <span class="n">y</span><span class="o">=</span><span class="n">y_offset</span>
        <span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">screen</span><span class="o">.</span><span class="n">blit</span><span class="p">(</span><span class="n">thanks_text</span><span class="p">,</span> <span class="n">thanks_rect</span><span class="p">)</span>

        <span class="n">pygame</span><span class="o">.</span><span class="n">draw</span><span class="o">.</span><span class="n">line</span><span class="p">(</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">screen</span><span class="p">,</span>
            <span class="n">LIGHT_GRAY</span><span class="p">,</span>
            <span class="p">(</span><span class="n">panel_x</span> <span class="o">+</span> <span class="mi">80</span><span class="p">,</span> <span class="n">thanks_rect</span><span class="o">.</span><span class="n">bottom</span> <span class="o">+</span> <span class="mi">10</span><span class="p">),</span>
            <span class="p">(</span><span class="n">panel_x</span> <span class="o">+</span> <span class="n">panel_width</span> <span class="o">-</span> <span class="mi">80</span><span class="p">,</span> <span class="n">thanks_rect</span><span class="o">.</span><span class="n">bottom</span> <span class="o">+</span> <span class="mi">10</span><span class="p">),</span>
            <span class="mi">2</span><span class="p">,</span>
        <span class="p">)</span>

        <span class="n">quentin_text</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">small_font</span><span class="o">.</span><span class="n">render</span><span class="p">(</span>
            <span class="s2">&quot;Mr Quentin Raffles @ Watson Games&quot;</span><span class="p">,</span> <span class="kc">True</span><span class="p">,</span> <span class="n">BLACK</span>
        <span class="p">)</span>
        <span class="n">quentin_rect</span> <span class="o">=</span> <span class="n">quentin_text</span><span class="o">.</span><span class="n">get_rect</span><span class="p">(</span>
            <span class="n">centerx</span><span class="o">=</span><span class="n">get_window_size</span><span class="p">()[</span><span class="mi">0</span><span class="p">]</span> <span class="o">//</span> <span class="mi">2</span><span class="p">,</span> <span class="n">y</span><span class="o">=</span><span class="n">thanks_rect</span><span class="o">.</span><span class="n">bottom</span> <span class="o">+</span> <span class="mi">15</span>
        <span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">screen</span><span class="o">.</span><span class="n">blit</span><span class="p">(</span><span class="n">quentin_text</span><span class="p">,</span> <span class="n">quentin_rect</span><span class="p">)</span>

        <span class="n">thanks_msg_text</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">small_font</span><span class="o">.</span><span class="n">render</span><span class="p">(</span>
            <span class="s2">&quot;Thank you for playing our game!&quot;</span><span class="p">,</span> <span class="kc">True</span><span class="p">,</span> <span class="n">BLACK</span>
        <span class="p">)</span>
        <span class="n">thanks_msg_rect</span> <span class="o">=</span> <span class="n">thanks_msg_text</span><span class="o">.</span><span class="n">get_rect</span><span class="p">(</span>
            <span class="n">centerx</span><span class="o">=</span><span class="n">get_window_size</span><span class="p">()[</span><span class="mi">0</span><span class="p">]</span> <span class="o">//</span> <span class="mi">2</span><span class="p">,</span> <span class="n">y</span><span class="o">=</span><span class="n">quentin_rect</span><span class="o">.</span><span class="n">bottom</span> <span class="o">+</span> <span class="mi">15</span>
        <span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">screen</span><span class="o">.</span><span class="n">blit</span><span class="p">(</span><span class="n">thanks_msg_text</span><span class="p">,</span> <span class="n">thanks_msg_rect</span><span class="p">)</span>

        <span class="n">watson_text</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">small_font</span><span class="o">.</span><span class="n">render</span><span class="p">(</span><span class="s2">&quot;Watson Games  2025&quot;</span><span class="p">,</span> <span class="kc">True</span><span class="p">,</span> <span class="n">BLACK</span><span class="p">)</span>
        <span class="n">watson_rect</span> <span class="o">=</span> <span class="n">watson_text</span><span class="o">.</span><span class="n">get_rect</span><span class="p">(</span>
            <span class="n">centerx</span><span class="o">=</span><span class="n">get_window_size</span><span class="p">()[</span><span class="mi">0</span><span class="p">]</span> <span class="o">//</span> <span class="mi">2</span><span class="p">,</span> <span class="n">y</span><span class="o">=</span><span class="n">thanks_msg_rect</span><span class="o">.</span><span class="n">bottom</span> <span class="o">+</span> <span class="mi">10</span>
        <span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">screen</span><span class="o">.</span><span class="n">blit</span><span class="p">(</span><span class="n">watson_text</span><span class="p">,</span> <span class="n">watson_rect</span><span class="p">)</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">back_button</span><span class="o">.</span><span class="n">draw</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">screen</span><span class="p">)</span>

        <span class="n">hint_text</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">small_font</span><span class="o">.</span><span class="n">render</span><span class="p">(</span>
            <span class="s2">&quot;Press ESC or BACKSPACE to return&quot;</span><span class="p">,</span> <span class="kc">True</span><span class="p">,</span> <span class="n">LIGHT_GRAY</span>
        <span class="p">)</span>
        <span class="n">hint_rect</span> <span class="o">=</span> <span class="n">hint_text</span><span class="o">.</span><span class="n">get_rect</span><span class="p">(</span>
            <span class="n">right</span><span class="o">=</span><span class="n">get_window_size</span><span class="p">()[</span><span class="mi">0</span><span class="p">]</span> <span class="o">-</span> <span class="mi">20</span><span class="p">,</span> <span class="n">y</span><span class="o">=</span><span class="n">get_window_size</span><span class="p">()[</span><span class="mi">1</span><span class="p">]</span> <span class="o">-</span> <span class="mi">180</span>
        <span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">screen</span><span class="o">.</span><span class="n">blit</span><span class="p">(</span><span class="n">hint_text</span><span class="p">,</span> <span class="n">hint_rect</span><span class="p">)</span>

        <span class="n">pygame</span><span class="o">.</span><span class="n">display</span><span class="o">.</span><span class="n">flip</span><span class="p">()</span></div>


<div class="viewcode-block" id="CreditsPage.handle_click">
<a class="viewcode-back" href="../../modules/ui.html#src.UI.CreditsPage.handle_click">[docs]</a>
    <span class="k">def</span><span class="w"> </span><span class="nf">handle_click</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">pos</span><span class="p">):</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">back_button</span><span class="o">.</span><span class="n">check_hover</span><span class="p">(</span><span class="n">pos</span><span class="p">):</span>
            <span class="k">return</span> <span class="kc">True</span>
        <span class="k">return</span> <span class="kc">None</span></div>


<div class="viewcode-block" id="CreditsPage.handle_motion">
<a class="viewcode-back" href="../../modules/ui.html#src.UI.CreditsPage.handle_motion">[docs]</a>
    <span class="k">def</span><span class="w"> </span><span class="nf">handle_motion</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">pos</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">back_button</span><span class="o">.</span><span class="n">check_hover</span><span class="p">(</span><span class="n">pos</span><span class="p">)</span></div>


<div class="viewcode-block" id="CreditsPage.handle_key">
<a class="viewcode-back" href="../../modules/ui.html#src.UI.CreditsPage.handle_key">[docs]</a>
    <span class="k">def</span><span class="w"> </span><span class="nf">handle_key</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">event</span><span class="p">):</span>
        <span class="k">if</span> <span class="n">event</span><span class="o">.</span><span class="n">key</span> <span class="ow">in</span> <span class="p">[</span><span class="n">pygame</span><span class="o">.</span><span class="n">K_ESCAPE</span><span class="p">,</span> <span class="n">pygame</span><span class="o">.</span><span class="n">K_BACKSPACE</span><span class="p">]:</span>
            <span class="k">return</span> <span class="kc">True</span>
        <span class="k">return</span> <span class="kc">None</span></div>
</div>



<span class="c1"># page for selecting ai difficulty</span>
<div class="viewcode-block" id="AIDifficultyPage">
<a class="viewcode-back" href="../../modules/ui.html#src.UI.AIDifficultyPage">[docs]</a>
<span class="k">class</span><span class="w"> </span><span class="nc">AIDifficultyPage</span><span class="p">(</span><span class="n">BasePage</span><span class="p">):</span>
    <span class="k">def</span><span class="w"> </span><span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">instructions</span><span class="o">=</span><span class="kc">None</span><span class="p">):</span>
        <span class="nb">super</span><span class="p">()</span><span class="o">.</span><span class="fm">__init__</span><span class="p">(</span><span class="n">instructions</span><span class="o">=</span><span class="n">instructions</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">small_font</span> <span class="o">=</span> <span class="n">font_manager</span><span class="o">.</span><span class="n">get_font</span><span class="p">(</span><span class="mi">24</span><span class="p">)</span>
        <span class="n">button_width</span> <span class="o">=</span> <span class="mi">300</span>
        <span class="n">button_height</span> <span class="o">=</span> <span class="mi">60</span>
        <span class="n">center_y</span> <span class="o">=</span> <span class="n">get_window_size</span><span class="p">()[</span><span class="mi">1</span><span class="p">]</span> <span class="o">//</span> <span class="mi">2</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">easy_button</span> <span class="o">=</span> <span class="n">UIButton</span><span class="p">(</span>
            <span class="n">pygame</span><span class="o">.</span><span class="n">Rect</span><span class="p">(</span>
                <span class="p">(</span><span class="n">get_window_size</span><span class="p">()[</span><span class="mi">0</span><span class="p">]</span> <span class="o">-</span> <span class="n">button_width</span><span class="p">)</span> <span class="o">//</span> <span class="mi">2</span><span class="p">,</span>
                <span class="n">center_y</span> <span class="o">-</span> <span class="mi">50</span><span class="p">,</span>
                <span class="n">button_width</span><span class="p">,</span>
                <span class="n">button_height</span><span class="p">,</span>
            <span class="p">),</span>
            <span class="s2">&quot;Easy&quot;</span><span class="p">,</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">button_font</span><span class="p">,</span>
            <span class="n">color</span><span class="o">=</span><span class="n">SUCCESS_COLOR</span><span class="p">,</span>
        <span class="p">)</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">hard_button</span> <span class="o">=</span> <span class="n">UIButton</span><span class="p">(</span>
            <span class="n">pygame</span><span class="o">.</span><span class="n">Rect</span><span class="p">(</span>
                <span class="p">(</span><span class="n">get_window_size</span><span class="p">()[</span><span class="mi">0</span><span class="p">]</span> <span class="o">-</span> <span class="n">button_width</span><span class="p">)</span> <span class="o">//</span> <span class="mi">2</span><span class="p">,</span>
                <span class="n">center_y</span> <span class="o">+</span> <span class="mi">50</span><span class="p">,</span>
                <span class="n">button_width</span><span class="p">,</span>
                <span class="n">button_height</span><span class="p">,</span>
            <span class="p">),</span>
            <span class="s2">&quot;Hard&quot;</span><span class="p">,</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">button_font</span><span class="p">,</span>
            <span class="n">color</span><span class="o">=</span><span class="n">ERROR_COLOR</span><span class="p">,</span>
        <span class="p">)</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">back_button</span> <span class="o">=</span> <span class="n">UIButton</span><span class="p">(</span>
            <span class="n">pygame</span><span class="o">.</span><span class="n">Rect</span><span class="p">(</span><span class="mi">20</span><span class="p">,</span> <span class="n">get_window_size</span><span class="p">()[</span><span class="mi">1</span><span class="p">]</span> <span class="o">-</span> <span class="mi">80</span><span class="p">,</span> <span class="mi">200</span><span class="p">,</span> <span class="n">button_height</span><span class="p">),</span>
            <span class="s2">&quot;Back&quot;</span><span class="p">,</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">button_font</span><span class="p">,</span>
        <span class="p">)</span>

<div class="viewcode-block" id="AIDifficultyPage.draw">
<a class="viewcode-back" href="../../modules/ui.html#src.UI.AIDifficultyPage.draw">[docs]</a>
    <span class="k">def</span><span class="w"> </span><span class="nf">draw</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">draw_background</span><span class="p">()</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">draw_title</span><span class="p">()</span>

        <span class="n">difficulty_text</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">button_font</span><span class="o">.</span><span class="n">render</span><span class="p">(</span><span class="s2">&quot;Select AI Difficulty&quot;</span><span class="p">,</span> <span class="kc">True</span><span class="p">,</span> <span class="n">WHITE</span><span class="p">)</span>
        <span class="n">text_rect</span> <span class="o">=</span> <span class="n">difficulty_text</span><span class="o">.</span><span class="n">get_rect</span><span class="p">(</span><span class="n">centerx</span><span class="o">=</span><span class="n">get_window_size</span><span class="p">()[</span><span class="mi">0</span><span class="p">]</span> <span class="o">//</span> <span class="mi">2</span><span class="p">,</span> <span class="n">y</span><span class="o">=</span><span class="mi">100</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">screen</span><span class="o">.</span><span class="n">blit</span><span class="p">(</span><span class="n">difficulty_text</span><span class="p">,</span> <span class="n">text_rect</span><span class="p">)</span>

        <span class="c1"># draw easy/hard buttons and descriptions</span>
        <span class="n">easy_desc</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">small_font</span><span class="o">.</span><span class="n">render</span><span class="p">(</span>
            <span class="s2">&quot;AI will make basic decisions&quot;</span><span class="p">,</span> <span class="kc">True</span><span class="p">,</span> <span class="n">LIGHT_GRAY</span>
        <span class="p">)</span>
        <span class="n">easy_rect</span> <span class="o">=</span> <span class="n">easy_desc</span><span class="o">.</span><span class="n">get_rect</span><span class="p">(</span>
            <span class="n">centerx</span><span class="o">=</span><span class="n">get_window_size</span><span class="p">()[</span><span class="mi">0</span><span class="p">]</span> <span class="o">//</span> <span class="mi">2</span><span class="p">,</span> <span class="n">y</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">easy_button</span><span class="o">.</span><span class="n">rect</span><span class="o">.</span><span class="n">bottom</span> <span class="o">+</span> <span class="mi">10</span>
        <span class="p">)</span>

        <span class="n">hard_desc</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">small_font</span><span class="o">.</span><span class="n">render</span><span class="p">(</span>
            <span class="s2">&quot;AI will make strategic decisions&quot;</span><span class="p">,</span> <span class="kc">True</span><span class="p">,</span> <span class="n">LIGHT_GRAY</span>
        <span class="p">)</span>
        <span class="n">hard_rect</span> <span class="o">=</span> <span class="n">hard_desc</span><span class="o">.</span><span class="n">get_rect</span><span class="p">(</span>
            <span class="n">centerx</span><span class="o">=</span><span class="n">get_window_size</span><span class="p">()[</span><span class="mi">0</span><span class="p">]</span> <span class="o">//</span> <span class="mi">2</span><span class="p">,</span> <span class="n">y</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">hard_button</span><span class="o">.</span><span class="n">rect</span><span class="o">.</span><span class="n">bottom</span> <span class="o">+</span> <span class="mi">10</span>
        <span class="p">)</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">easy_button</span><span class="o">.</span><span class="n">draw</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">screen</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">hard_button</span><span class="o">.</span><span class="n">draw</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">screen</span><span class="p">)</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">screen</span><span class="o">.</span><span class="n">blit</span><span class="p">(</span><span class="n">easy_desc</span><span class="p">,</span> <span class="n">easy_rect</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">screen</span><span class="o">.</span><span class="n">blit</span><span class="p">(</span><span class="n">hard_desc</span><span class="p">,</span> <span class="n">hard_rect</span><span class="p">)</span>

        <span class="n">controls</span> <span class="o">=</span> <span class="p">[</span><span class="s2">&quot;Press E for Easy mode&quot;</span><span class="p">,</span> <span class="s2">&quot;Press H for Hard mode&quot;</span><span class="p">]</span>
        <span class="n">y_offset</span> <span class="o">=</span> <span class="n">get_window_size</span><span class="p">()[</span><span class="mi">1</span><span class="p">]</span> <span class="o">-</span> <span class="mi">180</span>
        <span class="k">for</span> <span class="n">hint</span> <span class="ow">in</span> <span class="n">controls</span><span class="p">:</span>
            <span class="n">hint_text</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">small_font</span><span class="o">.</span><span class="n">render</span><span class="p">(</span><span class="n">hint</span><span class="p">,</span> <span class="kc">True</span><span class="p">,</span> <span class="n">LIGHT_GRAY</span><span class="p">)</span>
            <span class="n">hint_rect</span> <span class="o">=</span> <span class="n">hint_text</span><span class="o">.</span><span class="n">get_rect</span><span class="p">(</span><span class="n">right</span><span class="o">=</span><span class="n">get_window_size</span><span class="p">()[</span><span class="mi">0</span><span class="p">]</span> <span class="o">-</span> <span class="mi">20</span><span class="p">,</span> <span class="n">y</span><span class="o">=</span><span class="n">y_offset</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">screen</span><span class="o">.</span><span class="n">blit</span><span class="p">(</span><span class="n">hint_text</span><span class="p">,</span> <span class="n">hint_rect</span><span class="p">)</span>
            <span class="n">y_offset</span> <span class="o">+=</span> <span class="mi">25</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">back_button</span><span class="o">.</span><span class="n">draw</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">screen</span><span class="p">)</span>

        <span class="n">pygame</span><span class="o">.</span><span class="n">display</span><span class="o">.</span><span class="n">flip</span><span class="p">()</span></div>


<div class="viewcode-block" id="AIDifficultyPage.handle_click">
<a class="viewcode-back" href="../../modules/ui.html#src.UI.AIDifficultyPage.handle_click">[docs]</a>
    <span class="k">def</span><span class="w"> </span><span class="nf">handle_click</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">pos</span><span class="p">):</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">back_button</span><span class="o">.</span><span class="n">check_hover</span><span class="p">(</span><span class="n">pos</span><span class="p">):</span>
            <span class="k">return</span> <span class="s2">&quot;back&quot;</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">easy_button</span><span class="o">.</span><span class="n">check_hover</span><span class="p">(</span><span class="n">pos</span><span class="p">):</span>
            <span class="k">return</span> <span class="s2">&quot;easy&quot;</span>
        <span class="k">elif</span> <span class="bp">self</span><span class="o">.</span><span class="n">hard_button</span><span class="o">.</span><span class="n">check_hover</span><span class="p">(</span><span class="n">pos</span><span class="p">):</span>
            <span class="k">return</span> <span class="s2">&quot;hard&quot;</span>
        <span class="k">return</span> <span class="kc">None</span></div>


<div class="viewcode-block" id="AIDifficultyPage.handle_motion">
<a class="viewcode-back" href="../../modules/ui.html#src.UI.AIDifficultyPage.handle_motion">[docs]</a>
    <span class="k">def</span><span class="w"> </span><span class="nf">handle_motion</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">pos</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">back_button</span><span class="o">.</span><span class="n">check_hover</span><span class="p">(</span><span class="n">pos</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">easy_button</span><span class="o">.</span><span class="n">check_hover</span><span class="p">(</span><span class="n">pos</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">hard_button</span><span class="o">.</span><span class="n">check_hover</span><span class="p">(</span><span class="n">pos</span><span class="p">)</span></div>


<div class="viewcode-block" id="AIDifficultyPage.handle_key">
<a class="viewcode-back" href="../../modules/ui.html#src.UI.AIDifficultyPage.handle_key">[docs]</a>
    <span class="k">def</span><span class="w"> </span><span class="nf">handle_key</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">event</span><span class="p">):</span>
        <span class="k">if</span> <span class="n">event</span><span class="o">.</span><span class="n">key</span> <span class="o">==</span> <span class="n">pygame</span><span class="o">.</span><span class="n">K_ESCAPE</span><span class="p">:</span>
            <span class="k">return</span> <span class="s2">&quot;back&quot;</span>
        <span class="k">elif</span> <span class="n">event</span><span class="o">.</span><span class="n">key</span> <span class="ow">in</span> <span class="p">[</span><span class="n">pygame</span><span class="o">.</span><span class="n">K_e</span><span class="p">,</span> <span class="n">pygame</span><span class="o">.</span><span class="n">K_RETURN</span><span class="p">]:</span>
            <span class="k">return</span> <span class="s2">&quot;easy&quot;</span>
        <span class="k">elif</span> <span class="n">event</span><span class="o">.</span><span class="n">key</span> <span class="o">==</span> <span class="n">pygame</span><span class="o">.</span><span class="n">K_h</span><span class="p">:</span>
            <span class="k">return</span> <span class="s2">&quot;hard&quot;</span>
        <span class="k">return</span> <span class="kc">None</span></div>
</div>



<span class="c1"># ui element for showing/interacting with ai mood</span>
<div class="viewcode-block" id="AIEmotionUI">
<a class="viewcode-back" href="../../modules/ui.html#src.UI.AIEmotionUI">[docs]</a>
<span class="k">class</span><span class="w"> </span><span class="nc">AIEmotionUI</span><span class="p">:</span>

    <span class="k">def</span><span class="w"> </span><span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">screen</span><span class="p">,</span> <span class="n">ai_player</span><span class="p">,</span> <span class="n">game_instance</span><span class="p">):</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">screen</span> <span class="o">=</span> <span class="n">screen</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">ai_player</span> <span class="o">=</span> <span class="n">ai_player</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">game</span> <span class="o">=</span> <span class="n">game_instance</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">visible</span> <span class="o">=</span> <span class="kc">False</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">window_size</span> <span class="o">=</span> <span class="n">get_window_size</span><span class="p">()</span>

        <span class="n">button_size</span> <span class="o">=</span> <span class="p">(</span><span class="mi">48</span><span class="p">,</span> <span class="mi">48</span><span class="p">)</span>
        <span class="n">panel_width</span> <span class="o">=</span> <span class="mi">200</span>
        <span class="n">panel_height</span> <span class="o">=</span> <span class="mi">120</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">panel_rect</span> <span class="o">=</span> <span class="n">pygame</span><span class="o">.</span><span class="n">Rect</span><span class="p">(</span><span class="mi">10</span><span class="p">,</span> <span class="mi">340</span><span class="p">,</span> <span class="n">panel_width</span><span class="p">,</span> <span class="n">panel_height</span><span class="p">)</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">happy_button_rect</span> <span class="o">=</span> <span class="n">pygame</span><span class="o">.</span><span class="n">Rect</span><span class="p">(</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">panel_rect</span><span class="o">.</span><span class="n">x</span> <span class="o">+</span> <span class="mi">30</span><span class="p">,</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">panel_rect</span><span class="o">.</span><span class="n">y</span> <span class="o">+</span> <span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">panel_rect</span><span class="o">.</span><span class="n">height</span> <span class="o">-</span> <span class="n">button_size</span><span class="p">[</span><span class="mi">1</span><span class="p">])</span> <span class="o">//</span> <span class="mi">2</span><span class="p">,</span>
            <span class="n">button_size</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span>
            <span class="n">button_size</span><span class="p">[</span><span class="mi">1</span><span class="p">],</span>
        <span class="p">)</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">angry_button_rect</span> <span class="o">=</span> <span class="n">pygame</span><span class="o">.</span><span class="n">Rect</span><span class="p">(</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">panel_rect</span><span class="o">.</span><span class="n">x</span> <span class="o">+</span> <span class="n">panel_width</span> <span class="o">-</span> <span class="n">button_size</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">-</span> <span class="mi">30</span><span class="p">,</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">panel_rect</span><span class="o">.</span><span class="n">y</span> <span class="o">+</span> <span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">panel_rect</span><span class="o">.</span><span class="n">height</span> <span class="o">-</span> <span class="n">button_size</span><span class="p">[</span><span class="mi">1</span><span class="p">])</span> <span class="o">//</span> <span class="mi">2</span><span class="p">,</span>
            <span class="n">button_size</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span>
            <span class="n">button_size</span><span class="p">[</span><span class="mi">1</span><span class="p">],</span>
        <span class="p">)</span>

        <span class="c1"># load happy/angry king images</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">happy_image</span> <span class="o">=</span> <span class="kc">None</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">angry_image</span> <span class="o">=</span> <span class="kc">None</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">happy_hover</span> <span class="o">=</span> <span class="kc">False</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">angry_hover</span> <span class="o">=</span> <span class="kc">False</span>

        <span class="k">try</span><span class="p">:</span>
            <span class="n">happy_path</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">base_path</span><span class="p">,</span> <span class="s2">&quot;assets/image/Happy.png&quot;</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">happy_image</span> <span class="o">=</span> <span class="n">pygame</span><span class="o">.</span><span class="n">image</span><span class="o">.</span><span class="n">load</span><span class="p">(</span><span class="n">happy_path</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">happy_image</span> <span class="o">=</span> <span class="n">pygame</span><span class="o">.</span><span class="n">transform</span><span class="o">.</span><span class="n">scale</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">happy_image</span><span class="p">,</span> <span class="n">button_size</span><span class="p">)</span>

            <span class="n">angry_path</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">base_path</span><span class="p">,</span> <span class="s2">&quot;assets/image/Angry.png&quot;</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">angry_image</span> <span class="o">=</span> <span class="n">pygame</span><span class="o">.</span><span class="n">image</span><span class="o">.</span><span class="n">load</span><span class="p">(</span><span class="n">angry_path</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">angry_image</span> <span class="o">=</span> <span class="n">pygame</span><span class="o">.</span><span class="n">transform</span><span class="o">.</span><span class="n">scale</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">angry_image</span><span class="p">,</span> <span class="n">button_size</span><span class="p">)</span>
        <span class="k">except</span> <span class="p">(</span><span class="n">pygame</span><span class="o">.</span><span class="n">error</span><span class="p">,</span> <span class="ne">FileNotFoundError</span><span class="p">):</span>
            <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;Could not load emotion king images&quot;</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">happy_image</span> <span class="o">=</span> <span class="n">pygame</span><span class="o">.</span><span class="n">Surface</span><span class="p">(</span><span class="n">button_size</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">happy_image</span><span class="o">.</span><span class="n">fill</span><span class="p">((</span><span class="mi">50</span><span class="p">,</span> <span class="mi">200</span><span class="p">,</span> <span class="mi">50</span><span class="p">))</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">angry_image</span> <span class="o">=</span> <span class="n">pygame</span><span class="o">.</span><span class="n">Surface</span><span class="p">(</span><span class="n">button_size</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">angry_image</span><span class="o">.</span><span class="n">fill</span><span class="p">((</span><span class="mi">200</span><span class="p">,</span> <span class="mi">50</span><span class="p">,</span> <span class="mi">50</span><span class="p">))</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">font</span> <span class="o">=</span> <span class="n">font_manager</span><span class="o">.</span><span class="n">get_font</span><span class="p">(</span><span class="mi">18</span><span class="p">)</span>

        <span class="c1"># easter egg stuff</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">happy_clicks_after_limit</span> <span class="o">=</span> <span class="mi">0</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">angry_clicks_after_limit</span> <span class="o">=</span> <span class="mi">0</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">easter_egg_threshold</span> <span class="o">=</span> <span class="mi">5</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">youtube_url</span> <span class="o">=</span> <span class="p">(</span>
            <span class="s2">&quot;https://www.youtube.com/watch?v=dQw4w9WgXcQ&amp;pp=ygUJcmljayByb2xs&quot;</span>
        <span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">easter_egg_triggered</span> <span class="o">=</span> <span class="kc">False</span>

<div class="viewcode-block" id="AIEmotionUI.show">
<a class="viewcode-back" href="../../modules/ui.html#src.UI.AIEmotionUI.show">[docs]</a>
    <span class="k">def</span><span class="w"> </span><span class="nf">show</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">visible</span> <span class="o">=</span> <span class="kc">True</span></div>


<div class="viewcode-block" id="AIEmotionUI.hide">
<a class="viewcode-back" href="../../modules/ui.html#src.UI.AIEmotionUI.hide">[docs]</a>
    <span class="k">def</span><span class="w"> </span><span class="nf">hide</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">visible</span> <span class="o">=</span> <span class="kc">False</span></div>


<div class="viewcode-block" id="AIEmotionUI.draw">
<a class="viewcode-back" href="../../modules/ui.html#src.UI.AIEmotionUI.draw">[docs]</a>
    <span class="k">def</span><span class="w"> </span><span class="nf">draw</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="bp">self</span><span class="o">.</span><span class="n">visible</span><span class="p">:</span>
            <span class="k">return</span>

        <span class="k">if</span> <span class="p">(</span>
            <span class="ow">not</span> <span class="bp">self</span><span class="o">.</span><span class="n">ai_player</span>
            <span class="ow">or</span> <span class="ow">not</span> <span class="bp">self</span><span class="o">.</span><span class="n">ai_player</span><span class="o">.</span><span class="n">is_ai</span>
            <span class="ow">or</span> <span class="ow">not</span> <span class="nb">hasattr</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">ai_player</span><span class="p">,</span> <span class="s2">&quot;ai_controller&quot;</span><span class="p">)</span>
            <span class="ow">or</span> <span class="ow">not</span> <span class="nb">hasattr</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">ai_player</span><span class="o">.</span><span class="n">ai_controller</span><span class="p">,</span> <span class="s2">&quot;mood_modifier&quot;</span><span class="p">)</span>
        <span class="p">):</span>
            <span class="k">return</span>

        <span class="n">pygame</span><span class="o">.</span><span class="n">draw</span><span class="o">.</span><span class="n">rect</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">screen</span><span class="p">,</span> <span class="p">(</span><span class="o">*</span><span class="n">UI_BG</span><span class="p">,</span> <span class="mi">220</span><span class="p">),</span> <span class="bp">self</span><span class="o">.</span><span class="n">panel_rect</span><span class="p">,</span> <span class="n">border_radius</span><span class="o">=</span><span class="mi">10</span><span class="p">)</span>
        <span class="n">pygame</span><span class="o">.</span><span class="n">draw</span><span class="o">.</span><span class="n">rect</span><span class="p">(</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">screen</span><span class="p">,</span> <span class="n">ACCENT_COLOR</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">panel_rect</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="n">border_radius</span><span class="o">=</span><span class="mi">10</span>
        <span class="p">)</span>

        <span class="n">title_text</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">font</span><span class="o">.</span><span class="n">render</span><span class="p">(</span><span class="s2">&quot;Your Feeling&quot;</span><span class="p">,</span> <span class="kc">True</span><span class="p">,</span> <span class="n">WHITE</span><span class="p">)</span>
        <span class="n">title_rect</span> <span class="o">=</span> <span class="n">title_text</span><span class="o">.</span><span class="n">get_rect</span><span class="p">(</span>
            <span class="n">centerx</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">panel_rect</span><span class="o">.</span><span class="n">centerx</span><span class="p">,</span> <span class="n">y</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">panel_rect</span><span class="o">.</span><span class="n">y</span> <span class="o">+</span> <span class="mi">5</span>
        <span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">screen</span><span class="o">.</span><span class="n">blit</span><span class="p">(</span><span class="n">title_text</span><span class="p">,</span> <span class="n">title_rect</span><span class="p">)</span>

        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">happy_hover</span><span class="p">:</span>
            <span class="n">glow</span> <span class="o">=</span> <span class="n">pygame</span><span class="o">.</span><span class="n">Surface</span><span class="p">(</span>
                <span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">happy_button_rect</span><span class="o">.</span><span class="n">width</span> <span class="o">+</span> <span class="mi">4</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">happy_button_rect</span><span class="o">.</span><span class="n">height</span> <span class="o">+</span> <span class="mi">4</span><span class="p">),</span>
                <span class="n">pygame</span><span class="o">.</span><span class="n">SRCALPHA</span><span class="p">,</span>
            <span class="p">)</span>
            <span class="n">pygame</span><span class="o">.</span><span class="n">draw</span><span class="o">.</span><span class="n">rect</span><span class="p">(</span>
                <span class="n">glow</span><span class="p">,</span> <span class="p">(</span><span class="mi">255</span><span class="p">,</span> <span class="mi">255</span><span class="p">,</span> <span class="mi">255</span><span class="p">,</span> <span class="mi">128</span><span class="p">),</span> <span class="n">glow</span><span class="o">.</span><span class="n">get_rect</span><span class="p">(),</span> <span class="n">border_radius</span><span class="o">=</span><span class="mi">5</span>
            <span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">screen</span><span class="o">.</span><span class="n">blit</span><span class="p">(</span>
                <span class="n">glow</span><span class="p">,</span> <span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">happy_button_rect</span><span class="o">.</span><span class="n">x</span> <span class="o">-</span> <span class="mi">2</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">happy_button_rect</span><span class="o">.</span><span class="n">y</span> <span class="o">-</span> <span class="mi">2</span><span class="p">)</span>
            <span class="p">)</span>

        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">angry_hover</span><span class="p">:</span>
            <span class="n">glow</span> <span class="o">=</span> <span class="n">pygame</span><span class="o">.</span><span class="n">Surface</span><span class="p">(</span>
                <span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">angry_button_rect</span><span class="o">.</span><span class="n">width</span> <span class="o">+</span> <span class="mi">4</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">angry_button_rect</span><span class="o">.</span><span class="n">height</span> <span class="o">+</span> <span class="mi">4</span><span class="p">),</span>
                <span class="n">pygame</span><span class="o">.</span><span class="n">SRCALPHA</span><span class="p">,</span>
            <span class="p">)</span>
            <span class="n">pygame</span><span class="o">.</span><span class="n">draw</span><span class="o">.</span><span class="n">rect</span><span class="p">(</span>
                <span class="n">glow</span><span class="p">,</span> <span class="p">(</span><span class="mi">255</span><span class="p">,</span> <span class="mi">255</span><span class="p">,</span> <span class="mi">255</span><span class="p">,</span> <span class="mi">128</span><span class="p">),</span> <span class="n">glow</span><span class="o">.</span><span class="n">get_rect</span><span class="p">(),</span> <span class="n">border_radius</span><span class="o">=</span><span class="mi">5</span>
            <span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">screen</span><span class="o">.</span><span class="n">blit</span><span class="p">(</span>
                <span class="n">glow</span><span class="p">,</span> <span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">angry_button_rect</span><span class="o">.</span><span class="n">x</span> <span class="o">-</span> <span class="mi">2</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">angry_button_rect</span><span class="o">.</span><span class="n">y</span> <span class="o">-</span> <span class="mi">2</span><span class="p">)</span>
            <span class="p">)</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">screen</span><span class="o">.</span><span class="n">blit</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">happy_image</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">happy_button_rect</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">screen</span><span class="o">.</span><span class="n">blit</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">angry_image</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">angry_button_rect</span><span class="p">)</span>

        <span class="c1"># draw mood value text</span>
        <span class="n">mood_value</span> <span class="o">=</span> <span class="nb">getattr</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">ai_player</span><span class="o">.</span><span class="n">ai_controller</span><span class="p">,</span> <span class="s2">&quot;mood_modifier&quot;</span><span class="p">,</span> <span class="mi">0</span><span class="p">)</span>
        <span class="n">mood_text</span> <span class="o">=</span> <span class="sa">f</span><span class="s2">&quot;Mood: </span><span class="si">{</span><span class="n">mood_value</span><span class="si">:</span><span class="s2">.2f</span><span class="si">}</span><span class="s2">&quot;</span>
        <span class="n">mood_color</span> <span class="o">=</span> <span class="p">(</span>
            <span class="nb">int</span><span class="p">(</span><span class="mi">255</span> <span class="o">*</span> <span class="nb">min</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="nb">max</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="p">(</span><span class="n">mood_value</span> <span class="o">+</span> <span class="mf">0.3</span><span class="p">)</span> <span class="o">/</span> <span class="mf">0.6</span><span class="p">))),</span>
            <span class="nb">int</span><span class="p">(</span><span class="mi">255</span> <span class="o">*</span> <span class="nb">min</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="nb">max</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="p">(</span><span class="mf">0.3</span> <span class="o">-</span> <span class="n">mood_value</span><span class="p">)</span> <span class="o">/</span> <span class="mf">0.6</span><span class="p">))),</span>
            <span class="mi">50</span><span class="p">,</span>
        <span class="p">)</span>
        <span class="n">mood_surface</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">font</span><span class="o">.</span><span class="n">render</span><span class="p">(</span><span class="n">mood_text</span><span class="p">,</span> <span class="kc">True</span><span class="p">,</span> <span class="n">mood_color</span><span class="p">)</span>
        <span class="n">mood_rect</span> <span class="o">=</span> <span class="n">mood_surface</span><span class="o">.</span><span class="n">get_rect</span><span class="p">(</span>
            <span class="n">centerx</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">panel_rect</span><span class="o">.</span><span class="n">centerx</span><span class="p">,</span> <span class="n">bottom</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">panel_rect</span><span class="o">.</span><span class="n">bottom</span> <span class="o">-</span> <span class="mi">5</span>
        <span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">screen</span><span class="o">.</span><span class="n">blit</span><span class="p">(</span><span class="n">mood_surface</span><span class="p">,</span> <span class="n">mood_rect</span><span class="p">)</span>

        <span class="c1"># show easter egg counter if needed</span>
        <span class="n">total_clicks</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">happy_clicks_after_limit</span> <span class="o">+</span> <span class="bp">self</span><span class="o">.</span><span class="n">angry_clicks_after_limit</span>
        <span class="k">if</span> <span class="n">total_clicks</span> <span class="o">&gt;</span> <span class="mi">0</span> <span class="ow">and</span> <span class="n">total_clicks</span> <span class="o">&lt;</span> <span class="bp">self</span><span class="o">.</span><span class="n">easter_egg_threshold</span><span class="p">:</span>
            <span class="n">egg_text</span> <span class="o">=</span> <span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">easter_egg_threshold</span><span class="w"> </span><span class="o">-</span><span class="w"> </span><span class="n">total_clicks</span><span class="si">}</span><span class="s2"> more...&quot;</span>
            <span class="n">egg_surface</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">font</span><span class="o">.</span><span class="n">render</span><span class="p">(</span><span class="n">egg_text</span><span class="p">,</span> <span class="kc">True</span><span class="p">,</span> <span class="p">(</span><span class="mi">255</span><span class="p">,</span> <span class="mi">215</span><span class="p">,</span> <span class="mi">0</span><span class="p">))</span>
            <span class="n">egg_rect</span> <span class="o">=</span> <span class="n">egg_surface</span><span class="o">.</span><span class="n">get_rect</span><span class="p">(</span>
                <span class="n">centerx</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">panel_rect</span><span class="o">.</span><span class="n">centerx</span><span class="p">,</span> <span class="n">bottom</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">panel_rect</span><span class="o">.</span><span class="n">bottom</span> <span class="o">-</span> <span class="mi">25</span>
            <span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">screen</span><span class="o">.</span><span class="n">blit</span><span class="p">(</span><span class="n">egg_surface</span><span class="p">,</span> <span class="n">egg_rect</span><span class="p">)</span></div>


<div class="viewcode-block" id="AIEmotionUI.check_hover">
<a class="viewcode-back" href="../../modules/ui.html#src.UI.AIEmotionUI.check_hover">[docs]</a>
    <span class="k">def</span><span class="w"> </span><span class="nf">check_hover</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">pos</span><span class="p">):</span>

        <span class="k">if</span> <span class="ow">not</span> <span class="bp">self</span><span class="o">.</span><span class="n">visible</span><span class="p">:</span>
            <span class="k">return</span> <span class="kc">False</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">happy_hover</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">happy_button_rect</span><span class="o">.</span><span class="n">collidepoint</span><span class="p">(</span><span class="n">pos</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">angry_hover</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">angry_button_rect</span><span class="o">.</span><span class="n">collidepoint</span><span class="p">(</span><span class="n">pos</span><span class="p">)</span>

        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">happy_hover</span> <span class="ow">or</span> <span class="bp">self</span><span class="o">.</span><span class="n">angry_hover</span></div>


<div class="viewcode-block" id="AIEmotionUI.handle_click">
<a class="viewcode-back" href="../../modules/ui.html#src.UI.AIEmotionUI.handle_click">[docs]</a>
    <span class="k">def</span><span class="w"> </span><span class="nf">handle_click</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">pos</span><span class="p">):</span>
        <span class="c1"># handle clicks on happy/angry buttons</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="bp">self</span><span class="o">.</span><span class="n">visible</span><span class="p">:</span>
            <span class="k">return</span> <span class="kc">False</span>

        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">happy_button_rect</span><span class="o">.</span><span class="n">collidepoint</span><span class="p">(</span><span class="n">pos</span><span class="p">):</span>
            <span class="n">mood_value</span> <span class="o">=</span> <span class="nb">getattr</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">ai_player</span><span class="o">.</span><span class="n">ai_controller</span><span class="p">,</span> <span class="s2">&quot;mood_modifier&quot;</span><span class="p">,</span> <span class="mi">0</span><span class="p">)</span>
            <span class="k">if</span> <span class="n">mood_value</span> <span class="o">&gt;=</span> <span class="mf">0.3</span><span class="p">:</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">happy_clicks_after_limit</span> <span class="o">+=</span> <span class="mi">1</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">_check_easter_egg</span><span class="p">()</span>

            <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Happy button clicked for </span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">ai_player</span><span class="o">.</span><span class="n">name</span><span class="si">}</span><span class="s2"> - making AI happier&quot;</span><span class="p">)</span>
            <span class="n">sound_manager</span><span class="o">.</span><span class="n">play_sound</span><span class="p">(</span><span class="s2">&quot;happy_click&quot;</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">game</span><span class="o">.</span><span class="n">update_ai_mood</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">ai_player</span><span class="o">.</span><span class="n">name</span><span class="p">,</span> <span class="kc">False</span><span class="p">)</span>
            <span class="k">return</span> <span class="kc">True</span>

        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">angry_button_rect</span><span class="o">.</span><span class="n">collidepoint</span><span class="p">(</span><span class="n">pos</span><span class="p">):</span>
            <span class="n">mood_value</span> <span class="o">=</span> <span class="nb">getattr</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">ai_player</span><span class="o">.</span><span class="n">ai_controller</span><span class="p">,</span> <span class="s2">&quot;mood_modifier&quot;</span><span class="p">,</span> <span class="mi">0</span><span class="p">)</span>
            <span class="k">if</span> <span class="n">mood_value</span> <span class="o">&lt;=</span> <span class="o">-</span><span class="mf">0.3</span><span class="p">:</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">angry_clicks_after_limit</span> <span class="o">+=</span> <span class="mi">1</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">_check_easter_egg</span><span class="p">()</span>

            <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Angry button clicked for </span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">ai_player</span><span class="o">.</span><span class="n">name</span><span class="si">}</span><span class="s2"> - making AI angrier&quot;</span><span class="p">)</span>
            <span class="n">sound_manager</span><span class="o">.</span><span class="n">play_sound</span><span class="p">(</span><span class="s2">&quot;angry_click&quot;</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">game</span><span class="o">.</span><span class="n">update_ai_mood</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">ai_player</span><span class="o">.</span><span class="n">name</span><span class="p">,</span> <span class="kc">True</span><span class="p">)</span>
            <span class="k">return</span> <span class="kc">True</span>

        <span class="k">return</span> <span class="kc">False</span></div>


<div class="viewcode-block" id="AIEmotionUI.handle_key">
<a class="viewcode-back" href="../../modules/ui.html#src.UI.AIEmotionUI.handle_key">[docs]</a>
    <span class="k">def</span><span class="w"> </span><span class="nf">handle_key</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">event</span><span class="p">):</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="bp">self</span><span class="o">.</span><span class="n">visible</span><span class="p">:</span>
            <span class="k">return</span> <span class="kc">False</span>

        <span class="k">if</span> <span class="n">event</span><span class="o">.</span><span class="n">key</span> <span class="o">==</span> <span class="n">pygame</span><span class="o">.</span><span class="n">K_h</span><span class="p">:</span>
            <span class="n">mood_value</span> <span class="o">=</span> <span class="nb">getattr</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">ai_player</span><span class="o">.</span><span class="n">ai_controller</span><span class="p">,</span> <span class="s2">&quot;mood_modifier&quot;</span><span class="p">,</span> <span class="mi">0</span><span class="p">)</span>
            <span class="k">if</span> <span class="n">mood_value</span> <span class="o">&gt;=</span> <span class="mf">0.3</span><span class="p">:</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">happy_clicks_after_limit</span> <span class="o">+=</span> <span class="mi">1</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">_check_easter_egg</span><span class="p">()</span>

            <span class="n">sound_manager</span><span class="o">.</span><span class="n">play_sound</span><span class="p">(</span><span class="s2">&quot;happy_click&quot;</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">game</span><span class="o">.</span><span class="n">update_ai_mood</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">ai_player</span><span class="o">.</span><span class="n">name</span><span class="p">,</span> <span class="kc">False</span><span class="p">)</span>
            <span class="k">return</span> <span class="kc">True</span>

        <span class="k">elif</span> <span class="n">event</span><span class="o">.</span><span class="n">key</span> <span class="o">==</span> <span class="n">pygame</span><span class="o">.</span><span class="n">K_a</span><span class="p">:</span>
            <span class="n">mood_value</span> <span class="o">=</span> <span class="nb">getattr</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">ai_player</span><span class="o">.</span><span class="n">ai_controller</span><span class="p">,</span> <span class="s2">&quot;mood_modifier&quot;</span><span class="p">,</span> <span class="mi">0</span><span class="p">)</span>
            <span class="k">if</span> <span class="n">mood_value</span> <span class="o">&lt;=</span> <span class="o">-</span><span class="mf">0.3</span><span class="p">:</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">angry_clicks_after_limit</span> <span class="o">+=</span> <span class="mi">1</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">_check_easter_egg</span><span class="p">()</span>

            <span class="n">sound_manager</span><span class="o">.</span><span class="n">play_sound</span><span class="p">(</span><span class="s2">&quot;angry_click&quot;</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">game</span><span class="o">.</span><span class="n">update_ai_mood</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">ai_player</span><span class="o">.</span><span class="n">name</span><span class="p">,</span> <span class="kc">True</span><span class="p">)</span>
            <span class="k">return</span> <span class="kc">True</span>

        <span class="k">return</span> <span class="kc">False</span></div>


    <span class="k">def</span><span class="w"> </span><span class="nf">_check_easter_egg</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="c1"># trigger youtube link if clicked enough times at max/min mood</span>
        <span class="n">total_clicks</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">happy_clicks_after_limit</span> <span class="o">+</span> <span class="bp">self</span><span class="o">.</span><span class="n">angry_clicks_after_limit</span>

        <span class="k">if</span> <span class="n">total_clicks</span> <span class="o">&gt;=</span> <span class="bp">self</span><span class="o">.</span><span class="n">easter_egg_threshold</span> <span class="ow">and</span> <span class="ow">not</span> <span class="bp">self</span><span class="o">.</span><span class="n">easter_egg_triggered</span><span class="p">:</span>
            <span class="k">try</span><span class="p">:</span>
                <span class="n">webbrowser</span><span class="o">.</span><span class="n">open</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">youtube_url</span><span class="p">)</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">easter_egg_triggered</span> <span class="o">=</span> <span class="kc">True</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">happy_clicks_after_limit</span> <span class="o">=</span> <span class="mi">0</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">angry_clicks_after_limit</span> <span class="o">=</span> <span class="mi">0</span>
            <span class="k">except</span> <span class="ne">Exception</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
                <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Error opening YouTube URL: </span><span class="si">{</span><span class="n">e</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span></div>

</pre></div>

           </div>
          </div>
          <footer>

  <hr/>

  <div role="contentinfo">
    <p>&#169; Copyright 2025, Software Engineering Project Group 5 Eric Shi, Stuart Baker, Lin Moe Hein, Duncan Law, Owen Chen.</p>
  </div>

  Built with <a href="https://www.sphinx-doc.org/">Sphinx</a> using a
    <a href="https://github.com/readthedocs/sphinx_rtd_theme">theme</a>
    provided by <a href="https://readthedocs.org">Read the Docs</a>.
   

</footer>
        </div>
      </div>
    </section>
  </div>
  <script>
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script> 

</body>
</html>